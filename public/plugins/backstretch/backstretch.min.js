/*! Backstretch - v2.1.18 - 2019-09-18\n* Copyright (c) 2019 Scott Robbin;* Fork of improvements - by Daniel Cohen Gindi (danielgindi@gmail.com) Licensed MIT */!function(e,t,n){"use strict";function h(e){return p.hasOwnProperty(e)?e:"cover"}o=/^.*(youtu\.be\/|youtube\.com\/v\/|youtube\.com\/embed\/|youtube\.com\/watch\?v=|youtube\.com\/watch\?.*&v=)([^#&?]*).*/i,e.fn.backstretch=function(s,o){var i,a=arguments;return 0===e(t).scrollTop()&&t.scrollTo(0,0),this.each(function(t){var c,d,l=e(this),r=l.data("backstretch");if(r){if("string"==typeof a[0]&&"function"==typeof r[a[0]])return c=r[a[0]].apply(r,Array.prototype.slice.call(a,1)),c===r&&(c=n),void(c!==n&&(i=i||[],i[t]=c));o=e.extend(r.options,o),"object"==typeof r&&"destroy"in r&&r.destroy(!0)}(!s||s&&0===s.length)&&(d=l.css("background-image"),d&&"none"!==d?s=[{url:l.css("backgroundImage").replace(/url\(|\)|"|'/g,"")}]:e.error("No images were supplied for Backstretch, or element must have a CSS-defined background image.")),r=new u(this,s,o||{}),l.data("backstretch",r)}),i?1===i.length?i[0]:i:this},e.backstretch=function(t,n){return e("body").backstretch(t,n).data("backstretch")},e.expr[":"].backstretch=function(t){return e(t).data("backstretch")!==n},e.fn.backstretch.defaults={duration:5e3,transition:"fade",transitionDuration:0,animateFirst:!0,alignX:.5,alignY:.5,paused:!1,start:0,preload:2,preloadSize:1,resolutionRefreshRate:2500,resolutionChangeRatioThreshold:.1};var s,o,a={wrap:{left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},itemWrapper:{position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"100%",height:"100%",zIndex:-999999},item:{position:"absolute",margin:0,padding:0,border:"none",width:"100%",height:"100%",maxWidth:"none"}},l=function(){var s=function(e){for(n=1;n<e.length;n++){for(var n,s=e[n],t=n;e[t-1]&&parseInt(e[t-1].width,10)>parseInt(s.width,10);)e[t]=e[t-1],--t;e[t]=s}return e},o=function(e,n,s){for(var o,a,r=t.devicePixelRatio||1,c=v(),d=(b(),n>e?"portrait":e>n?"landscape":"square"),l=0,i=0;i<s.length&&(o=s[i],"string"==typeof o&&(o=s[i]={url:o}),o.pixelRatio&&"auto"!==o.pixelRatio&&parseFloat(o.pixelRatio)!==r||o.deviceOrientation&&o.deviceOrientation!==c||o.windowOrientation&&o.windowOrientation!==c||o.orientation&&o.orientation!==d||(l=i,a=e,"auto"===o.pixelRatio&&(e*=r),!(o.width>=a)));i++);return s[Math.min(i,l)]},n=function(e,t){if("string"==typeof e)e=e.replace(/{{(width|height)}}/g,t);else if(e instanceof Array)for(var s=0;s<e.length;s++)e[s].src?e[s].src=n(e[s].src,t):e[s]=n(e[s],t);return e};return function(t,i){for(var r,u,l=t.width(),d=t.height(),c=[],h=function(e,t){return"width"===t?l:"height"===t?d:e},a=0;a<i.length;a++)e.isArray(i[a])?(i[a]=s(i[a]),u=o(l,d,i[a]),c.push(u)):("string"==typeof i[a]&&(i[a]={url:i[a]}),r=e.extend({},i[a]),r.url=n(r.url,h),c.push(r));return c}}(),i=function(e){return o.test(e.url)||e.isVideo},c=function(){var r=[],l=function(e){for(var t=0;t<r.length;t++)if(r[t].src===e.src)return r[t];return r.push(e),e},c=function(e,t,n){"function"==typeof t&&t.call(e,n)};return function t(n,s,o,a,r){if("undefined"!=typeof n){if(e.isArray(n)||(n=[n]),arguments.length<5&&"function"==typeof arguments[arguments.length-1]&&(r=arguments[arguments.length-1]),s="function"!=typeof s&&s?s:0,o="function"==typeof o||!o||o<0?n.length:Math.min(o,n.length),a="function"!=typeof a&&a?a:1,s>=n.length&&(s=0,o=0),a<0&&(a=o),a=Math.min(a,o),h=n.slice(s+a,o-a),n=n.slice(s,a),o=n.length,!o)return void c(n,r,!0);for(var d,h,m=0,f=function(){m++,m===o&&(c(n,r,!h),t(h,0,0,a,r))},u=0;u<n.length;u++)i(n[u])||(d=new Image,d.src=n[u].url,d=l(d),d.complete?f():e(d).on("load error",f))}}}(),r=function(t){for(var s=[],n=0;n<t.length;n++)"string"==typeof t[n]?s.push({url:t[n]}):e.isArray(t[n])?s.push(r(t[n])):s.push(d(t[n]));return s},d=function(e){return(e.centeredX||e.centeredY)&&(t.console&&t.console.log&&t.console.log("jquery.backstretch: `centeredX`/`centeredY` is deprecated, please use `alignX`/`alignY`"),e.centeredX&&(e.alignX=.5),e.centeredY&&(e.alignY=.5)),e.speed!==n&&(t.console&&t.console.log&&t.console.log("jquery.backstretch: `speed` is deprecated, please use `transitionDuration`"),e.transitionDuration=e.speed,e.transition="fade"),e.resolutionChangeRatioTreshold!==n&&(t.console.log("jquery.backstretch: `treshold` is a typo!"),e.resolutionChangeRatioThreshold=e.resolutionChangeRatioTreshold),e.fadeFirst!==n&&(e.animateFirst=e.fadeFirst),e.fade!==n&&(e.transitionDuration=e.fade,e.transition="fade"),e.scale&&(e.scale=h(e.scale)),f(e)},f=function(e,t){return"left"===e.alignX?e.alignX=0:"center"===e.alignX?e.alignX=.5:"right"===e.alignX?e.alignX=1:(e.alignX!==n||t)&&(e.alignX=parseFloat(e.alignX),isNaN(e.alignX)&&(e.alignX=.5)),"top"===e.alignY?e.alignY=0:"center"===e.alignY?e.alignY=.5:"bottom"===e.alignY?e.alignY=1:(e.alignX!==n||t)&&(e.alignY=parseFloat(e.alignY),isNaN(e.alignY)&&(e.alignY=.5)),e},p={cover:"cover",fit:"fit","fit-smaller":"fit-smaller",fill:"fill"},u=function(n,s,o){if(this.options=e.extend({},e.fn.backstretch.defaults,o||{}),this.firstShow=!0,d(this.options,!0),this.images=r(e.isArray(s)?s:[s]),this.options.paused&&(this.paused=!0),this.options.start>=this.images.length&&(this.options.start=this.images.length-1),this.options.start<0&&(this.options.start=0),this.isBody=n===document.body,i=e(t),this.$container=e(n),this.$root=this.isBody?m?i:e(document):this.$container,this.originalImages=this.images,this.images=l(this.options.alwaysTestWindowResolution?i:this.$root,this.originalImages),c(this.images,this.options.start||0,this.options.preload||1),u=this.$container.children(".backstretch").first(),this.$wrap=u.length?u:e('<div class="backstretch"></div>').css(this.options.bypassCss?{}:a.wrap).appendTo(this.$container),!this.options.bypassCss){if(!this.isBody){var i,u,h=this.$container.css("position"),f=this.$container.css("zIndex");this.$container.css({position:"static"===h?"relative":h,zIndex:"auto"===f?0:f}),this.$wrap.css({zIndex:-999998})}this.$wrap.css({position:this.isBody&&m?"fixed":"absolute"})}this.index=this.options.start,this.show(this.index),i.on("resize.backstretch",e.proxy(this.resize,this)).on("orientationchange.backstretch",e.proxy(function(){this.isBody&&0===t.pageYOffset&&(t.scrollTo(0,1),this.resize())},this))},g=function(t){switch(s=t.transition||"fade","string"==typeof s&&s.indexOf("|")>-1&&(s=s.split("|")),s instanceof Array&&(s=s[Math.round(Math.random()*(s.length-1))]),i=t.new,o=t.old?t.old:e([]),s.toString().toLowerCase()){default:case"fade":i.fadeIn({duration:t.duration,complete:t.complete,easing:t.easing||n});break;case"fadeinout":case"fade_in_out":c=function(){i.fadeIn({duration:t.duration/2,complete:t.complete,easing:t.easing||n})},o.length?o.fadeOut({duration:t.duration/2,complete:c,easing:t.easing||n}):c();break;case"pushleft":case"push_left":case"pushright":case"push_right":case"pushup":case"push_up":case"pushdown":case"push_down":case"coverleft":case"cover_left":case"coverright":case"cover_right":case"coverup":case"cover_up":case"coverdown":case"cover_down":var s,o,i,c,l,a=s.match(/^(cover|push)_?(.*)$/),r="left"===a[2]?"right":"right"===a[2]?"left":"down"===a[2]?"top":"up"===a[2]?"bottom":"right",d={display:""},u={};d[r]="-100%",u[r]=0,i.css(d).animate(u,{duration:t.duration,complete:function(){i.css(r,""),t.complete.apply(this,arguments)},easing:t.easing||n}),"push"===a[1]&&o.length&&(l={},l[r]="100%",o.animate(l,{duration:t.duration,complete:function(){o.css("display","none")},easing:t.easing||n}))}};u.prototype={resize:function(){try{var v=this.options.alwaysTestWindowResolution?e(t):this.$root,f=v.width(),p=v.height(),w=f/(this._lastResizeContainerWidth||0),_=p/(this._lastResizeContainerHeight||0),b=this.options.resolutionChangeRatioThreshold||0;(f!==this._lastResizeContainerWidth||p!==this._lastResizeContainerHeight)&&(Math.abs(w-1)>=b||isNaN(w)||Math.abs(_-1)>=b||isNaN(_))&&(this._lastResizeContainerWidth=f,this._lastResizeContainerHeight=p,this.images=l(v,this.originalImages),this.options.preload&&c(this.images,(this.index+1)%this.images.length,this.options.preload),1===this.images.length&&this._currentImage.url!==this.images[0].url)&&(m=this,clearTimeout(m._selectAnotherResolutionTimeout),m._selectAnotherResolutionTimeout=setTimeout(function(){m.show(0)},this.options.resolutionRefreshRate));var s,i,m,g,O,d={left:0,top:0,right:"auto",bottom:"auto"},a=this.isBody?this.$root.width():this.$root.innerWidth(),o=this.isBody?t.innerHeight?t.innerHeight:this.$root.height():this.$root.innerHeight(),y=this.$itemWrapper.data("width"),j=this.$itemWrapper.data("height"),r=y/j||1,x=this._currentImage.alignX===n?this.options.alignX:this._currentImage.alignX,C=this._currentImage.alignY===n?this.options.alignY:this._currentImage.alignY,u=h(this._currentImage.scale||this.options.scale);"fit"===u||"fit-smaller"===u?(s=y,i=j,s>a||i>o||"fit-smaller"===u)&&(g=a/o,g>r?(s=Math.floor(o*r),i=o):g<r?(s=a,i=Math.floor(a/r)):(s=a,i=o)):"fill"===u?(s=a,i=o):(s=Math.max(o*r,a),i=Math.max(s/r,o)),d.top=-(i-o)*C,d.left=-(s-a)*x,d.width=s,d.height=i,this.options.bypassCss||this.$wrap.css({width:a,height:o}).find(">.backstretch-item").not(".deleteable").each(function(){var t=e(this);t.find("img,video,iframe").css(d)}),O=e.Event("backstretch.resize",{relatedTarget:this.$container[0]}),this.$container.trigger(O,this)}catch{}return this},show:function(t,o){if(!(Math.abs(t)>this.images.length-1)){var c,l,r=this,u=r.$wrap.find(">.backstretch-item").addClass("deleteable"),d=r.videoWrapper,h={relatedTarget:r.$container[0]};return r.$container.trigger(e.Event("backstretch.before",h),[r,t]),this.index=t,c=r.images[t],clearTimeout(r._cycleTimeout),delete r.videoWrapper,l=i(c),l?(r.videoWrapper=new s(c),r.$item=r.videoWrapper.$video.css("pointer-events","none")):r.$item=e("<img />"),r.$itemWrapper=e('<div class="backstretch-item">').append(r.$item),this.options.bypassCss?r.$itemWrapper.css({display:"none"}):(r.$itemWrapper.css(a.itemWrapper),r.$item.css(a.item)),r.$item.bind(l?"canplay":"load",function(){var j=e(this),i=j.parent(),a=i.data("options");o&&(a=e.extend({},a,o)),m=this.naturalWidth||this.videoWidth||this.width,f=this.naturalHeight||this.videoHeight||this.height,i.data("width",m).data("height",f);var m,f,c=function(e){return a[e]!==n?a[e]:r.options[e]},p=c("transition"),y=c("transitionEasing"),v=c("transitionDuration"),b=function(){d&&(d.stop(),d.destroy()),u.remove(),!r.paused&&r.images.length>1&&r.cycle(),r.options.bypassCss||r.isBody||r.$container.css("background-image","none"),e(["after","show"]).each(function(){r.$container.trigger(e.Event("backstretch."+this,h),[r,t])}),l&&r.videoWrapper.play()};r.firstShow&&!r.options.animateFirst||!v||!p?(i.show(),b()):g({new:i,old:u,transition:p,duration:v,easing:y,complete:b}),r.firstShow=!1,r.resize()}),r.$itemWrapper.appendTo(r.$wrap),r.$item.attr("alt",c.alt||""),r.$itemWrapper.data("options",c),l||r.$item.attr("src",c.url),r._currentImage=c,r}},current:function(){return this.index},next:function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift(this.index<this.images.length-1?this.index+1:0),this.show.apply(this,e)},prev:function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift(0===this.index?this.images.length-1:this.index-1),this.show.apply(this,e)},pause:function(){return this.paused=!0,this.videoWrapper&&this.videoWrapper.pause(),this},resume:function(){return this.paused=!1,this.videoWrapper&&this.videoWrapper.play(),this.cycle(),this},cycle:function(){if(this.images.length>1){clearTimeout(this._cycleTimeout);var t,o=this._currentImage&&this._currentImage.duration||this.options.duration,s=i(this._currentImage),n=function(){this.$item.off(".cycle"),this.paused||this.next()};s&&(this._currentImage.loop||(t=0,this.$item.on("playing.cycle",function(){var n=e(this).data("player");clearTimeout(t),t=setTimeout(function(){n.pause(),n.$video.trigger("ended")},1e3*(n.getDuration()-n.getCurrentTime()))}).on("ended.cycle",function(){clearTimeout(t)})),this.$item.on("error.cycle initerror.cycle",e.proxy(n,this))),s&&!this._currentImage.duration?this.$item.on("ended.cycle",e.proxy(n,this)):this._cycleTimeout=setTimeout(e.proxy(n,this),o)}return this},destroy:function(n){e(t).off("resize.backstretch orientationchange.backstretch"),this.videoWrapper&&this.videoWrapper.destroy(),clearTimeout(this._cycleTimeout),n||this.$wrap.remove(),this.$container.removeData("backstretch")}},s=function(){this.init.apply(this,arguments)},s.prototype.init=function(i){var r,c,l,d,m,a=this,h=function(){a.$video=r,a.video=r[0]},u="video";if(i.url instanceof Array||!o.test(i.url)||(u="youtube"),a.type=u,"youtube"===u)s.loadYoutubeAPI(),a.ytId=i.url.match(o)[2],m="https://www.youtube.com/embed/"+a.ytId+"?rel=0&autoplay=0&showinfo=0&controls=0&modestbranding=1&cc_load_policy=0&disablekb=1&iv_load_policy=3&loop=0&enablejsapi=1&origin="+encodeURIComponent(t.location.origin),a.__ytStartMuted=!!i.mute||i.mute===n,r=e("<iframe />").attr({src_to_load:m}).css({border:0,margin:0,padding:0}).data("player",a),i.loop&&r.on("ended.loop",function(){a.__manuallyStopped||a.play()}),a.ytReady=!1,h(),t.YT&&t.YT.loaded?(a._initYoutube(),r.trigger("initsuccess")):e(t).one("youtube_api_load",function(){a._initYoutube(),r.trigger("initsuccess")});else{r=e("<video>").prop("autoplay",!1).prop("controls",!1).prop("loop",!!i.loop).prop("muted",!!i.mute||i.mute===n).prop("preload","auto").prop("poster",i.poster||"");for(l=i.url instanceof Array?i.url:[i.url],d=0;d<l.length;d++)c=l[d],"string"==typeof c&&(c={src:c}),e("<source>").attr("src",c.src).attr("type",c.type||null).appendTo(r);r[0].canPlayType&&l.length?r.trigger("initsuccess"):r.trigger("initerror"),h()}},s.prototype._initYoutube=function(){var o,i,a,n=this,s=t.YT;return n.$video.attr("src",n.$video.attr("src_to_load")).removeAttr("src_to_load"),i=!!n.$video[0].parentNode,i||(o=e("<div>").css("display","none !important").appendTo(document.body),n.$video.appendTo(o)),a=new s.Player(n.video,{events:{onReady:function(){n.__ytStartMuted&&a.mute(),i||(n.$video[0].parentNode===o[0]&&n.$video.detach(),o.remove()),n.ytReady=!0,n._updateYoutubeSize(),n.$video.trigger("canplay")},onStateChange:function(e){switch(e.data){case s.PlayerState.PLAYING:n.$video.trigger("playing");break;case s.PlayerState.ENDED:n.$video.trigger("ended");break;case s.PlayerState.PAUSED:n.$video.trigger("pause");break;case s.PlayerState.BUFFERING:n.$video.trigger("waiting");break;case s.PlayerState.CUED:n.$video.trigger("canplay")}},onPlaybackQualityChange:function(){n._updateYoutubeSize(),n.$video.trigger("resize")},onError:function(e){n.hasError=!0,n.$video.trigger({type:"error",error:e})}}}),n.ytPlayer=a,n},s.prototype._updateYoutubeSize=function(){var e=this;switch(e.ytPlayer.getPlaybackQuality()||"medium"){case"small":e.video.videoWidth=426,e.video.videoHeight=240;break;case"medium":e.video.videoWidth=640,e.video.videoHeight=360;break;default:case"large":e.video.videoWidth=854,e.video.videoHeight=480;break;case"hd720":e.video.videoWidth=1280,e.video.videoHeight=720;break;case"hd1080":e.video.videoWidth=1920,e.video.videoHeight=1080;break;case"highres":e.video.videoWidth=2560,e.video.videoHeight=1440}return e},s.prototype.play=function(){var e=this;return e.__manuallyStopped=!1,"youtube"===e.type?e.ytReady&&(e.$video.trigger("play"),e.ytPlayer.playVideo()):e.video.play(),e},s.prototype.pause=function(){var e=this;return e.__manuallyStopped=!1,"youtube"===e.type?e.ytReady&&e.ytPlayer.pauseVideo():e.video.pause(),e},s.prototype.stop=function(){var e=this;return e.__manuallyStopped=!0,"youtube"===e.type?e.ytReady&&(e.ytPlayer.pauseVideo(),e.ytPlayer.seekTo(0)):(e.video.pause(),e.video.currentTime=0),e},s.prototype.destroy=function(){var e=this;return e.ytPlayer&&e.ytPlayer.destroy(),e.$video.remove(),e},s.prototype.getCurrentTime=function(){var t=this;return"youtube"!==t.type?t.video.currentTime:t.ytReady?t.ytPlayer.getCurrentTime():0},s.prototype.setCurrentTime=function(e){var t=this;return"youtube"===t.type?t.ytReady&&t.ytPlayer.seekTo(e,!0):t.video.currentTime=e,t},s.prototype.getDuration=function(){var e=this;return"youtube"!==e.type?e.video.duration:e.ytReady?e.ytPlayer.getDuration():0},s.loadYoutubeAPI=function(){t.YT&&t.__yt_load_event_interval__||(t.YT||e("script[src*=www\\.youtube\\.com\\/iframe_api]").length||e('<script type="text/javascript" src="https://www.youtube.com/iframe_api">').appendTo("body"),t.__yt_load_event_interval__=setInterval(function(){t.YT&&t.YT.loaded&&(e(t).trigger("youtube_api_load"),clearTimeout(t.__yt_load_event_interval__),delete t.__yt_load_event_interval__)},50))};var v=function(){if("matchMedia"in t){if(t.matchMedia("(orientation: portrait)").matches)return"portrait";if(t.matchMedia("(orientation: landscape)").matches)return"landscape"}return screen.height>screen.width?"portrait":"landscape"},b=function(){return t.innerHeight>t.innerWidth?"portrait":t.innerWidth>t.innerHeight?"landscape":"square"},m=function(){var e=navigator.userAgent,s=navigator.platform,i=e.match(/AppleWebKit\/([0-9]+)/),n=!!i&&i[1],a=e.match(/Fennec\/([0-9]+)/),r=!!a&&a[1],o=e.match(/Opera Mobi\/([0-9]+)/),d=!!o&&o[1],c=e.match(/MSIE ([0-9]+)/),l=!!c&&c[1];return!((s.indexOf("iPhone")>-1||s.indexOf("iPad")>-1||s.indexOf("iPod")>-1)&&n&&n<534||t.operamini&&"[object OperaMini]"==={}.toString.call(t.operamini)||o&&d<7458||e.indexOf("Android")>-1&&n&&n<533||r&&r<6||"palmGetResource"in t&&n&&n<534||e.indexOf("MeeGo")>-1&&e.indexOf("NokiaBrowser/8.5.0")>-1||l&&l<=6)}()}(jQuery,window)