!function(e){e.confetti=new function(){var t,n,s,o,h,m,a=max_particles_confetti,r=[],c=0,l=!0,i=!0,v={colorOptions:colours_confetti,colorIndex:0,colorIncrementer:0,colorThreshold:10,getColor:function(){return this.colorIncrementer>=10&&(this.colorIncrementer=0,this.colorIndex++,this.colorIndex>=this.colorOptions.length&&(this.colorIndex=0)),this.colorIncrementer++,this.colorOptions[this.colorIndex]}};function g(e){var o,i;this.x=Math.random()*n,this.y=Math.random()*t-t,this.r=(o=10,i=30,Math.floor(Math.random()*(i-o+1)+o)),this.d=Math.random()*a+10,this.color=e,this.tilt=Math.floor(10*Math.random())-10,this.tiltAngleIncremental=.07*Math.random()+.05,this.tiltAngle=0,this.draw=function(){return s.beginPath(),s.lineWidth=this.r/2,s.strokeStyle=this.color,s.moveTo(this.x+this.tilt+this.r/4,this.y),s.lineTo(this.x+this.tilt,this.y+this.tilt+this.r/4),s.stroke()}}function d(){o.style.display="block",r=[],i=!1;for(var d,e=0;e<a;e++)d=v.getColor(),r.push(new g(d));n=window.innerWidth,t=window.innerHeight,o.width=n,o.height=t,function e(){return i?null:(h=requestAnimFrame(e),function(){s.clearRect(0,0,n,t);for(var d,o=[],e=0;e<a;e++)d=e,o.push(r[d].draw());return function(){var e,n,s=0;c+=.01,.1;for(n=0;n<a;n++){if(e=r[n],i)return;!l&&e.y<-15?e.y=t+100:(j(e,n),e.y<=t&&s++,b(e,n))}0===s&&p()}(),o}())}()}function b(e,s){(e.x>n+20||e.x<-20||e.y>t)&&l&&(s%5>0||s%2==0?u(e,Math.random()*n,-10,Math.floor(10*Math.random())-10):Math.sin(c)>0?u(e,-5,Math.random()*t,Math.floor(10*Math.random())-10):u(e,n+5,Math.random()*t,Math.floor(10*Math.random())-10))}function j(e,t){e.tiltAngle+=e.tiltAngleIncremental,e.y+=(Math.cos(c+e.d)+3+e.r/2)/2,e.x+=Math.sin(c),e.tilt=15*Math.sin(e.tiltAngle-t/3)}function u(e,t,n,s){e.x=t,e.y=n,e.tilt=s}function f(){clearTimeout(m),clearTimeout(h)}function y(){l=!1,f()}function p(){i=!0,s!=null&&(s.clearRect(0,0,n,t),o.style.display="none")}function _(){f(),p(),m=setTimeout(function(){l=!0,i=!1,d()},100)}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},this.init=function(){e("#confetti").append('<canvas id="confettiCanvas" style="position:absolute;top:0;left:0;display:none;"></canvas>'),o=document.getElementById("confettiCanvas"),s=o.getContext("2d"),n=window.innerWidth,t=window.innerHeight,o.width=n,o.height=t,d(),e(window).resize(function(){n=window.innerWidth,t=window.innerHeight,o.width=n,o.height=t})},this.start=d,this.stop=y,this.restart=_},e.confetti.init()}(jQuery)