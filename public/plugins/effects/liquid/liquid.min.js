!function(){"use strict";a={screen:{elem:null,callback:null,ctx:null,width:0,height:0,left:0,top:0,init:function(e,t,n){return this.elem=document.getElementById(e),this.callback=t||null,"CANVAS"==this.elem.tagName&&(this.ctx=this.elem.getContext("2d")),window.addEventListener("resize",function(){this.resize()}.bind(this),!1),this.elem.onselectstart=function(){return!1},this.elem.ondrag=function(){return!1},n&&this.resize(),this},resize:function(){var e=this.elem;for(this.width=e.offsetWidth,this.height=e.offsetHeight,this.left=0,this.top=0;e!=null;e=e.offsetParent)this.left+=e.offsetLeft,this.top+=e.offsetTop;this.ctx&&(this.elem.width=this.width,this.elem.height=this.height),this.callback&&this.callback()}}},t=function(e,t){this.x=e,this.y=t,this.magnitude=e*e+t*t,this.computed=0,this.force=0},t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},o=function(e){this.vel=new t((Math.random()>.5?1:-1)*(.2+.25*Math.random()),(Math.random()>.5?1:-1)*(.2+Math.random())),this.pos=new t(.2*e.width+Math.random()*e.width*.6,.2*e.height+Math.random()*e.height*.6),this.size=e.wh/15+(1.4*Math.random()+.1)*(e.wh/15),this.width=e.width,this.height=e.height},o.prototype.move=function(){this.pos.x>=this.width-this.size?(this.vel.x>0&&(this.vel.x=-this.vel.x),this.pos.x=this.width-this.size):this.pos.x<=this.size&&(this.vel.x<0&&(this.vel.x=-this.vel.x),this.pos.x=this.size),this.pos.y>=this.height-this.size?(this.vel.y>0&&(this.vel.y=-this.vel.y),this.pos.y=this.height-this.size):this.pos.y<=this.size&&(this.vel.y<0&&(this.vel.y=-this.vel.y),this.pos.y=this.size),this.pos=this.pos.add(this.vel)},s=function(e,n,s,i,a){this.step=5,this.width=e,this.height=n,this.wh=Math.min(e,n),this.sx=Math.floor(this.width/this.step),this.sy=Math.floor(this.height/this.step),this.paint=!1,this.metaFill=c(e,n,e,i,a),this.plx=[0,0,1,0,1,1,1,1,1,1,0,1,0,0,0,0],this.ply=[0,0,0,0,0,0,1,0,0,1,1,1,0,1,0,1],this.mscases=[0,3,0,3,1,3,0,3,2,2,0,2,1,1,0],this.ix=[1,0,-1,0,0,1,0,-1,-1,0,1,0,0,1,1,0,0,0,1,1],this.grid=[],this.balls=[],this.iter=0,this.sign=1;for(var l,r=0;r<(this.sx+2)*(this.sy+2);r++)this.grid[r]=new t(r%(this.sx+2)*this.step,Math.floor(r/(this.sx+2))*this.step);for(l=0;l<s;l++)this.balls[l]=new o(this)},s.prototype.computeForce=function(e,t,n){if(i=n||e+t*(this.sx+2),0===e||0===t||e===this.sx||t===this.sy)s=.6*this.sign;else{s=0;for(var s,o,i,a=this.grid[i],r=0;o=this.balls[r++];)s+=o.size*o.size/(-2*a.x*o.pos.x-2*a.y*o.pos.y+o.pos.magnitude+a.magnitude);s*=this.sign}return this.grid[i].force=s,s},s.prototype.marchingSquares=function(t){var n,i,a,r,c,l,s=t[0],o=t[1],d=t[2],u=s+o*(this.sx+2);if(this.grid[u].computed===this.iter)return!1;for(a=0,i=0;i<4;i++)c=s+this.ix[i+12]+(o+this.ix[i+16])*(this.sx+2),r=this.grid[c].force,(r>0&&this.sign<0||r<0&&this.sign>0||!r)&&(r=this.computeForce(s+this.ix[i+12],o+this.ix[i+16],c)),Math.abs(r)>1&&(a+=Math.pow(2,i));return 15===a?[s,o-1,!1]:(5===a?n=2===d?3:1:10===a?n=3===d?0:2:(n=this.mscases[a],this.grid[u].computed=this.iter),l=this.step/(Math.abs(Math.abs(this.grid[s+this.plx[4*n+2]+(o+this.ply[4*n+2])*(this.sx+2)].force)-1)/Math.abs(Math.abs(this.grid[s+this.plx[4*n+3]+(o+this.ply[4*n+3])*(this.sx+2)].force)-1)+1),e.lineTo(this.grid[s+this.plx[4*n]+(o+this.ply[4*n])*(this.sx+2)].x+this.ix[n]*l,this.grid[s+this.plx[4*n+1]+(o+this.ply[4*n+1])*(this.sx+2)].y+this.ix[n+4]*l),this.paint=!0,[s+this.ix[n+4],o+this.ix[n+8],n])},s.prototype.renderMetaballs=function(){for(var t,n,s=0;t=this.balls[s++];)t.move();for(this.iter++,this.sign=-this.sign,this.paint=!1,e.fillStyle=this.metaFill,e.beginPath(),s=0;t=this.balls[s++];){n=[Math.round(t.pos.x/this.step),Math.round(t.pos.y/this.step),!1];do n=this.marchingSquares(n);while(n)this.paint&&(e.fill(),e.closePath(),e.beginPath(),this.paint=!1)}};var t,s,o,i,a,c=function(t,n,s,o,i){var a=e.createRadialGradient(t/1,n/1,0,t/1,n/1,s);return a.addColorStop(0,o),a.addColorStop(1,i),a},r=function(){requestAnimationFrame(r),e.clearRect(0,0,n.width,n.height),i.renderMetaballs()},n=a.screen.init("liquid",null,!0),e=n.ctx;n.resize(),i=new s(n.width,n.height,6,color_1_liquid,color_2_liquid),r()}()