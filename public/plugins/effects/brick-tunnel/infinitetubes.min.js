!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.THREE=e.THREE||{})}(this,function(e){function X(){}function n(e,t){this.x=e||0,this.y=t||0}function p(e,t,s,o,i,a,r,c,d,u){Object.defineProperty(this,"id",{value:Es++}),this.uuid=l.generateUUID(),this.name="",this.image=void 0!==e?e:p.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:p.DEFAULT_MAPPING,this.wrapS=void 0!==s?s:1001,this.wrapT=void 0!==o?o:1001,this.magFilter=void 0!==i?i:1006,this.minFilter=void 0!==a?a:1008,this.anisotropy=void 0!==d?d:1,this.format=void 0!==r?r:1023,this.type=void 0!==c?c:1009,this.offset=new n(0,0),this.repeat=new n(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:3e3,this.version=0,this.onUpdate=null}function f(e,t,n,s){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==s?s:1}function oe(e,t,n){this.uuid=l.generateUUID(),this.width=e,this.height=t,this.scissor=new f(0,0,e,t),this.scissorTest=!1,this.viewport=new f(0,0,e,t),void 0===(n=n||{}).minFilter&&(n.minFilter=1006),this.texture=new p(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Ne(e,t,n){oe.call(this,e,t,n),this.activeMipMapLevel=this.activeCubeFace=0}function y(e,t,n,s){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==s?s:1}function t(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function r(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function se(e,t,n,s,o,i,a,r,c,l){e=void 0!==e?e:[],p.call(this,e,void 0!==t?t:301,n,s,o,i,a,r,c,l),this.flipY=!1}function Le(e,t,n){if(s=e[0],0>=s||0<s)return e;var s,o=t*n,i=$s[o];if(void 0===i&&(i=new Float32Array(o),$s[o]=i),0!==t)for(s.toArray(i,0),s=1,o=0;s!==t;++s)o+=n,e[s].toArray(i,o);return i}function Ps(e,t){var s,n=Us[t];void 0===n&&(n=new Int32Array(t),Us[t]=n);for(s=0;s!==t;++s)n[s]=e.allocTextureUnit();return n}function ko(e,t){e.uniform1f(this.addr,t)}function Eo(e,t){e.uniform1i(this.addr,t)}function _o(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function yo(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function bo(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function vo(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function lo(e,t){e.uniformMatrix3fv(this.addr,!1,t.elements||t)}function no(e,t){e.uniformMatrix4fv(this.addr,!1,t.elements||t)}function so(e,t,n){var s=n.allocTextureUnit();e.uniform1i(this.addr,s),n.setTexture2D(t||Cs,s)}function ro(e,t,n){var s=n.allocTextureUnit();e.uniform1i(this.addr,s),n.setTextureCube(t||Ts,s)}function ks(e,t){e.uniform2iv(this.addr,t)}function Fs(e,t){e.uniform3iv(this.addr,t)}function Ls(e,t){e.uniform4iv(this.addr,t)}function po(e,t){e.uniform1fv(this.addr,t)}function go(e,t){e.uniform1iv(this.addr,t)}function jo(e,t){e.uniform2fv(this.addr,Le(t,this.size,2))}function wo(e,t){e.uniform3fv(this.addr,Le(t,this.size,3))}function Oo(e,t){e.uniform4fv(this.addr,Le(t,this.size,4))}function xo(e,t){e.uniformMatrix2fv(this.addr,!1,Le(t,this.size,4))}function Co(e,t){e.uniformMatrix3fv(this.addr,!1,Le(t,this.size,9))}function So(e,t){e.uniformMatrix4fv(this.addr,!1,Le(t,this.size,16))}function Mo(e,t,n){var s=t.length,o=Ps(n,s);for(e.uniform1iv(this.addr,o),e=0;e!==s;++e)n.setTexture2D(t[e]||Cs,o[e])}function Do(e,t,n){var s=t.length,o=Ps(n,s);for(e.uniform1iv(this.addr,o),e=0;e!==s;++e)n.setTextureCube(t[e]||Ts,o[e])}function No(e,t,n){this.id=e,this.addr=n,this.setValue=function(e){switch(e){case 5126:return ko;case 35664:return _o;case 35665:return yo;case 35666:return bo;case 35674:return vo;case 35675:return lo;case 35676:return no;case 35678:return so;case 35680:return ro;case 5124:case 35670:return Eo;case 35667:case 35671:return ks;case 35668:case 35672:return Fs;case 35669:case 35673:return Ls}}(t.type)}function Lo(e,t,n){this.id=e,this.addr=n,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return po;case 35664:return jo;case 35665:return wo;case 35666:return Oo;case 35674:return xo;case 35675:return Co;case 35676:return So;case 35678:return Mo;case 35680:return Do;case 5124:case 35670:return go;case 35667:case 35671:return ks;case 35668:case 35672:return Fs;case 35669:case 35673:return Ls}}(t.type)}function As(e){this.id=e,this.seq=[],this.map={}}function ae(e,t,n){this.seq=[],this.map={},this.renderer=n,n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(c=0;c<n;++c){var c,s=e.getActiveUniform(t,c),d=e.getUniformLocation(t,s.name),o=this,r=s.name,u=r.length;for(Wn.lastIndex=0;;){var l=Wn.exec(r),h=Wn.lastIndex,i=l[1],a=l[3];if("]"===l[2]&&(i|=0),void 0===a||"["===a&&h+2===u){r=o,s=void 0===a?new No(i,s,d):new Lo(i,s,d),r.seq.push(s),r.map[s.id]=s;break}void 0===(a=o.map[i])&&(a=new As(i),i=o,o=a,i.seq.push(o),i.map[o.id]=o),o=a}}}function a(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function be(e,t,n,s,o,i,a,r,c,l,d,u){p.call(this,null,i,a,r,c,l,s,o,d,u),this.image={data:e,width:t,height:n},this.magFilter=void 0!==c?c:1003,this.minFilter=void 0!==l?l:1003,this.flipY=this.generateMipmaps=!1,this.unpackAlignment=1}function un(e,t){this.min=void 0!==e?e:new n(1/0,1/0),this.max=void 0!==t?t:new n(-1/0,-1/0)}function Ro(e,s){var a,r,c,l,d,u,h,m,f,p,g,v,b,j,y,o=e.context,i=e.state;this.render=function(_,w,O){if(0!==s.length){_=new t;var x,L,z=O.w/O.z,R=.5*O.z,N=.5*O.w,S=new n((k=16/O.w)*z,k),E=new t(1,1,0),M=new n(1,1),D=new un;if(D.min.set(O.x,O.y),D.max.set(O.x+(O.z-16),O.y+(O.w-16)),void 0===a){k=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),A=new Uint16Array([0,1,2,0,2,3]),m=o.createBuffer(),f=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,m),o.bufferData(o.ARRAY_BUFFER,k,o.STATIC_DRAW),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,f),o.bufferData(o.ELEMENT_ARRAY_BUFFER,A,o.STATIC_DRAW),c=o.createTexture(),p=o.createTexture(),i.bindTexture(o.TEXTURE_2D,c),o.texImage2D(o.TEXTURE_2D,0,o.RGB,16,16,0,o.RGB,o.UNSIGNED_BYTE,null),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),i.bindTexture(o.TEXTURE_2D,p),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,16,16,0,o.RGBA,o.UNSIGNED_BYTE,null),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST);var k={vertexShader:`uniform lowp int renderType;
uniform vec3 screenPosition;
uniform vec2 scale;
uniform float rotation;
uniform sampler2D occlusionMap;
attribute vec2 position;
attribute vec2 uv;
varying vec2 vUV;
varying float vVisibility;
void main() {
vUV = uv;
vec2 pos = position;
if ( renderType == 2 ) {
vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );
visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );
visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );
visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );
visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );
visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );
visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );
visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );
visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );
vVisibility =        visibility.r / 9.0;
vVisibility *= 1.0 - visibility.g / 9.0;
vVisibility *=       visibility.b / 9.0;
vVisibility *= 1.0 - visibility.a / 9.0;
pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;
pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;
}
gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );
}`,fragmentShader:`uniform lowp int renderType;
uniform sampler2D map;
uniform float opacity;
uniform vec3 color;
varying vec2 vUV;
varying float vVisibility;
void main() {
if ( renderType == 0 ) {
gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );
} else if ( renderType == 1 ) {
gl_FragColor = texture2D( map, vUV );
} else {
vec4 texture = texture2D( map, vUV );
texture.a *= opacity * vVisibility;
gl_FragColor = texture;
gl_FragColor.rgb *= color;
}
}`},A=o.createProgram(),T=o.createShader(o.FRAGMENT_SHADER),C=o.createShader(o.VERTEX_SHADER),F="precision "+e.getPrecision()+` float;
`;o.shaderSource(T,F+k.fragmentShader),o.shaderSource(C,F+k.vertexShader),o.compileShader(T),o.compileShader(C),o.attachShader(A,T),o.attachShader(A,C),o.linkProgram(A),a=A,l=o.getAttribLocation(a,"position"),h=o.getAttribLocation(a,"uv"),r=o.getUniformLocation(a,"renderType"),y=o.getUniformLocation(a,"map"),j=o.getUniformLocation(a,"occlusionMap"),b=o.getUniformLocation(a,"opacity"),v=o.getUniformLocation(a,"color"),u=o.getUniformLocation(a,"scale"),g=o.getUniformLocation(a,"rotation"),d=o.getUniformLocation(a,"screenPosition")}for(o.useProgram(a),i.initAttributes(),i.enableAttribute(l),i.enableAttribute(h),i.disableUnusedAttributes(),o.uniform1i(j,0),o.uniform1i(y,1),o.bindBuffer(o.ARRAY_BUFFER,m),o.vertexAttribPointer(l,2,o.FLOAT,!1,16,0),o.vertexAttribPointer(h,2,o.FLOAT,!1,16,8),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,f),i.disable(o.CULL_FACE),i.setDepthWrite(!1),A=0,T=s.length;A<T;A++)if(k=16/O.w,S.set(k*z,k),C=s[A],_.set(C.matrixWorld.elements[12],C.matrixWorld.elements[13],C.matrixWorld.elements[14]),_.applyMatrix4(w.matrixWorldInverse),_.applyMatrix4(w.projectionMatrix),E.copy(_),M.x=O.x+E.x*R+R-8,M.y=O.y+E.y*N+N-8,!0===D.containsPoint(M)){i.activeTexture(o.TEXTURE0),i.bindTexture(o.TEXTURE_2D,null),i.activeTexture(o.TEXTURE1),i.bindTexture(o.TEXTURE_2D,c),o.copyTexImage2D(o.TEXTURE_2D,0,o.RGB,M.x,M.y,16,16,0),o.uniform1i(r,0),o.uniform2f(u,S.x,S.y),o.uniform3f(d,E.x,E.y,E.z),i.disable(o.BLEND),i.enable(o.DEPTH_TEST),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0),i.activeTexture(o.TEXTURE0),i.bindTexture(o.TEXTURE_2D,p),o.copyTexImage2D(o.TEXTURE_2D,0,o.RGBA,M.x,M.y,16,16,0),o.uniform1i(r,1),i.disable(o.DEPTH_TEST),i.activeTexture(o.TEXTURE1),i.bindTexture(o.TEXTURE_2D,c),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0),C.positionScreen.copy(E),C.customUpdateCallback?C.customUpdateCallback(C):C.updateLensFlares(),o.uniform1i(r,2),i.enable(o.BLEND),F=0;for(L=C.lensFlares.length;F<L;F++)x=C.lensFlares[F],.001<x.opacity&&.001<x.scale&&(E.x=x.x,E.y=x.y,E.z=x.z,k=x.size*x.scale/O.w,S.x=k*z,S.y=k,o.uniform3f(d,E.x,E.y,E.z),o.uniform2f(u,S.x,S.y),o.uniform1f(g,x.rotation),o.uniform1f(b,x.opacity),o.uniform3f(v,x.color.r,x.color.g,x.color.b),i.setBlending(x.blending,x.blendEquation,x.blendSrc,x.blendDst),e.setTexture2D(x.texture,1),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0))}i.enable(o.CULL_FACE),i.enable(o.DEPTH_TEST),i.setDepthWrite(!0),e.resetGLState()}}}function Po(e,n){function F(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}var o,a,r,c,d,u,h,m,f,g,v,b,j,_,w,O,x,C,E,k,A,s=e.context,i=e.state,S=new t,M=new y,l=new t;this.render=function(t,y){if(0!==n.length){if(void 0===o){var T,z,L,R,P,D=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),N=new Uint16Array([0,1,2,0,2,3]);h=s.createBuffer(),u=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,h),s.bufferData(s.ARRAY_BUFFER,D,s.STATIC_DRAW),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,u),s.bufferData(s.ELEMENT_ARRAY_BUFFER,N,s.STATIC_DRAW),D=s.createProgram(),N=s.createShader(s.VERTEX_SHADER),z=s.createShader(s.FRAGMENT_SHADER),s.shaderSource(N,["precision "+e.getPrecision()+" float;",`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float rotation;
uniform vec2 scale;
uniform vec2 uvOffset;
uniform vec2 uvScale;
attribute vec2 position;
attribute vec2 uv;
varying vec2 vUV;
void main() {
vUV = uvOffset + uv * uvScale;
vec2 alignedPosition = position * scale;
vec2 rotatedPosition;
rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
vec4 finalPosition;
finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
finalPosition.xy += rotatedPosition;
finalPosition = projectionMatrix * finalPosition;
gl_Position = finalPosition;
}`].join(`
`)),s.shaderSource(z,["precision "+e.getPrecision()+" float;",`uniform vec3 color;
uniform sampler2D map;
uniform float opacity;
uniform int fogType;
uniform vec3 fogColor;
uniform float fogDensity;
uniform float fogNear;
uniform float fogFar;
uniform float alphaTest;
varying vec2 vUV;
void main() {
vec4 texture = texture2D( map, vUV );
if ( texture.a < alphaTest ) discard;
gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );
if ( fogType > 0 ) {
float depth = gl_FragCoord.z / gl_FragCoord.w;
float fogFactor = 0.0;
if ( fogType == 1 ) {
fogFactor = smoothstep( fogNear, fogFar, depth );
} else {
const float LOG2 = 1.442695;
fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );
fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );
}
gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
}
}`].join(`
`)),s.compileShader(N),s.compileShader(z),s.attachShader(D,N),s.attachShader(D,z),s.linkProgram(D),o=D,r=s.getAttribLocation(o,"position"),m=s.getAttribLocation(o,"uv"),d=s.getUniformLocation(o,"uvOffset"),c=s.getUniformLocation(o,"uvScale"),w=s.getUniformLocation(o,"rotation"),A=s.getUniformLocation(o,"scale"),k=s.getUniformLocation(o,"color"),C=s.getUniformLocation(o,"map"),f=s.getUniformLocation(o,"opacity"),x=s.getUniformLocation(o,"modelViewMatrix"),g=s.getUniformLocation(o,"projectionMatrix"),a=s.getUniformLocation(o,"fogType"),_=s.getUniformLocation(o,"fogDensity"),j=s.getUniformLocation(o,"fogNear"),O=s.getUniformLocation(o,"fogFar"),v=s.getUniformLocation(o,"fogColor"),b=s.getUniformLocation(o,"alphaTest"),(D=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=8,D.height=8,(N=D.getContext("2d")).fillStyle="white",N.fillRect(0,0,8,8),(E=new p(D)).needsUpdate=!0}s.useProgram(o),i.initAttributes(),i.enableAttribute(r),i.enableAttribute(m),i.disableUnusedAttributes(),i.disable(s.CULL_FACE),i.enable(s.BLEND),s.bindBuffer(s.ARRAY_BUFFER,h),s.vertexAttribPointer(r,2,s.FLOAT,!1,16,0),s.vertexAttribPointer(m,2,s.FLOAT,!1,16,8),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,u),s.uniformMatrix4fv(g,!1,y.projectionMatrix.elements),i.activeTexture(s.TEXTURE0),s.uniform1i(C,0),N=D=0,(z=t.fog)?(s.uniform3f(v,z.color.r,z.color.g,z.color.b),z.isFog?(s.uniform1f(j,z.near),s.uniform1f(O,z.far),s.uniform1i(a,1),N=D=1):z.isFogExp2&&(s.uniform1f(_,z.density),s.uniform1i(a,2),N=D=2)):(s.uniform1i(a,0),N=D=0),z=0;for(R=n.length;z<R;z++)(L=n[z]).modelViewMatrix.multiplyMatrices(y.matrixWorldInverse,L.matrixWorld),L.z=-L.modelViewMatrix.elements[14];n.sort(F),P=[];for(z=0,R=n.length;z<R;z++)T=(L=n[z]).material,!1!==T.visible&&(s.uniform1f(b,T.alphaTest),s.uniformMatrix4fv(x,!1,L.modelViewMatrix.elements),L.matrixWorld.decompose(S,M,l),P[0]=l.x,P[1]=l.y,L=0,t.fog&&T.fog&&(L=N),D!==L&&(s.uniform1i(a,L),D=L),null!==T.map?(s.uniform2f(d,T.map.offset.x,T.map.offset.y),s.uniform2f(c,T.map.repeat.x,T.map.repeat.y)):(s.uniform2f(d,0,0),s.uniform2f(c,1,1)),s.uniform1f(f,T.opacity),s.uniform3f(k,T.color.r,T.color.g,T.color.b),s.uniform1f(w,T.rotation),s.uniform2fv(A,P),i.setBlending(T.blending,T.blendEquation,T.blendSrc,T.blendDst),i.setDepthTest(T.depthTest),i.setDepthWrite(T.depthWrite),T.map?e.setTexture2D(T.map,0):e.setTexture2D(E,0),s.drawElements(s.TRIANGLES,6,s.UNSIGNED_SHORT,0));i.enable(s.CULL_FACE),e.resetGLState()}}}function h(){Object.defineProperty(this,"id",{value:Zs++}),this.uuid=l.generateUUID(),this.name="",this.type="Material",this.lights=this.fog=!0,this.blending=1,this.side=0,this.shading=2,this.vertexColors=0,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=3,this.depthWrite=this.depthTest=!0,this.clippingPlanes=null,this.clipShadows=this.clipIntersection=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.premultipliedAlpha=!1,this.overdraw=0,this._needsUpdate=this.visible=!0}function E(e){h.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,this.fragmentShader=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function te(e){h.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.lights=this.fog=!1,this.setValues(e)}function K(e,n){this.min=void 0!==e?e:new t(1/0,1/0,1/0),this.max=void 0!==n?n:new t(-1/0,-1/0,-1/0)}function D(e,n){this.center=void 0!==e?e:new t,this.radius=void 0!==n?n:0}function B(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function z(e,n){this.normal=void 0!==e?e:new t(1,0,0),this.constant=void 0!==n?n:0}function ln(e,t,n,s,o,i){this.planes=[void 0!==e?e:new z,void 0!==t?t:new z,void 0!==n?n:new z,void 0!==s?s:new z,void 0!==o?o:new z,void 0!==i?i:new z]}function Vs(e,s,o,i){function y(t,n,s,o){var i=t.geometry,r=j,a=t.customDepthMaterial;return s&&(r=_,a=t.customDistanceMaterial),a?r=a:(a=!1,n.morphTargets&&(i&&i.isBufferGeometry?a=i.morphAttributes&&i.morphAttributes.position&&0<i.morphAttributes.position.length:i&&i.isGeometry&&(a=i.morphTargets&&0<i.morphTargets.length)),i=0,a&&(i|=1),(t=t.isSkinnedMesh&&n.skinning)&&(i|=2),r=r[i]),e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length&&(i=r.uuid,a=n.uuid,void 0===(t=w[i])&&(t={},w[i]=t),void 0===(i=t[a])&&(i=r.clone(),t[a]=i),r=i),r.visible=n.visible,r.wireframe=n.wireframe,a=n.side,c.renderSingleSided&&2==a&&(a=0),c.renderReverseSided&&(0===a?a=1:1===a&&(a=0)),r.side=a,r.clipShadows=n.clipShadows,r.clippingPlanes=n.clippingPlanes,r.wireframeLinewidth=n.wireframeLinewidth,r.linewidth=n.linewidth,s&&void 0!==r.uniforms.lightPos&&r.uniforms.lightPos.value.copy(o),r}function S(e,t,n){if(!1!==e.visible){0!=(e.layers.mask&t.layers.mask)&&(e.isMesh||e.isLine||e.isPoints)&&e.castShadow&&(!1===e.frustumCulled||!0===C.intersectsObject(e))&&!0===e.material.visible&&(e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),m.push(e));for(var s=0,o=(e=e.children).length;s<o;s++)S(e[s],t,n)}}var c,l,O,z=e.context,u=e.state,C=new ln,x=new r,b=s.shadows,a=new n,T=new n(i.maxTextureSize,i.maxTextureSize),h=new t,g=new t,m=[],j=Array(4),_=Array(4),w={},M=[new t(1,0,0),new t(-1,0,0),new t(0,0,1),new t(0,0,-1),new t(0,1,0),new t(0,-1,0)],F=[new t(0,1,0),new t(0,1,0),new t(0,1,0),new t(0,1,0),new t(0,0,1),new t(0,0,-1)],d=[new f,new f,new f,new f,new f,new f];(s=new te).depthPacking=3201,s.clipping=!0,i=Z.distanceRGBA;for(O=A.clone(i.uniforms),l=0;4!==l;++l){var p=0!=(1&l),k=0!=(2&l),v=s.clone();v.morphTargets=p,v.skinning=k,j[l]=v,p=new E({defines:{USE_SHADOWMAP:""},uniforms:O,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,morphTargets:p,skinning:k,clipping:!0}),_[l]=p}c=this,this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.renderSingleSided=this.renderReverseSided=!0,this.render=function(t,n){if(!1!==c.enabled&&(!1!==c.autoUpdate||!1!==c.needsUpdate)&&0!==b.length){u.buffers.color.setClear(1,1,1,1),u.disable(z.BLEND),u.setDepthTest(!0),u.setScissorTest(!1);for(E=0,L=b.length;E<L;E++)if(f=b[E],i=f.shadow,void 0===i)console.warn("THREE.WebGLShadowMap:",f,"has no shadow.");else{r=i.camera,a.copy(i.mapSize),a.min(T),f&&f.isPointLight?(w=6,j=!0,s=a.x,l=a.y,d[0].set(2*s,l,s,l),d[1].set(0,l,s,l),d[2].set(3*s,l,s,l),d[3].set(s,l,s,l),d[4].set(3*s,0,s,l),d[5].set(s,0,s,l),a.x*=4,a.y*=2):(w=1,j=!1);for(null===i.map&&(i.map=new oe(a.x,a.y,{minFilter:1003,magFilter:1003,format:1023}),r.updateProjectionMatrix()),i.isSpotLightShadow&&i.update(f),i&&i.isRectAreaLightShadow&&i.update(f),s=i.map,i=i.matrix,g.setFromMatrixPosition(f.matrixWorld),r.position.copy(g),e.setRenderTarget(s),e.clear(),s=0;s<w;s++){j?(h.copy(r.position),h.add(M[s]),r.up.copy(F[s]),r.lookAt(h),u.viewport(d[s])):(h.setFromMatrixPosition(f.target.matrixWorld),r.lookAt(h)),r.updateMatrixWorld(),r.matrixWorldInverse.getInverse(r.matrixWorld),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(r.projectionMatrix),i.multiply(r.matrixWorldInverse),x.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),C.setFromMatrix(x),m.length=0,S(t,n,r),l=0;for(D=m.length;l<D;l++)if(p=m[l],O=o.update(p),(_=p.material)&&_.isMultiMaterial)for(var s,i,r,l,f,p,v,j,w,O,E,A,D,L,N=O.groups,_=_.materials,k=0,R=N.length;k<R;k++)A=N[k],v=_[A.materialIndex],!0===v.visible&&(v=y(p,v,j,g),e.renderBufferDirect(r,null,O,v,p,A));else v=y(p,_,j,g),e.renderBufferDirect(r,null,O,v,p,null)}}w=e.getClearColor(),j=e.getClearAlpha(),e.setClearColor(w,j),c.needsUpdate=!1}}}function ie(e,n){this.origin=void 0!==e?e:new t,this.direction=void 0!==n?n:new t}function ne(e,t,n,s){this._x=e||0,this._y=t||0,this._z=n||0,this._order=s||ne.DefaultOrder}function pn(){this.mask=1}function s(){Object.defineProperty(this,"id",{value:Js++}),this.uuid=l.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=s.DefaultUp.clone();var o=new t,e=new ne,n=new y,i=new t(1,1,1);e.onChange(function(){n.setFromEuler(e,!1)}),n.onChange(function(){e.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:o},rotation:{enumerable:!0,value:e},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:i},modelViewMatrix:{value:new r},normalMatrix:{value:new B}}),this.matrix=new r,this.matrixWorld=new r,this.matrixAutoUpdate=s.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new pn,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}function ce(e,n){this.start=void 0!==e?e:new t,this.end=void 0!==n?n:new t}function R(e,n,s){this.a=void 0!==e?e:new t,this.b=void 0!==n?n:new t,this.c=void 0!==s?s:new t}function N(e,n,s,o,i,r){this.a=e,this.b=n,this.c=s,this.normal=o&&o.isVector3?o:new t,this.vertexNormals=Array.isArray(o)?o:[],this.color=i&&i.isColor?i:new a,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==r?r:0}function M(e){h.call(this),this.type="MeshBasicMaterial",this.color=new a(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.lights=this.morphTargets=this.skinning=!1,this.setValues(e)}function u(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=l.generateUUID(),this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function jt(e,t){u.call(this,new Int8Array(e),t)}function on(e,t){u.call(this,new Uint8Array(e),t)}function Xt(e,t){u.call(this,new Uint8ClampedArray(e),t)}function Gt(e,t){u.call(this,new Int16Array(e),t)}function me(e,t){u.call(this,new Uint16Array(e),t)}function qt(e,t){u.call(this,new Int32Array(e),t)}function pe(e,t){u.call(this,new Uint32Array(e),t)}function o(e,t){u.call(this,new Float32Array(e),t)}function Bt(e,t){u.call(this,new Float64Array(e),t)}function Ks(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function Yn(e){for(var t=e.length,n=-1/0;t--;)e[t]>n&&(n=e[t]);return n}function c(){Object.defineProperty(this,"id",{value:Sn++}),this.uuid=l.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function i(){Object.defineProperty(this,"id",{value:Sn++}),this.uuid=l.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:1/0}}function _(e,t){s.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new i,this.material=void 0!==t?t:new M({color:16777215*Math.random()}),this.drawMode=0,this.updateMorphTargets()}function pt(e,t,n,s,o,i){c.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:s,heightSegments:o,depthSegments:i},this.fromBufferGeometry(new xe(e,t,n,s,o,i)),this.mergeVertices()}function xe(e,n,s,a,r,c){function l(e,n,s,o,i,a,r,c,l,v,b){var O,x=a/l,C=r/v,E=a/2,k=r/2,A=c/2;r=l+1;var j,y,S=v+1,w=a=0,_=new t;for(y=0;y<S;y++){O=y*C-k;for(j=0;j<r;j++)_[e]=(j*x-E)*o,_[n]=O*i,_[s]=A,f.push(_.x,_.y,_.z),_[e]=0,_[n]=0,_[s]=0<c?1:-1,p.push(_.x,_.y,_.z),h.push(j/l),h.push(1-y/v),a+=1}for(y=0;y<v;y++)for(j=0;j<l;j++)e=d+j+r*(y+1),n=d+(j+1)+r*(y+1),s=d+(j+1)+r*y,u.push(d+j+r*y,e,s),u.push(e,n,s),w+=6;m.addGroup(g,w,b),g+=w,d+=a}i.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:n,depth:s,widthSegments:a,heightSegments:r,depthSegments:c},m=this,a=Math.floor(a)||1,r=Math.floor(r)||1,c=Math.floor(c)||1;var m,u=[],f=[],p=[],h=[],d=0,g=0;l("z","y","x",-1,-1,s,n,e,c,r,0),l("z","y","x",1,-1,s,n,-e,c,r,1),l("x","z","y",1,1,e,s,n,a,c,2),l("x","z","y",1,-1,e,s,-n,a,c,3),l("x","y","z",1,-1,e,n,s,a,r,4),l("x","y","z",-1,-1,e,n,-s,a,r,5),this.setIndex(u),this.addAttribute("position",new o(f,3)),this.addAttribute("normal",new o(p,3)),this.addAttribute("uv",new o(h,2))}function St(e,t,n,s){c.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:s},this.fromBufferGeometry(new Ee(e,t,n,s))}function Ee(e,t,n,s){i.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:s};var f,r=e/2,l=t/2,a=(n=Math.floor(n)||1)+1,c=(s=Math.floor(s)||1)+1,p=e/n,g=t/s,d=[],h=[],m=[],u=[];for(e=0;e<c;e++){f=e*g-l;for(t=0;t<a;t++)h.push(t*p-r,-f,0),m.push(0,0,1),u.push(t/n),u.push(1-e/s)}for(e=0;e<s;e++)for(t=0;t<n;t++)r=t+a*(e+1),l=t+1+a*(e+1),c=t+1+a*e,d.push(t+a*e,r,c),d.push(r,l,c);this.setIndex(d),this.addAttribute("position",new o(h,3)),this.addAttribute("normal",new o(m,3)),this.addAttribute("uv",new o(u,2))}function C(){s.call(this),this.type="Camera",this.matrixWorldInverse=new r,this.projectionMatrix=new r}function x(e,t,n,s){C.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==s?s:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function ut(e,t,n,s,o,i){C.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=s,this.near=void 0!==o?o:.1,this.far=void 0!==i?i:2e3,this.updateProjectionMatrix()}function Bo(e,t,n){var s,o,i;return{setMode:function(e){s=e},setIndex:function(n){n.array instanceof Uint32Array&&t.get("OES_element_index_uint")?(o=e.UNSIGNED_INT,i=4):n.array instanceof Uint16Array?(o=e.UNSIGNED_SHORT,i=2):(o=e.UNSIGNED_BYTE,i=1)},render:function(t,a){e.drawElements(s,a,o,t*i),n.calls++,n.vertices+=a,s===e.TRIANGLES&&(n.faces+=a/3)},renderInstances:function(a,r,c){var l=t.get("ANGLE_instanced_arrays");null===l?console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(l.drawElementsInstancedANGLE(s,c,o,r*i,a.maxInstancedCount),n.calls++,n.vertices+=c*a.maxInstancedCount,s===e.TRIANGLES&&(n.faces+=a.maxInstancedCount*c/3))}}}function Io(e,t,n){var s;return{setMode:function(e){s=e},render:function(t,o){e.drawArrays(s,t,o),n.calls++,n.vertices+=o,s===e.TRIANGLES&&(n.faces+=o/3)},renderInstances:function(o){var i,a=t.get("ANGLE_instanced_arrays");null===a?console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(i=(i=o.attributes.position).isInterleavedBufferAttribute?i.data.count:i.count,a.drawArraysInstancedANGLE(s,0,i,o.maxInstancedCount),n.calls++,n.vertices+=i*o.maxInstancedCount,s===e.TRIANGLES&&(n.faces+=o.maxInstancedCount*i/3))}}}function Ho(){var e={};return{get:function(s){if(void 0!==e[s.id])return e[s.id];var o;switch(s.type){case"DirectionalLight":o={direction:new t,color:new a,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"SpotLight":o={position:new t,direction:new t,color:new a,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"PointLight":o={position:new t,color:new a,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"HemisphereLight":o={direction:new t,skyColor:new a,groundColor:new a};break;case"RectAreaLight":o={color:new a,position:new t,halfWidth:new t,halfHeight:new t}}return e[s.id]=o}}}function Ws(e,t,n){var s=e.createShader(t);return e.shaderSource(s,n),e.compileShader(s),!1===e.getShaderParameter(s,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(s)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(s),function(e){e=e.split(`
`);for(var t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join(`
`)}(n)),s}function Gs(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+e)}}function hs(e,t){var n=Gs(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Fo(e,t){var n=Gs(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function oo(e,t){var n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="Uncharted2";break;case 4:n="OptimizedCineon";break;default:throw Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Yt(e){return""!==e}function Bs(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function qn(e){return e.replace(/#include +<([\w\d.]+)>/g,function(e,t){var n=m[t];if(void 0===n)throw Error("Can not resolve #include <"+t+">");return qn(n)})}function Hs(e){return e.replace(/for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,n,s){for(e="",t=parseInt(t);t<parseInt(n);t++)e+=s.replace(/\[ i \]/g,"[ "+t+" ]");return e})}function io(e,t,n,s){var o=e.context,g=n.extensions,h=n.defines,r=n.__webglShader.vertexShader,a=n.__webglShader.fragmentShader,l="SHADOWMAP_TYPE_BASIC";1===s.shadowMapType?l="SHADOWMAP_TYPE_PCF":2===s.shadowMapType&&(l="SHADOWMAP_TYPE_PCF_SOFT");var c="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",u="ENVMAP_BLENDING_MULTIPLY";if(s.envMap){switch(n.envMap.mapping){case 301:case 302:c="ENVMAP_TYPE_CUBE";break;case 306:case 307:c="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:c="ENVMAP_TYPE_EQUIREC";break;case 305:c="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case 302:case 304:d="ENVMAP_MODE_REFRACTION"}switch(n.combine){case 0:u="ENVMAP_BLENDING_MULTIPLY";break;case 1:u="ENVMAP_BLENDING_MIX";break;case 2:u="ENVMAP_BLENDING_ADD"}}var v,b,f=0<e.gammaFactor?e.gammaFactor:1,p=(g=function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Yt).join(`
`)}(g,s,e.extensions),function(e){var t,n,s=[];for(t in e)n=e[t],!1!==n&&s.push("#define "+t+" "+n);return s.join(`
`)}(h)),i=o.createProgram();return n.isRawShaderMaterial?(h=[p,`
`].filter(Yt).join(`
`),l=[g,p,`
`].filter(Yt).join(`
`)):(h=["precision "+s.precision+" float;","precision "+s.precision+" int;","#define SHADER_NAME "+n.__webglShader.name,p,s.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+f,"#define MAX_BONES "+s.maxBones,s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+d:"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.displacementMap&&s.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.vertexColors?"#define USE_COLOR":"",s.flatShading?"#define FLAT_SHADED":"",s.skinning?"#define USE_SKINNING":"",s.useVertexTexture?"#define BONE_TEXTURE":"",s.morphTargets?"#define USE_MORPHTARGETS":"",s.morphNormals&&!1===s.flatShading?"#define USE_MORPHNORMALS":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+s.numClippingPlanes,s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+l:"",s.sizeAttenuation?"#define USE_SIZEATTENUATION":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",s.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Yt).join(`
`),l=[g,"precision "+s.precision+" float;","precision "+s.precision+" int;","#define SHADER_NAME "+n.__webglShader.name,p,s.alphaTest?"#define ALPHATEST "+s.alphaTest:"","#define GAMMA_FACTOR "+f,s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+c:"",s.envMap?"#define "+d:"",s.envMap?"#define "+u:"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.vertexColors?"#define USE_COLOR":"",s.gradientMap?"#define USE_GRADIENTMAP":"",s.flatShading?"#define FLAT_SHADED":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+s.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(s.numClippingPlanes-s.numClipIntersection),s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+l:"",s.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",s.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",s.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",s.envMap&&e.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==s.toneMapping?"#define TONE_MAPPING":"",0!==s.toneMapping?m.tonemapping_pars_fragment:"",0!==s.toneMapping?oo("toneMapping",s.toneMapping):"",s.outputEncoding||s.mapEncoding||s.envMapEncoding||s.emissiveMapEncoding?m.encodings_pars_fragment:"",s.mapEncoding?hs("mapTexelToLinear",s.mapEncoding):"",s.envMapEncoding?hs("envMapTexelToLinear",s.envMapEncoding):"",s.emissiveMapEncoding?hs("emissiveMapTexelToLinear",s.emissiveMapEncoding):"",s.outputEncoding?Fo("linearToOutputTexel",s.outputEncoding):"",s.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Yt).join(`
`)),r=Bs(r=qn(r),s),a=Bs(a=qn(a),s),n.isShaderMaterial||(r=Hs(r),a=Hs(a)),a=l+a,r=Ws(o,o.VERTEX_SHADER,h+r),a=Ws(o,o.FRAGMENT_SHADER,a),o.attachShader(i,r),o.attachShader(i,a),void 0!==n.index0AttributeName?o.bindAttribLocation(i,0,n.index0AttributeName):!0===s.morphTargets&&o.bindAttribLocation(i,0,"position"),o.linkProgram(i),s=o.getProgramInfoLog(i),c=o.getShaderInfoLog(r),d=o.getShaderInfoLog(a),f=u=!0,!1===o.getProgramParameter(i,o.LINK_STATUS)?(u=!1,console.error("THREE.WebGLProgram: shader error: ",o.getError(),"gl.VALIDATE_STATUS",o.getProgramParameter(i,o.VALIDATE_STATUS),"gl.getProgramInfoLog",s,c,d)):""!==s?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",s):""!==c&&""!==d||(f=!1),f&&(this.diagnostics={runnable:u,material:n,programLog:s,vertexShader:{log:c,prefix:h},fragmentShader:{log:d,prefix:l}}),o.deleteShader(r),o.deleteShader(a),this.getUniforms=function(){return void 0===v&&(v=new ae(o,i,e)),v},this.getAttributes=function(){if(void 0===b){for(var t,n={},s=o.getProgramParameter(i,o.ACTIVE_ATTRIBUTES),e=0;e<s;e++)t=o.getActiveAttrib(i,e).name,n[t]=o.getAttribLocation(i,t);b=n}return b},this.destroy=function(){o.deleteProgram(i),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=qs++,this.code=t,this.usedTimes=1,this.program=i,this.vertexShader=r,this.fragmentShader=a,this}function ao(e,t){function s(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=3e3,3e3===n&&t&&(n=3007),n}var n=[],i={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},o="precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking".split(" ");this.getParameters=function(n,o,a,r,c,l){var d,u,h,m=i[n.type];return t.floatVertexTextures&&l&&l.skeleton&&l.skeleton.useVertexTexture?d=1024:(d=Math.floor((t.maxVertexUniforms-20)/4),void 0!==l&&l&&l.isSkinnedMesh&&(d=Math.min(l.skeleton.bones.length,d))<l.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+l.skeleton.bones.length+", this GPU supports just "+d+" (try OpenGL instead of ANGLE)")),u=e.getPrecision(),null!==n.precision&&(u=t.getMaxPrecision(n.precision))!==n.precision&&console.warn("THREE.WebGLProgram.getParameters:",n.precision,"not supported, using",u,"instead."),h=e.getCurrentRenderTarget(),{shaderID:m,precision:u,supportsVertexTextures:t.vertexTextures,outputEncoding:s(h?h.texture:null,e.gammaOutput),map:!!n.map,mapEncoding:s(n.map,e.gammaInput),envMap:!!n.envMap,envMapMode:n.envMap&&n.envMap.mapping,envMapEncoding:s(n.envMap,e.gammaInput),envMapCubeUV:!!n.envMap&&(306===n.envMap.mapping||307===n.envMap.mapping),lightMap:!!n.lightMap,aoMap:!!n.aoMap,emissiveMap:!!n.emissiveMap,emissiveMapEncoding:s(n.emissiveMap,e.gammaInput),bumpMap:!!n.bumpMap,normalMap:!!n.normalMap,displacementMap:!!n.displacementMap,roughnessMap:!!n.roughnessMap,metalnessMap:!!n.metalnessMap,specularMap:!!n.specularMap,alphaMap:!!n.alphaMap,gradientMap:!!n.gradientMap,combine:n.combine,vertexColors:n.vertexColors,fog:!!a,useFog:n.fog,fogExp:a&&a.isFogExp2,flatShading:1===n.shading,sizeAttenuation:n.sizeAttenuation,logarithmicDepthBuffer:t.logarithmicDepthBuffer,skinning:n.skinning,maxBones:d,useVertexTexture:t.floatVertexTextures&&l&&l.skeleton&&l.skeleton.useVertexTexture,morphTargets:n.morphTargets,morphNormals:n.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numClippingPlanes:r,numClipIntersection:c,shadowMapEnabled:e.shadowMap.enabled&&l.receiveShadow&&0<o.shadows.length,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:n.premultipliedAlpha,alphaTest:n.alphaTest,doubleSided:2===n.side,flipSided:1===n.side,depthPacking:void 0!==n.depthPacking&&n.depthPacking}},this.getProgramCode=function(e,t){var s,n=[];if(t.shaderID?n.push(t.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(s in e.defines)n.push(s),n.push(e.defines[s]);for(s=0;s<o.length;s++)n.push(t[o[s]]);return n.join()},this.acquireProgram=function(t,s,o){for(var i,r,a=0,c=n.length;a<c;a++)if(r=n[a],r.code===o){++(i=r).usedTimes;break}return void 0===i&&(i=new io(e,o,t,s),n.push(i)),i},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=n.indexOf(e);n[t]=n[n.length-1],n.pop(),e.destroy()}},this.programs=n}function co(e,t,n){function a(e){var r,c,i=e.target;null!==(e=s[i.id]).index&&o(e.index),c=e.attributes;for(r in c)o(c[r]);i.removeEventListener("dispose",a),delete s[i.id],(r=t.get(i)).wireframe&&o(r.wireframe),t.delete(i),(i=t.get(e)).wireframe&&o(i.wireframe),t.delete(e),n.memory.geometries--}function o(n){var s;void 0!==(s=n.isInterleavedBufferAttribute?t.get(n.data).__webglBuffer:t.get(n).__webglBuffer)&&(e.deleteBuffer(s),n.isInterleavedBufferAttribute?t.delete(n.data):t.delete(n))}var s={};return{get:function(e){var o,t=e.geometry;return void 0!==s[t.id]?s[t.id]:(t.addEventListener("dispose",a),t.isBufferGeometry?o=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new i).setFromObject(e)),o=t._bufferGeometry),s[t.id]=o,n.memory.geometries++,o)}}}function uo(e,t,n){function s(n,s){var i,r,o=n.isInterleavedBufferAttribute?n.data:n,a=t.get(o);void 0===a.__webglBuffer?(a.__webglBuffer=e.createBuffer(),e.bindBuffer(s,a.__webglBuffer),e.bufferData(s,o.array,o.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW),r=e.FLOAT,i=o.array,i instanceof Float32Array?r=e.FLOAT:i instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):i instanceof Uint16Array?r=e.UNSIGNED_SHORT:i instanceof Int16Array?r=e.SHORT:i instanceof Uint32Array?r=e.UNSIGNED_INT:i instanceof Int32Array?r=e.INT:i instanceof Int8Array?r=e.BYTE:i instanceof Uint8Array&&(r=e.UNSIGNED_BYTE),a.bytesPerElement=i.BYTES_PER_ELEMENT,a.type=r,a.version=o.version,o.onUploadCallback()):a.version!==o.version&&(e.bindBuffer(s,a.__webglBuffer),!1===o.dynamic?e.bufferData(s,o.array,e.STATIC_DRAW):-1===o.updateRange.count?e.bufferSubData(s,0,o.array):0===o.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(s,o.updateRange.offset*o.array.BYTES_PER_ELEMENT,o.array.subarray(o.updateRange.offset,o.updateRange.offset+o.updateRange.count)),o.updateRange.count=0),a.version=o.version)}var o=new co(e,t,n);return{getAttributeBuffer:function(e){return e.isInterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer},getAttributeProperties:function(e){return e.isInterleavedBufferAttribute?t.get(e.data):t.get(e)},getWireframeAttribute:function(n){if(l=t.get(n),void 0!==l.wireframe)return l.wireframe;if(i=[],o=n.index,n=n.attributes,null!==o){n=0;for(d=(o=o.array).length;n<d;n+=3){var o,i,l,d,a=o[n+0],r=o[n+1],c=o[n+2];i.push(a,r,r,c,c,a)}}else for(o=n.position.array,n=0,d=o.length/3-1;n<d;n+=3)a=n+0,r=n+1,c=n+2,i.push(a,r,r,c,c,a);return s(i=new(65535<Yn(i)?pe:me)(i,1),e.ELEMENT_ARRAY_BUFFER),l.wireframe=i},update:function(t){n=o.get(t),t.geometry.isGeometry&&n.updateFromObject(t),t=n.index,i=n.attributes;for(a in null!==t&&s(t,e.ELEMENT_ARRAY_BUFFER),i)s(i[a],e.ARRAY_BUFFER);for(a in t=n.morphAttributes)for(var n,i,a,r=0,c=(i=t[a]).length;r<c;r++)s(i[r],e.ARRAY_BUFFER);return n}}}function ho(e,t,n,s,o,i,a){function h(e,t){if(e.width>t||e.height>t){var s=t/Math.max(e.width,e.height),n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return n.width=Math.floor(e.width*s),n.height=Math.floor(e.height*s),n.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,n.width,n.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+n.width+"x"+n.height,e),n}return e}function r(e){return l.isPowerOfTwo(e.width)&&l.isPowerOfTwo(e.height)}function m(t){return 1003===t||1004===t||1005===t?e.NEAREST:e.LINEAR}function u(t){(t=t.target).removeEventListener("dispose",u);t:{var n=s.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)break t;e.deleteTexture(n.__webglTexture)}s.delete(t)}c.textures--}function f(t){(t=t.target).removeEventListener("dispose",f);var o=s.get(t),n=s.get(t.texture);if(t){if(void 0!==n.__webglTexture&&e.deleteTexture(n.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(n=0;6>n;n++)e.deleteFramebuffer(o.__webglFramebuffer[n]),o.__webglDepthbuffer&&e.deleteRenderbuffer(o.__webglDepthbuffer[n]);else e.deleteFramebuffer(o.__webglFramebuffer),o.__webglDepthbuffer&&e.deleteRenderbuffer(o.__webglDepthbuffer);s.delete(t.texture),s.delete(t)}c.textures--}function p(t,a){if(j=s.get(t),0<t.version&&j.__version!==t.version)if(void 0===(g=t.image))console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(!1!==g.complete){void 0===j.__webglInit&&(j.__webglInit=!0,t.addEventListener("dispose",u),j.__webglTexture=e.createTexture(),c.textures++),n.activeTexture(e.TEXTURE0+a),n.bindTexture(e.TEXTURE_2D,j.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,t.unpackAlignment),m=h(t.image,o.maxTextureSize),(1001!==t.wrapS||1001!==t.wrapT||1003!==t.minFilter&&1006!==t.minFilter)&&!1===r(m)&&((g=m)instanceof HTMLImageElement||g instanceof HTMLCanvasElement?((f=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=l.nearestPowerOfTwo(g.width),f.height=l.nearestPowerOfTwo(g.height),f.getContext("2d").drawImage(g,0,0,f.width,f.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+g.width+"x"+g.height+"). Resized to "+f.width+"x"+f.height,g),m=f):m=g);var m,p,v,j,_,g=r(m),f=i(t.format),y=i(t.type);if(d(e.TEXTURE_2D,t,g),v=t.mipmaps,t.isDepthTexture){if(v=e.DEPTH_COMPONENT,1015===t.type){if(!b)throw Error("Float Depth Texture only supported in WebGL2.0");v=e.DEPTH_COMPONENT32F}else b&&(v=e.DEPTH_COMPONENT16);1026===t.format&&v===e.DEPTH_COMPONENT&&1012!==t.type&&1014!==t.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),t.type=1012,y=i(t.type)),1027===t.format&&(v=e.DEPTH_STENCIL,1020!==t.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),t.type=1020,y=i(t.type))),n.texImage2D(e.TEXTURE_2D,0,v,m.width,m.height,0,f,y,null)}else if(t.isDataTexture)if(0<v.length&&g){for(p=0,_=v.length;p<_;p++)m=v[p],n.texImage2D(e.TEXTURE_2D,p,f,m.width,m.height,0,f,y,m.data);t.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,f,m.width,m.height,0,f,y,m.data);else if(t.isCompressedTexture)for(p=0,_=v.length;p<_;p++)m=v[p],1023!==t.format&&1022!==t.format?-1<n.getCompressedTextureFormats().indexOf(f)?n.compressedTexImage2D(e.TEXTURE_2D,p,f,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,p,f,m.width,m.height,0,f,y,m.data);else if(0<v.length&&g){for(p=0,_=v.length;p<_;p++)m=v[p],n.texImage2D(e.TEXTURE_2D,p,f,f,y,m);t.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,f,f,y,m);return t.generateMipmaps&&g&&e.generateMipmap(e.TEXTURE_2D),j.__version=t.version,void(t.onUpdate&&t.onUpdate(t))}console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}n.activeTexture(e.TEXTURE0+a),n.bindTexture(e.TEXTURE_2D,j.__webglTexture)}function d(n,a,r){r?(e.texParameteri(n,e.TEXTURE_WRAP_S,i(a.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,i(a.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,i(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,i(a.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),1001===a.wrapS&&1001===a.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",a),e.texParameteri(n,e.TEXTURE_MAG_FILTER,m(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,m(a.minFilter)),1003!==a.minFilter&&1006!==a.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",a)),!(r=t.get("EXT_texture_filter_anisotropic"))||1015===a.type&&null===t.get("OES_texture_float_linear")||1016===a.type&&null===t.get("OES_texture_half_float_linear")||!(1<a.anisotropy||s.get(a).__currentAnisotropy)||(e.texParameterf(n,r.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,o.getMaxAnisotropy())),s.get(a).__currentAnisotropy=a.anisotropy)}function g(t,o,a,r){var c=i(o.texture.format),l=i(o.texture.type);n.texImage2D(r,0,c,o.width,o.height,0,c,l,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,a,r,s.get(o.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function v(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}var c=a.memory,b="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext;this.setTexture2D=p,this.setTextureCube=function(t,a){if(f=s.get(t),6===t.image.length)if(0<t.version&&f.__version!==t.version){f.__image__webglTextureCube||(t.addEventListener("dispose",u),f.__image__webglTextureCube=e.createTexture(),c.textures++),n.activeTexture(e.TEXTURE0+a),n.bindTexture(e.TEXTURE_CUBE_MAP,f.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var f,y=t&&t.isCompressedTexture,b=t.image[0]&&t.image[0].isDataTexture,p=[],l=0;6>l;l++)p[l]=y||b?b?t.image[l].image:t.image[l]:h(t.image[l],o.maxCubemapSize);var _=r(p[0]),m=i(t.format),j=i(t.type);for(d(e.TEXTURE_CUBE_MAP,t,_),l=0;6>l;l++)if(y)for(var g,w=p[l].mipmaps,v=0,O=w.length;v<O;v++)g=w[v],1023!==t.format&&1022!==t.format?-1<n.getCompressedTextureFormats().indexOf(m)?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+l,v,m,g.width,g.height,0,g.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+l,v,m,g.width,g.height,0,m,j,g.data);else b?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,m,p[l].width,p[l].height,0,m,j,p[l].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,m,m,j,p[l]);t.generateMipmaps&&_&&e.generateMipmap(e.TEXTURE_CUBE_MAP),f.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+a),n.bindTexture(e.TEXTURE_CUBE_MAP,f.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,o){n.activeTexture(e.TEXTURE0+o),n.bindTexture(e.TEXTURE_CUBE_MAP,s.get(t).__webglTexture)},this.setupRenderTarget=function(t){var a,l,u,o=s.get(t),i=s.get(t.texture);if(t.addEventListener("dispose",f),i.__webglTexture=e.createTexture(),c.textures++,u=!0===t.isWebGLRenderTargetCube,l=r(t),u){o.__webglFramebuffer=[];for(a=0;6>a;a++)o.__webglFramebuffer[a]=e.createFramebuffer()}else o.__webglFramebuffer=e.createFramebuffer();if(u){for(n.bindTexture(e.TEXTURE_CUBE_MAP,i.__webglTexture),d(e.TEXTURE_CUBE_MAP,t.texture,l),a=0;6>a;a++)g(o.__webglFramebuffer[a],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+a);t.texture.generateMipmaps&&l&&e.generateMipmap(e.TEXTURE_CUBE_MAP),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,i.__webglTexture),d(e.TEXTURE_2D,t.texture,l),g(o.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),t.texture.generateMipmaps&&l&&e.generateMipmap(e.TEXTURE_2D),n.bindTexture(e.TEXTURE_2D,null);if(t.depthBuffer){if(o=s.get(t),i=!0===t.isWebGLRenderTargetCube,t.depthTexture){if(i)throw Error("target.depthTexture not supported in Cube render targets");if(t&&t.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported!");if(e.bindFramebuffer(e.FRAMEBUFFER,o.__webglFramebuffer),!t.depthTexture||!t.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(s.get(t.depthTexture).__webglTexture&&t.depthTexture.image.width===t.width&&t.depthTexture.image.height===t.height||(t.depthTexture.image.width=t.width,t.depthTexture.image.height=t.height,t.depthTexture.needsUpdate=!0),p(t.depthTexture,0),o=s.get(t.depthTexture).__webglTexture,1026===t.depthTexture.format)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0);else{if(1027!==t.depthTexture.format)throw Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0)}}else if(i)for(o.__webglDepthbuffer=[],i=0;6>i;i++)e.bindFramebuffer(e.FRAMEBUFFER,o.__webglFramebuffer[i]),o.__webglDepthbuffer[i]=e.createRenderbuffer(),v(o.__webglDepthbuffer[i],t);else e.bindFramebuffer(e.FRAMEBUFFER,o.__webglFramebuffer),o.__webglDepthbuffer=e.createRenderbuffer(),v(o.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}},this.updateRenderTargetMipmap=function(t){var o=t.texture;o.generateMipmaps&&r(t)&&1003!==o.minFilter&&1006!==o.minFilter&&(t=t&&t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,o=s.get(o).__webglTexture,n.bindTexture(t,o),e.generateMipmap(t),n.bindTexture(t,null))}}function mo(){var e={};return{get:function(t){t=t.uuid;var n=e[t];return void 0===n&&(n={},e[t]=n),n},delete:function(t){delete e[t.uuid]},clear:function(){e={}}}}function fo(e,t,n){function N(t,n,s){var i=new Uint8Array(4),o=e.createTexture();for(e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST),t=0;t<s;t++)e.texImage2D(n+t,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return o}function s(t){!0!==u[t]&&(e.enable(t),u[t]=!0)}function i(t){!1!==u[t]&&(e.disable(t),u[t]=!1)}function A(t,o,a,r,c,l,d,u){0!==t?s(e.BLEND):i(e.BLEND),t===_&&u===z||(2===t?u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)):3===t?u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)):4===t?u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR)):u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)),_=t,z=u),5===t?(c=c||o,l=l||a,d=d||r,o===g&&c===C||(e.blendEquationSeparate(n(o),n(c)),g=o,C=c),a===O&&r===x&&l===E&&d===w||(e.blendFuncSeparate(n(a),n(r),n(l),n(d)),O=a,x=r,E=l,w=d)):w=E=C=x=O=g=null}function M(e){c.setFunc(e)}function P(t){v!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),v=t)}function D(t){0!==t?(s(e.CULL_FACE),t!==y&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):i(e.CULL_FACE),y=t}function S(t){void 0===t&&(t=e.TEXTURE0+B-1),r!==t&&(e.activeTexture(t),r=t)}var p=new function(){var t=!1,n=new f,s=null,o=new f;return{setMask:function(n){s===n||t||(e.colorMask(n,n,n,n),s=n)},setLocked:function(e){t=e},setClear:function(t,s,i,a,r){!0===r&&(t*=a,s*=a,i*=a),n.set(t,s,i,a),!1===o.equals(n)&&(e.clearColor(t,s,i,a),o.copy(n))},reset:function(){t=!1,s=null,o.set(0,0,0,1)}}},c=new function(){var t=!1,n=null,o=null,a=null;return{setTest:function(t){t?s(e.DEPTH_TEST):i(e.DEPTH_TEST)},setMask:function(s){n===s||t||(e.depthMask(s),n=s)},setFunc:function(t){if(o!==t){if(t)switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}else e.depthFunc(e.LEQUAL);o=t}},setLocked:function(e){t=e},setClear:function(t){a!==t&&(e.clearDepth(t),a=t)},reset:function(){t=!1,a=o=n=null}}},a=new function(){var t=!1,n=null,o=null,a=null,r=null,c=null,l=null,d=null,u=null;return{setTest:function(t){t?s(e.STENCIL_TEST):i(e.STENCIL_TEST)},setMask:function(s){n===s||t||(e.stencilMask(s),n=s)},setFunc:function(t,n,s){o===t&&a===n&&r===s||(e.stencilFunc(t,n,s),o=t,a=n,r=s)},setOp:function(t,n,s){c===t&&l===n&&d===s||(e.stencilOp(t,n,s),c=t,l=n,d=s)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,u=d=l=c=r=a=o=n=null}}},h=e.getParameter(e.MAX_VERTEX_ATTRIBS),l=new Uint8Array(h),o=new Uint8Array(h),m=new Uint8Array(h),u={},d=null,_=null,g=null,O=null,x=null,C=null,E=null,w=null,z=!1,v=null,y=null,F=null,T=null,k=null,R=null,B=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),I=(h=parseFloat(/^WebGL ([0-9])/.exec(e.getParameter(e.VERSION))[1]),1<=parseFloat(h)),r=null,j={},H=new f,L=new f,b={};return b[e.TEXTURE_2D]=N(e.TEXTURE_2D,e.TEXTURE_2D,1),b[e.TEXTURE_CUBE_MAP]=N(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:p,depth:c,stencil:a},init:function(){p.setClear(0,0,0,1),c.setClear(1),a.setClear(0),s(e.DEPTH_TEST),M(3),P(!1),D(1),s(e.CULL_FACE),s(e.BLEND),A(1)},initAttributes:function(){for(var e=0,t=l.length;e<t;e++)l[e]=0},enableAttribute:function(n){l[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),0!==m[n]&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,0),m[n]=0)},enableAttributeAndDivisor:function(t,n,s){l[t]=1,0===o[t]&&(e.enableVertexAttribArray(t),o[t]=1),m[t]!==n&&(s.vertexAttribDivisorANGLE(t,n),m[t]=n)},disableUnusedAttributes:function(){for(var t=0,n=o.length;t!==n;++t)o[t]!==l[t]&&(e.disableVertexAttribArray(t),o[t]=0)},enable:s,disable:i,getCompressedTextureFormats:function(){if(null===d&&(d=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")))for(var s=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),n=0;n<s.length;n++)d.push(s[n]);return d},setBlending:A,setColorWrite:function(e){p.setMask(e)},setDepthTest:function(e){c.setTest(e)},setDepthWrite:function(e){c.setMask(e)},setDepthFunc:M,setStencilTest:function(e){a.setTest(e)},setStencilWrite:function(e){a.setMask(e)},setStencilFunc:function(e,t,n){a.setFunc(e,t,n)},setStencilOp:function(e,t,n){a.setOp(e,t,n)},setFlipSided:P,setCullFace:D,setLineWidth:function(t){t!==F&&(I&&e.lineWidth(t),F=t)},setPolygonOffset:function(t,n,o){t?(s(e.POLYGON_OFFSET_FILL),(T!==n||k!==o)&&(e.polygonOffset(n,o),T=n,k=o)):i(e.POLYGON_OFFSET_FILL)},getScissorTest:function(){return R},setScissorTest:function(t){(R=t)?s(e.SCISSOR_TEST):i(e.SCISSOR_TEST)},activeTexture:S,bindTexture:function(t,n){null===r&&S();var s=j[r];void 0===s&&(s={type:void 0,texture:void 0},j[r]=s),s.type===t&&s.texture===n||(e.bindTexture(t,n||b[t]),s.type=t,s.texture=n)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error(e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error(e)}},scissor:function(t){!1===H.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),H.copy(t))},viewport:function(t){!1===L.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),L.copy(t))},reset:function(){for(var t=0;t<o.length;t++)1===o[t]&&(e.disableVertexAttribArray(t),o[t]=0);u={},r=d=null,j={},y=v=_=null,p.reset(),c.reset(),a.reset()}}}function to(e,t,n){function l(t){if("highp"===t){if(0<e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision&&0<e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision)return"highp";t="mediump"}return"mediump"===t&&0<e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision&&0<e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision?"mediump":"lowp"}s=void 0!==n.precision?n.precision:"highp",(o=l(s))!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead."),s=o),n=!0===n.logarithmicDepthBuffer&&!!t.get("EXT_frag_depth");var s,i,o=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),r=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),p=e.getParameter(e.MAX_TEXTURE_SIZE),d=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),f=e.getParameter(e.MAX_VERTEX_ATTRIBS),u=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),h=e.getParameter(e.MAX_VARYING_VECTORS),m=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),a=0<r,c=!!t.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==i)return i;var n=t.get("EXT_texture_filter_anisotropic");return i=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:l,precision:s,logarithmicDepthBuffer:n,maxTextures:o,maxVertexTextures:r,maxTextureSize:p,maxCubemapSize:d,maxAttributes:f,maxVertexUniforms:u,maxVaryings:h,maxFragmentUniforms:m,vertexTextures:a,floatFragmentTextures:c,floatVertexTextures:a&&c}}function To(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var s;switch(n){case"WEBGL_depth_texture":s=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":s=e.getExtension("WEBGL_compressed_texture_etc1");break;default:s=e.getExtension(n)}return null===s&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=s}}}function zo(){function c(){e.value!==o&&(e.value=o,e.needsUpdate=0<t),i.numPlanes=t,i.numIntersection=0}function s(t,n,s,o){var c=null!==t?t.length:0,a=null;if(0!==c){if(a=e.value,!0!==o||null===a)for(o=s+4*c,n=n.matrixWorldInverse,l.getNormalMatrix(n),(null===a||a.length<o)&&(a=new Float32Array(o)),o=0;o!==c;++o,s+=4)r.copy(t[o]).applyMatrix4(n,l),r.normal.toArray(a,s),a[s+3]=r.constant;e.value=a,e.needsUpdate=!0}return i.numPlanes=c,a}var i=this,o=null,t=0,a=!1,n=!1,r=new z,l=new B,e={value:null,needsUpdate:!1};this.uniform=e,this.numIntersection=this.numPlanes=0,this.init=function(e,n,i){var r=0!==e.length||n||0!==t||a;return a=n,o=s(e,i,0),t=e.length,r},this.beginShadows=function(){n=!0,s(null)},this.endShadows=function(){n=!1,c()},this.setState=function(i,r,l,d,u,h){if(!a||null===i||0===i.length||n&&!l)n?s(null):c();else{var f=4*(l=n?0:t),m=u.clippingState||null;for(e.value=m,m=s(i,d,f,h),i=0;i!==f;++i)m[i]=o[i];u.clippingState=m,this.numIntersection=r?this.numPlanes:0,this.numPlanes+=l}}}function ns(e){function _e(){s.init(),s.scissor(ee.copy(de).multiplyScalar(g)),s.viewport(R.copy(I).multiplyScalar(g)),s.buffers.color.setClear(u.r,u.g,u.b,C,N)}function Fe(){O=fe=null,B="",V=-1,s.reset()}function Te(e){e.preventDefault(),Fe(),_e(),h.clear()}function ye(e){(e=e.target).removeEventListener("dispose",ye),ze(e),h.delete(e)}function ze(e){var t=h.get(e).program;e.program=void 0,void 0!==t&&$.releaseProgram(t)}function Le(e,t){return Math.abs(t[0])-Math.abs(e[0])}function Re(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.material.program&&t.material.program&&e.material.program!==t.material.program?e.material.program.id-t.material.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Pe(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function ce(e,t,n,s,o){var i;n.transparent?(s=S,i=++Q):(s=T,i=++J),void 0!==(i=s[i])?(i.id=e.id,i.object=e,i.geometry=t,i.material=n,i.z=l.z,i.group=o):(i={id:e.id,object:e,geometry:t,material:n,z:l.z,group:o},s.push(i))}function Ae(e){if(!ge.intersectsSphere(e))return!1;if(t=m.numPlanes,0===t)return!0;var t,n,s=d.clippingPlanes,o=e.center;e=-e.radius,n=0;do if(s[n].distanceToPoint(o)<e)return!1;while(++n!==t)return!0}function ke(e,t){if(!1!==e.visible){if(0!=(e.layers.mask&t.layers.mask))if(e.isLight)U.push(e);else if(e.isSprite)(n=!1===e.frustumCulled)||(z.center.set(0,0,0),z.radius=.7071067811865476,z.applyMatrix4(e.matrixWorld),n=!0===Ae(z)),n&&pe.push(e);else if(e.isLensFlare)oe.push(e);else if(e.isImmediateRenderObject)!0===d.sortObjects&&(l.setFromMatrixPosition(e.matrixWorld),l.applyMatrix4(q)),ce(e,null,e.material,l.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),(n=!1===e.frustumCulled)||(null===(n=e.geometry).boundingSphere&&n.computeBoundingSphere(),z.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),n=!0===Ae(z)),n)&&!0===(s=e.material).visible)if(!0===d.sortObjects&&(l.setFromMatrixPosition(e.matrixWorld),l.applyMatrix4(q)),n=y.update(e),s.isMultiMaterial)for(var n,i,a,r=n.groups,c=s.materials,s=0,o=r.length;s<o;s++)i=r[s],a=c[i.materialIndex],!0===a.visible&&ce(e,n,a,l.z,i);else ce(e,n,s,l.z,null);for(s=0,o=(n=e.children).length;s<o;s++)ke(n[s],t)}}function ne(e,t,n,s){for(r=0,l=e.length;r<l;r++){var r,l,u,o=(i=e[r]).object,c=i.geometry,a=void 0===s?i.material:s,i=i.group;o.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,o.matrixWorld),o.normalMatrix.getNormalMatrix(o.modelViewMatrix),o.onBeforeRender(d,t,n,c,a,i),o.isImmediateRenderObject?(Oe(a),u=we(n,t.fog,a,o),B="",o.render(function(e){d.renderBufferImmediate(e,u,a)})):d.renderBufferDirect(n,t.fog,c,a,o,i),o.onAfterRender(d,t,n,c,a,i)}}function Oe(e){2===e.side?s.disable(n.CULL_FACE):s.enable(n.CULL_FACE),s.setFlipSided(1===e.side),!0===e.transparent?s.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):s.setBlending(0),s.setDepthFunc(e.depthFunc),s.setDepthTest(e.depthTest),s.setDepthWrite(e.depthWrite),s.setColorWrite(e.colorWrite),s.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function we(e,t,s,i){if(re=0,p=h.get(s),K&&(ue||e!==O)&&m.setState(s.clippingPlanes,s.clipIntersection,s.clipShadows,e,p,e===O&&s.id===V),!1===s.needsUpdate&&(void 0===p.program||s.fog&&p.fog!==t||s.lights&&p.lightsHash!==o.hash?s.needsUpdate=!0:void 0===p.numClippingPlanes||p.numClippingPlanes===m.numPlanes&&p.numIntersection===m.numIntersection||(s.needsUpdate=!0)),s.needsUpdate){t:{var c,p,j,u=h.get(s),r=$.getParameters(s,o,t,m.numPlanes,m.numIntersection,i),a=$.getProgramCode(s,r),f=u.program,b=!0;if(void 0===f)s.addEventListener("dispose",ye);else if(f.code!==a)ze(s);else{if(void 0!==r.shaderID)break t;b=!1}if(b&&(r.shaderID?(f=Z[r.shaderID],u.__webglShader={name:s.type,uniforms:A.clone(f.uniforms),vertexShader:f.vertexShader,fragmentShader:f.fragmentShader}):u.__webglShader={name:s.type,uniforms:s.uniforms,vertexShader:s.vertexShader,fragmentShader:s.fragmentShader},s.__webglShader=u.__webglShader,f=$.acquireProgram(s,r,a),u.program=f,s.program=f),r=f.getAttributes(),s.morphTargets)for(a=s.numSupportedMorphTargets=0;a<d.maxMorphTargets;a++)0<=r["morphTarget"+a]&&s.numSupportedMorphTargets++;if(s.morphNormals)for(a=s.numSupportedMorphNormals=0;a<d.maxMorphNormals;a++)0<=r["morphNormal"+a]&&s.numSupportedMorphNormals++;r=u.__webglShader.uniforms,(s.isShaderMaterial||s.isRawShaderMaterial)&&!0!==s.clipping||(u.numClippingPlanes=m.numPlanes,u.numIntersection=m.numIntersection,r.clippingPlanes=m.uniform),u.fog=t,u.lightsHash=o.hash,s.lights&&(r.ambientLightColor.value=o.ambient,r.directionalLights.value=o.directional,r.spotLights.value=o.spot,r.rectAreaLights.value=o.rectArea,r.pointLights.value=o.point,r.hemisphereLights.value=o.hemi,r.directionalShadowMap.value=o.directionalShadowMap,r.directionalShadowMatrix.value=o.directionalShadowMatrix,r.spotShadowMap.value=o.spotShadowMap,r.spotShadowMatrix.value=o.spotShadowMatrix,r.pointShadowMap.value=o.pointShadowMap,r.pointShadowMatrix.value=o.pointShadowMatrix),a=u.program.getUniforms(),r=ae.seqWithValue(a.seq,r),u.uniformsList=r}s.needsUpdate=!1}return j=!1,b=f=!1,r=(u=p.program).getUniforms(),a=p.__webglShader.uniforms,(u.id!==fe&&(n.useProgram(u.program),fe=u.id,b=f=j=!0),s.id!==V&&(V=s.id,f=!0),(j||e!==O)&&(r.set(n,e,"projectionMatrix"),v.logarithmicDepthBuffer&&r.setValue(n,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),e!==O&&(O=e,b=f=!0),(s.isShaderMaterial||s.isMeshPhongMaterial||s.isMeshStandardMaterial||s.envMap)&&void 0!==(j=r.map.cameraPosition)&&j.setValue(n,l.setFromMatrixPosition(e.matrixWorld)),(s.isMeshPhongMaterial||s.isMeshLambertMaterial||s.isMeshBasicMaterial||s.isMeshStandardMaterial||s.isShaderMaterial||s.skinning)&&r.setValue(n,"viewMatrix",e.matrixWorldInverse),r.set(n,d,"toneMappingExposure"),r.set(n,d,"toneMappingWhitePoint")),s.skinning&&(r.setOptional(n,i,"bindMatrix"),r.setOptional(n,i,"bindMatrixInverse"),e=i.skeleton)&&(v.floatVertexTextures&&e.useVertexTexture?(r.set(n,e,"boneTexture"),r.set(n,e,"boneTextureWidth"),r.set(n,e,"boneTextureHeight")):r.setOptional(n,e,"boneMatrices")),f)&&((s.lights&&(e=b,a.ambientLightColor.needsUpdate=e,a.directionalLights.needsUpdate=e,a.pointLights.needsUpdate=e,a.spotLights.needsUpdate=e,a.rectAreaLights.needsUpdate=e,a.hemisphereLights.needsUpdate=e),t&&s.fog&&(a.fogColor.value=t.color,t.isFog?(a.fogNear.value=t.near,a.fogFar.value=t.far):t.isFogExp2&&(a.fogDensity.value=t.density)),s.isMeshBasicMaterial||s.isMeshLambertMaterial||s.isMeshPhongMaterial||s.isMeshStandardMaterial||s.isMeshNormalMaterial||s.isMeshDepthMaterial)&&(a.opacity.value=s.opacity,a.diffuse.value=s.color,s.emissive&&a.emissive.value.copy(s.emissive).multiplyScalar(s.emissiveIntensity),a.map.value=s.map,a.specularMap.value=s.specularMap,a.alphaMap.value=s.alphaMap,s.lightMap&&(a.lightMap.value=s.lightMap,a.lightMapIntensity.value=s.lightMapIntensity),s.aoMap&&(a.aoMap.value=s.aoMap,a.aoMapIntensity.value=s.aoMapIntensity),s.map?c=s.map:s.specularMap?c=s.specularMap:s.displacementMap?c=s.displacementMap:s.normalMap?c=s.normalMap:s.bumpMap?c=s.bumpMap:s.roughnessMap?c=s.roughnessMap:s.metalnessMap?c=s.metalnessMap:s.alphaMap?c=s.alphaMap:s.emissiveMap&&(c=s.emissiveMap),void 0!==c&&(c.isWebGLRenderTarget&&(c=c.texture),t=c.offset,c=c.repeat,a.offsetRepeat.value.set(t.x,t.y,c.x,c.y)),a.envMap.value=s.envMap,a.flipEnvMap.value=s.envMap&&s.envMap.isCubeTexture?-1:1,a.reflectivity.value=s.reflectivity,a.refractionRatio.value=s.refractionRatio),s.isLineBasicMaterial?(a.diffuse.value=s.color,a.opacity.value=s.opacity):s.isLineDashedMaterial?(a.diffuse.value=s.color,a.opacity.value=s.opacity,a.dashSize.value=s.dashSize,a.totalSize.value=s.dashSize+s.gapSize,a.scale.value=s.scale):s.isPointsMaterial?(a.diffuse.value=s.color,a.opacity.value=s.opacity,a.size.value=s.size*g,a.scale.value=.5*P,a.map.value=s.map,null!==s.map&&(c=s.map.offset,s=s.map.repeat,a.offsetRepeat.value.set(c.x,c.y,s.x,s.y))):s.isMeshLambertMaterial?s.emissiveMap&&(a.emissiveMap.value=s.emissiveMap):s.isMeshToonMaterial?(je(a,s),s.gradientMap&&(a.gradientMap.value=s.gradientMap)):s.isMeshPhongMaterial?je(a,s):s.isMeshPhysicalMaterial?(a.clearCoat.value=s.clearCoat,a.clearCoatRoughness.value=s.clearCoatRoughness,ve(a,s)):s.isMeshStandardMaterial?ve(a,s):s.isMeshDepthMaterial?s.displacementMap&&(a.displacementMap.value=s.displacementMap,a.displacementScale.value=s.displacementScale,a.displacementBias.value=s.displacementBias):s.isMeshNormalMaterial&&(s.bumpMap&&(a.bumpMap.value=s.bumpMap,a.bumpScale.value=s.bumpScale),s.normalMap&&(a.normalMap.value=s.normalMap,a.normalScale.value.copy(s.normalScale)),s.displacementMap&&(a.displacementMap.value=s.displacementMap,a.displacementScale.value=s.displacementScale,a.displacementBias.value=s.displacementBias)),void 0!==a.ltcMat&&(a.ltcMat.value=THREE.UniformsLib.LTC_MAT_TEXTURE),void 0!==a.ltcMag&&(a.ltcMag.value=THREE.UniformsLib.LTC_MAG_TEXTURE),ae.upload(n,p.uniformsList,a,d)),r.set(n,i,"modelViewMatrix"),r.set(n,i,"normalMatrix"),r.setValue(n,"modelMatrix",i.matrixWorld),u}function je(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function ve(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function F(e){var t;if(1e3===e)return n.REPEAT;if(1001===e)return n.CLAMP_TO_EDGE;if(1002===e)return n.MIRRORED_REPEAT;if(1003===e)return n.NEAREST;if(1004===e)return n.NEAREST_MIPMAP_NEAREST;if(1005===e)return n.NEAREST_MIPMAP_LINEAR;if(1006===e)return n.LINEAR;if(1007===e)return n.LINEAR_MIPMAP_NEAREST;if(1008===e)return n.LINEAR_MIPMAP_LINEAR;if(1009===e)return n.UNSIGNED_BYTE;if(1017===e)return n.UNSIGNED_SHORT_4_4_4_4;if(1018===e)return n.UNSIGNED_SHORT_5_5_5_1;if(1019===e)return n.UNSIGNED_SHORT_5_6_5;if(1010===e)return n.BYTE;if(1011===e)return n.SHORT;if(1012===e)return n.UNSIGNED_SHORT;if(1013===e)return n.INT;if(1014===e)return n.UNSIGNED_INT;if(1015===e)return n.FLOAT;if(1016===e&&null!==(t=c.get("OES_texture_half_float")))return t.HALF_FLOAT_OES;if(1021===e)return n.ALPHA;if(1022===e)return n.RGB;if(1023===e)return n.RGBA;if(1024===e)return n.LUMINANCE;if(1025===e)return n.LUMINANCE_ALPHA;if(1026===e)return n.DEPTH_COMPONENT;if(1027===e)return n.DEPTH_STENCIL;if(100===e)return n.FUNC_ADD;if(101===e)return n.FUNC_SUBTRACT;if(102===e)return n.FUNC_REVERSE_SUBTRACT;if(200===e)return n.ZERO;if(201===e)return n.ONE;if(202===e)return n.SRC_COLOR;if(203===e)return n.ONE_MINUS_SRC_COLOR;if(204===e)return n.SRC_ALPHA;if(205===e)return n.ONE_MINUS_SRC_ALPHA;if(206===e)return n.DST_ALPHA;if(207===e)return n.ONE_MINUS_DST_ALPHA;if(208===e)return n.DST_COLOR;if(209===e)return n.ONE_MINUS_DST_COLOR;if(210===e)return n.SRC_ALPHA_SATURATE;if((2001===e||2002===e||2003===e||2004===e)&&null!==(t=c.get("WEBGL_compressed_texture_s3tc"))){if(2001===e)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(2002===e)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(2003===e)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(2004===e)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((2100===e||2101===e||2102===e||2103===e)&&null!==(t=c.get("WEBGL_compressed_texture_pvrtc"))){if(2100===e)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(2101===e)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(2102===e)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(2103===e)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(2151===e&&null!==(t=c.get("WEBGL_compressed_texture_etc1")))return t.COMPRESSED_RGB_ETC1_WEBGL;if((103===e||104===e)&&null!==(t=c.get("EXT_blend_minmax"))){if(103===e)return t.MIN_EXT;if(104===e)return t.MAX_EXT}return 1020===e&&null!==(t=c.get("WEBGL_depth_texture"))?t.UNSIGNED_INT_24_8_WEBGL:0}console.log("THREE.WebGLRenderer","84");var p=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),He=void 0!==e.context?e.context:null,te=void 0!==e.alpha&&e.alpha,Ie=void 0===e.depth||e.depth,Be=void 0===e.stencil||e.stencil,Ve=void 0!==e.antialias&&e.antialias,N=void 0===e.premultipliedAlpha||e.premultipliedAlpha,Ne=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,U=[],T=[],J=-1,S=[],Q=-1,X=new Float32Array(8),pe=[],oe=[];this.domElement=p,this.context=null,this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1,this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var n,c,b,j,k,d=this,fe=null,Y=null,G=null,V=-1,B="",O=null,ee=new f,he=null,R=new f,re=0,u=new a(0),C=0,se=p.width,P=p.height,g=1,de=new f(0,0,se,P),Ce=!1,I=new f(0,0,se,P),ge=new ln,m=new zo,K=!1,ue=!1,z=new D,q=new r,l=new t,me=new r,W=new r,o={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},w={calls:0,vertices:0,faces:0,points:0},ie,Me,be,le,Se,De;this.info={render:w,memory:{geometries:0,textures:0},programs:null};try{if(te={alpha:te,depth:Ie,stencil:Be,antialias:Ve,premultipliedAlpha:N,preserveDrawingBuffer:Ne},null===(n=He||p.getContext("webgl",te)||p.getContext("experimental-webgl",te)))throw null!==p.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===n.getShaderPrecisionFormat&&(n.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),p.addEventListener("webglcontextlost",Te,!1)}catch(e){console.error("THREE.WebGLRenderer: "+e)}c=new To(n),c.get("WEBGL_depth_texture"),c.get("OES_texture_float"),c.get("OES_texture_float_linear"),c.get("OES_texture_half_float"),c.get("OES_texture_half_float_linear"),c.get("OES_standard_derivatives"),c.get("ANGLE_instanced_arrays"),c.get("OES_element_index_uint")&&(i.MaxIndex=4294967296);var v=new to(n,c,e),s=new fo(n,c,F),h=new mo,L=new ho(n,c,s,h,v,F,this.info),y=new uo(n,h,this.info),$=new ao(this,v),H=new Ho;this.info.programs=$.programs,Me=new Io(n,c,w),be=new Bo(n,c,w),_e(),this.context=n,this.capabilities=v,this.extensions=c,this.properties=h,this.state=s,le=new Vs(this,o,y,v),this.shadowMap=le,Se=new Po(this,pe),De=new Ro(this,oe),this.getContext=function(){return n},this.getContextAttributes=function(){return n.getContextAttributes()},this.forceContextLoss=function(){c.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return v.getMaxAnisotropy()},this.getPrecision=function(){return v.precision},this.getPixelRatio=function(){return g},this.setPixelRatio=function(e){void 0!==e&&(g=e,this.setSize(I.z,I.w,!1))},this.getSize=function(){return{width:se,height:P}},this.setSize=function(e,t,n){se=e,P=t,p.width=e*g,p.height=t*g,!1!==n&&(p.style.width=e+"px",p.style.height=t+"px"),this.setViewport(0,0,e,t)},this.setViewport=function(e,t,n,o){s.viewport(I.set(e,t,n,o))},this.setScissor=function(e,t,n,o){s.scissor(de.set(e,t,n,o))},this.setScissorTest=function(e){s.setScissorTest(Ce=e)},this.getClearColor=function(){return u},this.setClearColor=function(e,t){u.set(e),C=void 0!==t?t:1,s.buffers.color.setClear(u.r,u.g,u.b,C,N)},this.getClearAlpha=function(){return C},this.setClearAlpha=function(e){C=e,s.buffers.color.setClear(u.r,u.g,u.b,C,N)},this.clear=function(e,t,s){var o=0;(void 0===e||e)&&(o|=n.COLOR_BUFFER_BIT),(void 0===t||t)&&(o|=n.DEPTH_BUFFER_BIT),(void 0===s||s)&&(o|=n.STENCIL_BUFFER_BIT),n.clear(o)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,s){this.setRenderTarget(e),this.clear(t,n,s)},this.resetGLState=Fe,this.dispose=function(){S=[],Q=-1,T=[],J=-1,p.removeEventListener("webglcontextlost",Te,!1)},this.renderBufferImmediate=function(e,t,o){if(s.initAttributes(),r=h.get(e),e.hasPositions&&!r.position&&(r.position=n.createBuffer()),e.hasNormals&&!r.normal&&(r.normal=n.createBuffer()),e.hasUvs&&!r.uv&&(r.uv=n.createBuffer()),e.hasColors&&!r.color&&(r.color=n.createBuffer()),t=t.getAttributes(),e.hasPositions&&(n.bindBuffer(n.ARRAY_BUFFER,r.position),n.bufferData(n.ARRAY_BUFFER,e.positionArray,n.DYNAMIC_DRAW),s.enableAttribute(t.position),n.vertexAttribPointer(t.position,3,n.FLOAT,!1,0,0)),e.hasNormals){if(n.bindBuffer(n.ARRAY_BUFFER,r.normal),!o.isMeshPhongMaterial&&!o.isMeshStandardMaterial&&!o.isMeshNormalMaterial&&1===o.shading)for(i=0,u=3*e.count;i<u;i+=9){var i,r,u,a=e.normalArray,c=(a[i+0]+a[i+3]+a[i+6])/3,l=(a[i+1]+a[i+4]+a[i+7])/3,d=(a[i+2]+a[i+5]+a[i+8])/3;a[i+0]=c,a[i+1]=l,a[i+2]=d,a[i+3]=c,a[i+4]=l,a[i+5]=d,a[i+6]=c,a[i+7]=l,a[i+8]=d}n.bufferData(n.ARRAY_BUFFER,e.normalArray,n.DYNAMIC_DRAW),s.enableAttribute(t.normal),n.vertexAttribPointer(t.normal,3,n.FLOAT,!1,0,0)}e.hasUvs&&o.map&&(n.bindBuffer(n.ARRAY_BUFFER,r.uv),n.bufferData(n.ARRAY_BUFFER,e.uvArray,n.DYNAMIC_DRAW),s.enableAttribute(t.uv),n.vertexAttribPointer(t.uv,2,n.FLOAT,!1,0,0)),e.hasColors&&0!==o.vertexColors&&(n.bindBuffer(n.ARRAY_BUFFER,r.color),n.bufferData(n.ARRAY_BUFFER,e.colorArray,n.DYNAMIC_DRAW),s.enableAttribute(t.color),n.vertexAttribPointer(t.color,3,n.FLOAT,!1,0,0)),s.disableUnusedAttributes(),n.drawArrays(n.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,o,i,a,r){if(Oe(i),j=we(e,t,i,a),l=!1,(e=o.id+"_"+j.id+"_"+i.wireframe)!==B&&(B=e,l=!0),void 0!==(t=a.morphTargetInfluences)){d=[],e=0;for(m=t.length;e<m;e++)l=t[e],d.push([l,e]);d.sort(Le),8<d.length&&(d.length=8),v=o.morphAttributes;for(e=0,m=d.length;e<m;e++)l=d[e],X[e]=l[0],0!==l[0]?(t=l[1],!0===i.morphTargets&&v.position&&o.addAttribute("morphTarget"+e,v.position[t]),!0===i.morphNormals&&v.normal&&o.addAttribute("morphNormal"+e,v.normal[t])):(!0===i.morphTargets&&o.removeAttribute("morphTarget"+e),!0===i.morphNormals&&o.removeAttribute("morphNormal"+e));for(e=d.length,t=X.length;e<t;e++)X[e]=0;j.getUniforms().setValue(n,"morphTargetInfluences",X),l=!0}if(t=o.index,m=o.attributes.position,d=1,!0===i.wireframe&&(t=y.getWireframeAttribute(o),d=2),null!==t?(e=be).setIndex(t):e=Me,l){if(l=void 0,o&&o.isInstancedBufferGeometry&&null===(b=c.get("ANGLE_instanced_arrays")))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{void 0===l&&(l=0),s.initAttributes(),v=o.attributes,j=j.getAttributes(),O=i.defaultAttributeValues;for(p in j)if(u=j[p],0<=u)if(void 0!==(h=v[p])){var l,d,u,m,p,v,b,j,O,f=h.normalized,x=h.itemSize,C=(_=y.getAttributeProperties(h)).__webglBuffer,E=_.type,_=_.bytesPerElement;if(h.isInterleavedBufferAttribute){var w=h.data,k=w.stride,h=h.offset;w&&w.isInstancedInterleavedBuffer?(s.enableAttributeAndDivisor(u,w.meshPerAttribute,b),void 0===o.maxInstancedCount&&(o.maxInstancedCount=w.meshPerAttribute*w.count)):s.enableAttribute(u),n.bindBuffer(n.ARRAY_BUFFER,C),n.vertexAttribPointer(u,x,E,f,k*_,(l*k+h)*_)}else h.isInstancedBufferAttribute?(s.enableAttributeAndDivisor(u,h.meshPerAttribute,b),void 0===o.maxInstancedCount&&(o.maxInstancedCount=h.meshPerAttribute*h.count)):s.enableAttribute(u),n.bindBuffer(n.ARRAY_BUFFER,C),n.vertexAttribPointer(u,x,E,f,0,l*x*_)}else if(void 0!==O&&void 0!==(f=O[p]))switch(f.length){case 2:n.vertexAttrib2fv(u,f);break;case 3:n.vertexAttrib3fv(u,f);break;case 4:n.vertexAttrib4fv(u,f);break;default:n.vertexAttrib1fv(u,f)}s.disableUnusedAttributes()}null!==t&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,y.getAttributeBuffer(t))}if(b=0,null!==t?b=t.count:void 0!==m&&(b=m.count),t=o.drawRange.start*d,m=null!==r?r.start*d:0,p=Math.max(t,m),0!==(r=Math.max(0,Math.min(b,t+o.drawRange.count*d,m+(null!==r?r.count*d:1/0))-1-p+1))){if(a.isMesh)if(!0===i.wireframe)s.setLineWidth(i.wireframeLinewidth*(null===Y?g:1)),e.setMode(n.LINES);else switch(a.drawMode){case 0:e.setMode(n.TRIANGLES);break;case 1:e.setMode(n.TRIANGLE_STRIP);break;case 2:e.setMode(n.TRIANGLE_FAN)}else a.isLine?(void 0===(i=i.linewidth)&&(i=1),s.setLineWidth(i*(null===Y?g:1)),a.isLineSegments?e.setMode(n.LINES):e.setMode(n.LINE_STRIP)):a.isPoints&&e.setMode(n.POINTS);o&&o.isInstancedBufferGeometry?0<o.maxInstancedCount&&e.renderInstances(o,p,r):e.render(p,r)}},this.render=function(e,t,n,i){if(void 0!==t&&!0!==t.isCamera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{B="",V=-1,O=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),q.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ge.setFromMatrix(q),U.length=0,Q=J=-1,pe.length=0,oe.length=0,ue=this.localClippingEnabled,K=m.init(this.clippingPlanes,ue,t),ke(e,t),T.length=J+1,S.length=Q+1,!0===d.sortObjects&&(T.sort(Re),S.sort(Pe)),K&&m.beginShadows();for(var A=0,P=0,a=(h=U).length;P<a;P++)F=h[P],F.castShadow&&(o.shadows[A++]=F);o.shadows.length=A,le.render(e,t);var c,f,v,F,I,G,h=U,X=F=0,ee=0,g=t.matrixWorldInverse,z=0,p=0,D=0,$=0,Y=0;for(A=0,P=h.length;A<P;A++)v=(a=h[A]).color,f=a.intensity,G=a.distance,I=a.shadow&&a.shadow.map?a.shadow.map.texture:null,a.isAmbientLight?(F+=v.r*f,X+=v.g*f,ee+=v.b*f):a.isDirectionalLight?(c=H.get(a),c.color.copy(a.color).multiplyScalar(a.intensity),c.direction.setFromMatrixPosition(a.matrixWorld),l.setFromMatrixPosition(a.target.matrixWorld),c.direction.sub(l),c.direction.transformDirection(g),(c.shadow=a.castShadow)&&(c.shadowBias=a.shadow.bias,c.shadowRadius=a.shadow.radius,c.shadowMapSize=a.shadow.mapSize),o.directionalShadowMap[z]=I,o.directionalShadowMatrix[z]=a.shadow.matrix,o.directional[z++]=c):a.isSpotLight?((c=H.get(a)).position.setFromMatrixPosition(a.matrixWorld),c.position.applyMatrix4(g),c.color.copy(v).multiplyScalar(f),c.distance=G,c.direction.setFromMatrixPosition(a.matrixWorld),l.setFromMatrixPosition(a.target.matrixWorld),c.direction.sub(l),c.direction.transformDirection(g),c.coneCos=Math.cos(a.angle),c.penumbraCos=Math.cos(a.angle*(1-a.penumbra)),c.decay=0===a.distance?0:a.decay,(c.shadow=a.castShadow)&&(c.shadowBias=a.shadow.bias,c.shadowRadius=a.shadow.radius,c.shadowMapSize=a.shadow.mapSize),o.spotShadowMap[D]=I,o.spotShadowMatrix[D]=a.shadow.matrix,o.spot[D++]=c):a.isRectAreaLight?((c=H.get(a)).color.copy(v).multiplyScalar(f/(a.width*a.height)),c.position.setFromMatrixPosition(a.matrixWorld),c.position.applyMatrix4(g),W.identity(),me.copy(a.matrixWorld),me.premultiply(g),W.extractRotation(me),c.halfWidth.set(.5*a.width,0,0),c.halfHeight.set(0,.5*a.height,0),c.halfWidth.applyMatrix4(W),c.halfHeight.applyMatrix4(W),o.rectArea[$++]=c):a.isPointLight?((c=H.get(a)).position.setFromMatrixPosition(a.matrixWorld),c.position.applyMatrix4(g),c.color.copy(a.color).multiplyScalar(a.intensity),c.distance=a.distance,c.decay=0===a.distance?0:a.decay,(c.shadow=a.castShadow)&&(c.shadowBias=a.shadow.bias,c.shadowRadius=a.shadow.radius,c.shadowMapSize=a.shadow.mapSize),o.pointShadowMap[p]=I,void 0===o.pointShadowMatrix[p]&&(o.pointShadowMatrix[p]=new r),l.setFromMatrixPosition(a.matrixWorld).negate(),o.pointShadowMatrix[p].identity().setPosition(l),o.point[p++]=c):a.isHemisphereLight&&((c=H.get(a)).direction.setFromMatrixPosition(a.matrixWorld),c.direction.transformDirection(g),c.direction.normalize(),c.skyColor.copy(a.color).multiplyScalar(f),c.groundColor.copy(a.groundColor).multiplyScalar(f),o.hemi[Y++]=c);o.ambient[0]=F,o.ambient[1]=X,o.ambient[2]=ee,o.directional.length=z,o.spot.length=D,o.rectArea.length=$,o.point.length=p,o.hemi.length=Y,o.hash=z+","+p+","+D+","+$+","+Y+","+o.shadows.length,K&&m.endShadows(),w.calls=0,w.vertices=0,w.faces=0,w.points=0,void 0===n&&(n=null),this.setRenderTarget(n),null===(h=e.background)?s.buffers.color.setClear(u.r,u.g,u.b,C,N):h&&h.isColor&&(s.buffers.color.setClear(h.r,h.g,h.b,1,N),i=!0),(this.autoClear||i)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),h&&h.isCubeTexture?(void 0===j&&(j=new x,b=new _(new xe(5,5,5),new E({uniforms:Z.cube.uniforms,vertexShader:Z.cube.vertexShader,fragmentShader:Z.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))),j.projectionMatrix.copy(t.projectionMatrix),j.matrixWorld.extractRotation(t.matrixWorld),j.matrixWorldInverse.getInverse(j.matrixWorld),b.material.uniforms.tCube.value=h,b.modelViewMatrix.multiplyMatrices(j.matrixWorldInverse,b.matrixWorld),y.update(b),d.renderBufferDirect(j,null,b.geometry,b.material,b,null)):h&&h.isTexture&&(void 0===ie&&(ie=new ut(-1,1,1,-1,0,1),k=new _(new Ee(2,2),new M({depthTest:!1,depthWrite:!1,fog:!1}))),k.material.map=h,y.update(k),d.renderBufferDirect(ie,null,k.geometry,k.material,k,null)),e.overrideMaterial?(i=e.overrideMaterial,ne(T,e,t,i),ne(S,e,t,i)):(s.setBlending(0),ne(T,e,t),ne(S,e,t)),Se.render(e,t),De.render(e,t,R),n&&L.updateRenderTargetMipmap(n),s.setDepthTest(!0),s.setDepthWrite(!0),s.setColorWrite(!0)}},this.setFaceCulling=function(e,t){s.setCullFace(e),s.setFlipSided(0===t)},this.allocTextureUnit=function(){var e=re;return e>=v.maxTextures&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+v.maxTextures),re+=1,e},this.setTexture2D=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),L.setTexture2D(t,n)}}(),this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),L.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?L.setTextureCube(t,n):L.setTextureCubeDynamic(t,n)}}(),this.getCurrentRenderTarget=function(){return Y},this.setRenderTarget=function(e){(Y=e)&&void 0===h.get(e).__webglFramebuffer&&L.setupRenderTarget(e);var t,o=e&&e.isWebGLRenderTargetCube;e?(t=h.get(e),t=o?t.__webglFramebuffer[e.activeCubeFace]:t.__webglFramebuffer,ee.copy(e.scissor),he=e.scissorTest,R.copy(e.viewport)):(t=null,ee.copy(de).multiplyScalar(g),he=Ce,R.copy(I).multiplyScalar(g)),G!==t&&(n.bindFramebuffer(n.FRAMEBUFFER,t),G=t),s.scissor(ee),s.setScissorTest(he),s.viewport(R),o&&(o=h.get(e.texture),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,o.__webglTexture,e.activeMipMapLevel))},this.readRenderTargetPixels=function(e,t,s,o,i,a){if(!1===(e&&e.isWebGLRenderTarget))console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");else if(l=h.get(e).__webglFramebuffer,l){d=!1,l!==G&&(n.bindFramebuffer(n.FRAMEBUFFER,l),d=!0);try{var l,d,m=e.texture,u=m.format,r=m.type;1023!==u&&F(u)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===r||F(r)===n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)||1015===r&&(c.get("OES_texture_float")||c.get("WEBGL_color_buffer_float"))||1016===r&&c.get("EXT_color_buffer_half_float")?n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE?0<=t&&t<=e.width-o&&0<=s&&s<=e.height-i&&n.readPixels(t,s,o,i,F(u),F(r),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{d&&n.bindFramebuffer(n.FRAMEBUFFER,G)}}}}function Je(e,t){this.name="",this.color=new a(e),this.density=void 0!==t?t:25e-5}function et(e,t,n){this.name="",this.color=new a(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function Fe(){s.call(this),this.type="Scene",this.overrideMaterial=this.fog=this.background=null,this.autoUpdate=!0}function Kn(e,n,o,i,a){s.call(this),this.lensFlares=[],this.positionScreen=new t,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,n,o,i,a)}function Te(e){h.call(this),this.type="SpriteMaterial",this.color=new a(16777215),this.map=null,this.rotation=0,this.lights=this.fog=!1,this.setValues(e)}function Kt(e){s.call(this),this.type="Sprite",this.material=void 0!==e?e:new Te}function Ut(){s.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function yn(e,t,n){if(this.useVertexTexture=void 0===n||n,this.identityMatrix=new r,e=e||[],this.bones=e.slice(0),this.useVertexTexture?(e=Math.sqrt(4*this.bones.length),e=l.nextPowerOfTwo(Math.ceil(e)),this.boneTextureHeight=this.boneTextureWidth=e=Math.max(e,4),this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new be(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,1023,1015)):this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else for(console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[],t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new r)}function Nn(){s.call(this),this.type="Bone"}function In(e,t,n){if(_.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new r,this.bindMatrixInverse=new r,e=[],this.geometry&&void 0!==this.geometry.bones){for(var s,o=0,i=this.geometry.bones.length;o<i;++o)s=this.geometry.bones[o],t=new Nn,e.push(t),t.name=s.name,t.position.fromArray(s.pos),t.quaternion.fromArray(s.rotq),void 0!==s.scl&&t.scale.fromArray(s.scl);for(o=0,i=this.geometry.bones.length;o<i;++o)-1!==(s=this.geometry.bones[o]).parent&&null!==s.parent&&void 0!==e[s.parent]?e[s.parent].add(e[o]):this.add(e[o])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new yn(e,void 0,n),this.matrixWorld)}function j(e){h.call(this),this.type="LineBasicMaterial",this.color=new a(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.lights=!1,this.setValues(e)}function ee(e,t,n){if(1===n)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new g(e,t);s.call(this),this.type="Line",this.geometry=void 0!==e?e:new i,this.material=void 0!==t?t:new j({color:16777215*Math.random()})}function g(e,t){ee.call(this,e,t),this.type="LineSegments"}function V(e){h.call(this),this.type="PointsMaterial",this.color=new a(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function mt(e,t){s.call(this),this.type="Points",this.geometry=void 0!==e?e:new i,this.material=void 0!==t?t:new V({color:16777215*Math.random()})}function Ct(){s.call(this),this.type="Group"}function $n(e,t,n,s,o,i,a,r,c){p.call(this,e,t,n,s,o,i,a,r,c),this.generateMipmaps=!1;var l=this;!function t(){requestAnimationFrame(t),e.readyState>=e.HAVE_CURRENT_DATA&&(l.needsUpdate=!0)}()}function gt(e,t,n,s,o,i,a,r,c,l,d,u){p.call(this,null,i,a,r,c,l,s,o,d,u),this.image={width:t,height:n},this.mipmaps=e,this.generateMipmaps=this.flipY=!1}function Un(e,t,n,s,o,i,a,r,c){p.call(this,e,t,n,s,o,i,a,r,c),this.needsUpdate=!0}function Ot(e,t,n,s,o,i,a,r,c,l){if(1026!==(l=void 0!==l?l:1026)&&1027!==l)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&1026===l&&(n=1012),void 0===n&&1027===l&&(n=1020),p.call(this,null,s,o,i,a,r,l,n,c),this.image={width:e,height:t},this.magFilter=void 0!==a?a:1003,this.minFilter=void 0!==r?r:1003,this.generateMipmaps=this.flipY=!1}function De(e){function g(e,t){return e-t}i.call(this),this.type="WireframeGeometry";var s,a,l,d,u,m,f,p,h=[],r=[0,0],c={},n=["a","b","c"];if(e&&e.isGeometry){l=e.faces;for(s=0,d=l.length;s<d;s++){m=l[s];for(a=0;3>a;a++)r[0]=m[n[a]],r[1]=m[n[(a+1)%3]],r.sort(g),void 0===c[u=r.toString()]&&(c[u]={index1:r[0],index2:r[1]})}for(u in c)s=c[u],n=e.vertices[s.index1],h.push(n.x,n.y,n.z),n=e.vertices[s.index2],h.push(n.x,n.y,n.z)}else if(e&&e.isBufferGeometry)if(n=new t,null!==e.index){for(l=e.attributes.position,m=e.index,0===(f=e.groups).length&&e.addGroup(0,m.count),e=0,p=f.length;e<p;++e)for(a=(s=f[e]).start,d=s.count,s=a,d=a+d;s<d;s+=3)for(a=0;3>a;a++)r[0]=m.getX(s+a),r[1]=m.getX(s+(a+1)%3),r.sort(g),void 0===c[u=r.toString()]&&(c[u]={index1:r[0],index2:r[1]});for(u in c)s=c[u],n.fromBufferAttribute(l,s.index1),h.push(n.x,n.y,n.z),n.fromBufferAttribute(l,s.index2),h.push(n.x,n.y,n.z)}else for(s=0,d=(l=e.attributes.position).count/3;s<d;s++)for(a=0;3>a;a++)c=3*s+a,n.fromBufferAttribute(l,c),h.push(n.x,n.y,n.z),c=3*s+(a+1)%3,n.fromBufferAttribute(l,c),h.push(n.x,n.y,n.z);this.addAttribute("position",new o(h,3))}function yt(e,t,n){c.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new vt(e,t,n)),this.mergeVertices()}function vt(e,t,n){i.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var s,a,r,c,d,u=[],h=[],m=[],l=t+1;for(s=0;s<=n;s++){c=s/n;for(a=0;a<=t;a++)r=a/t,d=e(r,c),h.push(d.x,d.y,d.z),m.push(r,c)}for(s=0;s<n;s++)for(a=0;a<t;a++)e=s*l+a+1,c=(s+1)*l+a+1,r=(s+1)*l+a,u.push(s*l+a,e,r),u.push(e,c,r);this.setIndex(u),this.addAttribute("position",new o(h,3)),this.addAttribute("uv",new o(m,2)),this.computeVertexNormals()}function wt(e,t,n,s){c.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:s},this.fromBufferGeometry(new S(e,t,n,s)),this.mergeVertices()}function S(e,s,a,r){function d(e){c.push(e.x,e.y,e.z)}function u(t,n){var s=3*t;n.x=e[s+0],n.y=e[s+1],n.z=e[s+2]}function h(e,t,n,s){0>s&&1===e.x&&(l[t]=e.x-1),0===n.x&&0===n.z&&(l[t]=s/2/Math.PI+.5)}i.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:s,radius:a,detail:r},a=a||1;var c=[],l=[];!function(e){for(var m=new t,f=new t,l=new t,c=0;c<s.length;c+=3){u(s[c+0],m),u(s[c+1],f),u(s[c+2],l);var n,o,a=m,v=f,h=l,r=Math.pow(2,e),i=[];for(n=0;n<=r;n++){i[n]=[];var p=a.clone().lerp(h,n/r),b=v.clone().lerp(h,n/r),g=r-n;for(o=0;o<=g;o++)i[n][o]=0===o&&n===r?p:p.clone().lerp(b,o/g)}for(n=0;n<r;n++)for(o=0;o<2*(r-n)-1;o++)a=Math.floor(o/2),0==o%2?(d(i[n][a+1]),d(i[n+1][a]),d(i[n][a])):(d(i[n][a+1]),d(i[n+1][a+1]),d(i[n+1][a]))}}(r||0),function(e){for(var s=new t,n=0;n<c.length;n+=3)s.x=c[n+0],s.y=c[n+1],s.z=c[n+2],s.normalize().multiplyScalar(e),c[n+0]=s.x,c[n+1]=s.y,c[n+2]=s.z}(a),function(){for(e=new t,s=0;s<c.length;s+=3)e.x=c[s+0],e.y=c[s+1],e.z=c[s+2],l.push(Math.atan2(e.z,-e.x)/2/Math.PI+.5,1-(Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5));e=new t,s=new t;for(var e,s,u,a=new t,r=new t,d=new n,m=new n,f=new n,o=0,i=0;o<c.length;o+=9,i+=6)e.set(c[o+0],c[o+1],c[o+2]),s.set(c[o+3],c[o+4],c[o+5]),a.set(c[o+6],c[o+7],c[o+8]),d.set(l[i+0],l[i+1]),m.set(l[i+2],l[i+3]),f.set(l[i+4],l[i+5]),r.copy(e).add(s).add(a).divideScalar(3),u=Math.atan2(r.z,-r.x),h(d,i+0,e,u),h(m,i+2,s,u),h(f,i+4,a,u);for(e=0;e<l.length;e+=6)s=l[e+0],a=l[e+2],r=l[e+4],d=Math.min(s,a,r),.9<Math.max(s,a,r)&&.1>d&&(.2>s&&(l[e+0]+=1),.2>a&&(l[e+2]+=1),.2>r&&(l[e+4]+=1))}(),this.addAttribute("position",new o(c,3)),this.addAttribute("normal",new o(c.slice(),3)),this.addAttribute("uv",new o(l,2)),this.normalizeNormals()}function xt(e,t){c.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ft(e,t)),this.mergeVertices()}function ft(e,t){S.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Et(e,t){c.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new je(e,t)),this.mergeVertices()}function je(e,t){S.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function At(e,t){c.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ht(e,t)),this.mergeVertices()}function ht(e,t){var n=(1+Math.sqrt(5))/2;S.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Mt(e,t){c.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new dt(e,t)),this.mergeVertices()}function dt(e,t){var n=(1+Math.sqrt(5))/2,s=1/n;S.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-n,0,-s,n,0,s,-n,0,s,n,-s,-n,0,-s,n,0,s,-n,0,s,n,0,-n,0,-s,n,0,-s,-n,0,s,n,0,s],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Tt(e,t,n,s,o,i){c.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:s,closed:o},void 0!==i&&console.warn("THREE.TubeGeometry: taper has been removed."),e=new lt(e,t,n,s,o),this.tangents=e.tangents,this.normals=e.normals,this.binormals=e.binormals,this.fromBufferGeometry(e),this.mergeVertices()}function lt(e,s,a,r,c){function g(t){var n,o,i=e.getPointAt(t/s),c=h.normals[t];for(t=h.binormals[t],d=0;d<=r;d++)n=d/r*Math.PI*2,o=Math.sin(n),n=-Math.cos(n),u.x=n*c.x+o*t.x,u.y=n*c.y+o*t.y,u.z=n*c.z+o*t.z,u.normalize(),b.push(u.x,u.y,u.z),m.x=i.x+a*u.x,m.y=i.y+a*u.y,m.z=i.z+a*u.z,v.push(m.x,m.y,m.z)}i.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:s,radius:a,radialSegments:r,closed:c},s=s||64,a=a||1,r=r||8,c=c||!1,h=e.computeFrenetFrames(s,c),this.tangents=h.tangents,this.normals=h.normals,this.binormals=h.binormals;var l,d,h,m=new t,u=new t,f=new n,v=[],b=[],j=[],p=[];for(l=0;l<s;l++)g(l);for(g(!1===c?s:0),l=0;l<=s;l++)for(d=0;d<=r;d++)f.x=l/s,f.y=d/r,j.push(f.x,f.y);!function(){for(d=1;d<=s;d++)for(l=1;l<=r;l++){var e=(r+1)*d+(l-1),n=(r+1)*d+l,t=(r+1)*(d-1)+l;p.push((r+1)*(d-1)+(l-1),e,t),p.push(e,n,t)}}(),this.setIndex(p),this.addAttribute("position",new o(v,3)),this.addAttribute("normal",new o(b,3)),this.addAttribute("uv",new o(j,2))}function bt(e,t,n,s,o,i,a){c.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:s,p:o,q:i},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new ct(e,t,n,s,o,i)),this.mergeVertices()}function ct(e,s,a,r,c,l){function O(e,t,n,s,o){var i=Math.sin(e);t=n/t*e,n=Math.cos(t),o.x=s*(2+n)*.5*Math.cos(e),o.y=s*(2+n)*i*.5,o.z=s*Math.sin(t)*.5}i.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:s,tubularSegments:a,radialSegments:r,p:c,q:l},e=e||100,s=s||40,a=Math.floor(a)||64,r=Math.floor(r)||8,c=c||2,l=l||3;var d,u,m,v,w=[],C=[],x=[],_=[],p=new t,b=new t;new n;var h=new t,y=new t,g=new t,j=new t,f=new t;for(u=0;u<=a;++u)for(O(d=u/a*c*Math.PI*2,c,l,e,h),O(d+.01,c,l,e,y),j.subVectors(y,h),f.addVectors(y,h),g.crossVectors(j,f),f.crossVectors(g,j),g.normalize(),f.normalize(),d=0;d<=r;++d)m=d/r*Math.PI*2,v=-s*Math.cos(m),m=s*Math.sin(m),p.x=h.x+(v*f.x+m*g.x),p.y=h.y+(v*f.y+m*g.y),p.z=h.z+(v*f.z+m*g.z),C.push(p.x,p.y,p.z),b.subVectors(p,h).normalize(),x.push(b.x,b.y,b.z),_.push(u/a),_.push(d/r);for(d=1;d<=a;d++)for(u=1;u<=r;u++)e=(r+1)*d+(u-1),s=(r+1)*d+u,c=(r+1)*(d-1)+u,w.push((r+1)*(d-1)+(u-1),e,c),w.push(e,s,c);this.setIndex(w),this.addAttribute("position",new o(C,3)),this.addAttribute("normal",new o(x,3)),this.addAttribute("uv",new o(_,2))}function Lt(e,t,n,s,o){c.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:s,arc:o},this.fromBufferGeometry(new rt(e,t,n,s,o))}function rt(e,n,s,a,r){i.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:n,radialSegments:s,tubularSegments:a,arc:r},e=e||100,n=n||40,s=Math.floor(s)||8,a=Math.floor(a)||6,r=r||2*Math.PI;var c,l,u,m,f=[],v=[],b=[],p=[],g=new t,d=new t,h=new t;for(c=0;c<=s;c++)for(l=0;l<=a;l++)u=l/a*r,m=c/s*Math.PI*2,d.x=(e+n*Math.cos(m))*Math.cos(u),d.y=(e+n*Math.cos(m))*Math.sin(u),d.z=n*Math.sin(m),v.push(d.x,d.y,d.z),g.x=e*Math.cos(u),g.y=e*Math.sin(u),h.subVectors(d,g).normalize(),b.push(h.x,h.y,h.z),p.push(l/a),p.push(c/s);for(c=1;c<=s;c++)for(l=1;l<=a;l++)e=(a+1)*(c-1)+l-1,n=(a+1)*(c-1)+l,r=(a+1)*c+l,f.push((a+1)*c+l-1,e,r),f.push(e,n,r);this.setIndex(f),this.addAttribute("position",new o(v,3)),this.addAttribute("normal",new o(b,3)),this.addAttribute("uv",new o(p,2))}function I(e,t){void 0!==e&&(c.call(this),this.type="ExtrudeGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeFaceNormals())}function Ht(e,t){var n=(t=t||{}).font;if(!1===(n&&n.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new c;n=n.generateShapes(e,t.size,t.curveSegments),t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),I.call(this,n,t),this.type="TextGeometry"}function It(e,t,n,s,o,i,a){c.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:s,phiLength:o,thetaStart:i,thetaLength:a},this.fromBufferGeometry(new ve(e,t,n,s,o,i,a))}function ve(e,n,s,a,r,c,l){i.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:s,phiStart:a,phiLength:r,thetaStart:c,thetaLength:l},e=e||50,n=Math.max(3,Math.floor(n)||8),s=Math.max(2,Math.floor(s)||6),a=void 0!==a?a:0,r=void 0!==r?r:2*Math.PI;var d,u,m,p,b,O=(c=void 0!==c?c:0)+(l=void 0!==l?l:Math.PI),w=0,f=[],h=new t,g=new t,v=[],_=[],j=[],y=[];for(d=0;d<=s;d++){b=[],m=d/s;for(u=0;u<=n;u++)p=u/n,h.x=-e*Math.cos(a+p*r)*Math.sin(c+m*l),h.y=e*Math.cos(c+m*l),h.z=e*Math.sin(a+p*r)*Math.sin(c+m*l),_.push(h.x,h.y,h.z),g.set(h.x,h.y,h.z).normalize(),j.push(g.x,g.y,g.z),y.push(p,1-m),b.push(w++);f.push(b)}for(d=0;d<s;d++)for(u=0;u<n;u++)e=f[d][u+1],a=f[d][u],r=f[d+1][u],l=f[d+1][u+1],(0!==d||0<c)&&v.push(e,a,l),(d!==s-1||O<Math.PI)&&v.push(a,r,l);this.setIndex(v),this.addAttribute("position",new o(_,3)),this.addAttribute("normal",new o(j,3)),this.addAttribute("uv",new o(y,2))}function Vt(e,t,n,s,o,i){c.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:s,thetaStart:o,thetaLength:i},this.fromBufferGeometry(new at(e,t,n,s,o,i))}function at(e,s,a,r,c,l){i.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:s,thetaSegments:a,phiSegments:r,thetaStart:c,thetaLength:l},e=e||20,s=s||50,c=void 0!==c?c:0,l=void 0!==l?l:2*Math.PI,a=void 0!==a?Math.max(3,a):8;var d,u,p=[],g=[],v=[],b=[],m=e,j=(s-e)/(r=void 0!==r?Math.max(1,r):1),h=new t,f=new n;for(u=0;u<=r;u++){for(d=0;d<=a;d++)e=c+d/a*l,h.x=m*Math.cos(e),h.y=m*Math.sin(e),g.push(h.x,h.y,h.z),v.push(0,0,1),f.x=(h.x/s+1)/2,f.y=(h.y/s+1)/2,b.push(f.x,f.y);m+=j}for(u=0;u<r;u++)for(s=u*(a+1),d=0;d<a;d++)c=(e=d+s)+a+1,l=e+a+2,m=e+1,p.push(e,c,m),p.push(c,l,m);this.setIndex(p),this.addAttribute("position",new o(g,3)),this.addAttribute("normal",new o(v,3)),this.addAttribute("uv",new o(b,2))}function Wt(e,t,n,s){c.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:s},this.fromBufferGeometry(new it(e,t,n,s)),this.mergeVertices()}function it(e,s,a,r){i.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:s,phiStart:a,phiLength:r},s=Math.floor(s)||12,a=a||0,r=r||2*Math.PI,r=l.clamp(r,0,2*Math.PI);var c,d,v,b,u=[],m=[],f=[],g=1/s,h=new t,p=new n;for(d=0;d<=s;d++){c=a+d*g*r,v=Math.sin(c),b=Math.cos(c);for(c=0;c<=e.length-1;c++)h.x=e[c].x*v,h.y=e[c].y,h.z=e[c].x*b,m.push(h.x,h.y,h.z),p.x=d/s,p.y=c/(e.length-1),f.push(p.x,p.y)}for(d=0;d<s;d++)for(c=0;c<e.length-1;c++)g=(a=c+d*e.length)+e.length,h=a+e.length+1,p=a+1,u.push(a,g,p),u.push(g,h,p);if(this.setIndex(u),this.addAttribute("position",new o(m,3)),this.addAttribute("uv",new o(f,2)),this.computeVertexNormals(),r===2*Math.PI)for(r=this.attributes.normal.array,u=new t,m=new t,f=new t,a=s*e.length*3,c=d=0;d<e.length;d++,c+=3)u.x=r[c+0],u.y=r[c+1],u.z=r[c+2],m.x=r[a+c+0],m.y=r[a+c+1],m.z=r[a+c+2],f.addVectors(u,m).normalize(),r[c+0]=r[a+c+0]=f.x,r[c+1]=r[a+c+1]=f.y,r[c+2]=r[a+c+2]=f.z}function ot(e,t){c.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new ze(e,t)),this.mergeVertices()}function ze(e,t){function r(e){var o,i,h,u=a.length/3,n=(e=e.extractPoints(t)).shape,r=e.holes;if(!1===P.isClockWise(n))for(n=n.reverse(),e=0,i=r.length;e<i;e++)o=r[e],!0===P.isClockWise(o)&&(r[e]=o.reverse());h=P.triangulateShape(n,r);for(e=0,i=r.length;e<i;e++)o=r[e],n=n.concat(o);for(e=0,i=n.length;e<i;e++)o=n[e],a.push(o.x,o.y,0),l.push(0,0,1),d.push(o.x,o.y);for(e=0,i=h.length;e<i;e++)n=h[e],c.push(n[0]+u,n[1]+u,n[2]+u),s+=3}i.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n,c=[],a=[],l=[],d=[],u=0,s=0;if(!1===Array.isArray(e))r(e);else for(n=0;n<e.length;n++)r(e[n]),this.addGroup(u,s,n),u+=s,s=0;this.setIndex(c),this.addAttribute("position",new o(a,3)),this.addAttribute("normal",new o(l,3)),this.addAttribute("uv",new o(d,2))}function st(e,t){function v(e,t){return e-t}i.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t};var a,u,h,f,m=[],g=Math.cos(l.DEG2RAD*(void 0!==t?t:1)),n=[0,0],d={},s=["a","b","c"];e.isBufferGeometry?(a=new c).fromBufferGeometry(e):a=e.clone(),a.mergeVertices(),a.computeFaceNormals();for(var p=a.vertices,r=0,b=(a=a.faces).length;r<b;r++)for(f=a[r],h=0;3>h;h++)n[0]=f[s[h]],n[1]=f[s[(h+1)%3]],n.sort(v),void 0===d[u=n.toString()]?d[u]={index1:n[0],index2:n[1],face1:r,face2:void 0}:d[u].face2=r;for(u in d)(void 0===(n=d[u]).face2||a[n.face1].normal.dot(a[n.face2].normal)<=g)&&(s=p[n.index1],m.push(s.x,s.y,s.z),s=p[n.index2],m.push(s.x,s.y,s.z));this.addAttribute("position",new o(m,3))}function he(e,t,n,s,o,i,a,r){c.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:s,heightSegments:o,openEnded:i,thetaStart:a,thetaLength:r},this.fromBufferGeometry(new J(e,t,n,s,o,i,a,r)),this.mergeVertices()}function J(e,s,a,r,c,l,d,u){function _(o){var i,l,w,O,x,c=new n,a=new t,_=0,C=!0===o?e:s,f=!0===o?1:-1;for(O=m,i=1;i<=r;i++)p.push(0,y*f,0),g.push(0,f,0),v.push(.5,.5),m++;for(x=m,i=0;i<=r;i++)l=i/r*u+d,w=Math.cos(l),l=Math.sin(l),a.x=C*l,a.y=y*f,a.z=C*w,p.push(a.x,a.y,a.z),g.push(0,f,0),c.x=.5*w+.5,c.y=.5*l*f+.5,v.push(c.x,c.y),m++;for(i=0;i<r;i++)c=O+i,a=x+i,!0===o?h.push(a,a+1,c):h.push(a+1,a,c),_+=3;j.addGroup(b,_,!0===o?1:2),b+=_}i.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:s,height:a,radialSegments:r,heightSegments:c,openEnded:l,thetaStart:d,thetaLength:u},j=this,e=void 0!==e?e:20,s=void 0!==s?s:20,a=void 0!==a?a:100,r=Math.floor(r)||8,c=Math.floor(c)||1,l=void 0!==l&&l,d=void 0!==d?d:0,u=void 0!==u?u:2*Math.PI;var j,h=[],p=[],g=[],v=[],m=0,f=[],y=a/2,b=0;!function(){var n,o,l=new t,i=new t,O=0,w=(s-e)/a;for(o=0;o<=c;o++){var C=[],x=o/c,E=x*(s-e)+e;for(n=0;n<=r;n++){var k=n/r,_=k*u+d,A=Math.sin(_),_=Math.cos(_);i.x=E*A,i.y=-x*a+y,i.z=E*_,p.push(i.x,i.y,i.z),l.set(A,w,_).normalize(),g.push(l.x,l.y,l.z),v.push(k,1-x),C.push(m++)}f.push(C)}for(n=0;n<r;n++)for(o=0;o<c;o++)l=f[o+1][n],i=f[o+1][n+1],w=f[o][n+1],h.push(f[o][n],l,w),h.push(l,i,w),O+=6;j.addGroup(b,O,0),b+=O}(),!1===l&&(0<e&&_(!0),0<s&&_(!1)),this.setIndex(h),this.addAttribute("position",new o(p,3)),this.addAttribute("normal",new o(g,3)),this.addAttribute("uv",new o(v,2))}function Qt(e,t,n,s,o,i,a){he.call(this,0,e,t,n,s,o,i,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:s,openEnded:o,thetaStart:i,thetaLength:a}}function Zt(e,t,n,s,o,i,a){J.call(this,0,e,t,n,s,o,i,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:s,openEnded:o,thetaStart:i,thetaLength:a}}function Jt(e,t,n,s){c.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:s},this.fromBufferGeometry(new nt(e,t,n,s))}function nt(e,s,a,r){i.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:s,thetaStart:a,thetaLength:r},e=e||50,s=void 0!==s?Math.max(3,s):8,a=void 0!==a?a:0,r=void 0!==r?r:2*Math.PI;var c,u,p,g=[],l=[],m=[],f=[],d=new t,h=new n;for(l.push(0,0,0),m.push(0,0,1),f.push(.5,.5),u=0,c=3;u<=s;u++,c+=3)p=a+u/s*r,d.x=e*Math.cos(p),d.y=e*Math.sin(p),l.push(d.x,d.y,d.z),m.push(0,0,1),h.x=(l[c]/e+1)/2,h.y=(l[c+1]/e+1)/2,f.push(h.x,h.y);for(c=1;c<=s;c++)g.push(c,c+1,0);this.setIndex(g),this.addAttribute("position",new o(l,3)),this.addAttribute("normal",new o(m,3)),this.addAttribute("uv",new o(f,2))}function tt(){E.call(this,{uniforms:A.merge([d.lights,{opacity:{value:1}}]),vertexShader:m.shadow_vert,fragmentShader:m.shadow_frag}),this.transparent=this.lights=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}}})}function Ze(e){E.call(this,e),this.type="RawShaderMaterial"}function sn(e){this.uuid=l.generateUUID(),this.type="MultiMaterial",this.materials=Array.isArray(e)?e:[],this.visible=!0}function Y(e){h.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new a(16777215),this.metalness=this.roughness=.5,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new a(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function le(e){Y.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoatRoughness=this.clearCoat=0,this.setValues(e)}function U(e){h.call(this),this.type="MeshPhongMaterial",this.color=new a(16777215),this.specular=new a(1118481),this.shininess=30,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new a(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function de(e){U.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function ue(e){h.call(this,e),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=!1,this.setValues(e)}function fe(e){h.call(this),this.type="MeshLambertMaterial",this.color=new a(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new a(0),this.emissiveIntensity=1,this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function ge(e){h.call(this),this.type="LineDashedMaterial",this.color=new a(16777215),this.scale=this.linewidth=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(e)}function os(e,t,n){var s=this,a=!1,o=0,i=0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){i++,!1===a&&void 0!==s.onStart&&s.onStart(e,o,i),a=!0},this.itemEnd=function(e){o++,void 0!==s.onProgress&&s.onProgress(e,o,i),o===i&&(a=!1,void 0!==s.onLoad)&&s.onLoad()},this.itemError=function(e){void 0!==s.onError&&s.onError(e)}}function $(e){this.manager=void 0!==e?e:T}function Ns(e){this.manager=void 0!==e?e:T,this._parser=null}function cs(e){this.manager=void 0!==e?e:T,this._parser=null}function an(e){this.manager=void 0!==e?e:T}function Os(e){this.manager=void 0!==e?e:T}function bn(e){this.manager=void 0!==e?e:T}function b(e,t){s.call(this),this.type="Light",this.color=new a(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function fn(e,t,n){b.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(s.DefaultUp),this.updateMatrix(),this.groundColor=new a(t)}function ye(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new n(512,512),this.map=null,this.matrix=new r}function wn(){ye.call(this,new x(50,1,.5,500))}function On(e,t,n,o,i,a){b.call(this,e,t),this.type="SpotLight",this.position.copy(s.DefaultUp),this.updateMatrix(),this.target=new s,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==o?o:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==a?a:1,this.shadow=new wn}function xn(e,t,n,s){b.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==s?s:1,this.shadow=new ye(new x(90,1,.5,500))}function Cn(){ye.call(this,new ut(-5,5,5,-5,.5,500))}function Fn(e,t){b.call(this,e,t),this.type="DirectionalLight",this.position.copy(s.DefaultUp),this.updateMatrix(),this.target=new s,this.shadow=new Cn}function kn(e,t){b.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function F(e,t,n,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==s?s:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function mn(e,t,n,s){F.call(this,e,t,n,s),this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function $t(e,t,n,s){F.call(this,e,t,n,s)}function En(e,t,n,s){F.call(this,e,t,n,s)}function _e(e,t,n,s){if(void 0===e)throw Error("track name is undefined");if(void 0===t||0===t.length)throw Error("no keyframes in track named "+e);this.name=e,this.times=O.convertArray(t,this.TimeBufferType),this.values=O.convertArray(n,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation),this.validate(),this.optimize()}function Qe(e,t,n,s){_e.call(this,e,t,n,s)}function Dn(e,t,n,s){F.call(this,e,t,n,s)}function Rt(e,t,n,s){_e.call(this,e,t,n,s)}function Xe(e,t,n,s){_e.call(this,e,t,n,s)}function Rn(e,t,n,s){_e.call(this,e,t,n,s)}function Pn(e,t,n){_e.call(this,e,t,n)}function Hn(e,t,n,s){_e.call(this,e,t,n,s)}function we(){_e.apply(this,arguments)}function L(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=l.generateUUID(),0>this.duration&&this.resetDuration(),this.optimize()}function Vn(e){this.manager=void 0!==e?e:T,this.textures={}}function ts(e){this.manager=void 0!==e?e:T}function Oe(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function Zn(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:T,this.withCredentials=!1}function eo(e){this.manager=void 0!==e?e:T,this.texturePath=""}function Is(e,t,n,s,o){var i=e*e;return(2*n-2*s+(t=.5*(s-t))+(o=.5*(o-n)))*e*i+(-3*n+3*s-2*t-o)*i+t*e+n}function Ce(e,t,n,s){var o=1-e;return o*o*t+2*(1-e)*e*n+e*e*s}function ke(e,t,n,s,o){var i=1-e,a=1-e;return i*i*i*t+3*a*a*e*n+3*(1-e)*e*e*s+e*e*e*o}function k(){}function q(e,t){this.v1=e,this.v2=t}function _t(){this.curves=[],this.autoClose=!1}function Q(e,t,n,s,o,i,a,r){this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=s,this.aStartAngle=o,this.aEndAngle=i,this.aClockwise=a,this.aRotation=r||0}function Ae(e){this.points=void 0===e?[]:e}function Ge(e,t,n,s){this.v0=e,this.v1=t,this.v2=n,this.v3=s}function Ye(e,t,n){this.v0=e,this.v1=t,this.v2=n}function Nt(e){_t.call(this),this.currentPoint=new n,e&&this.fromPoints(e)}function Se(){Nt.apply(this,arguments),this.holes=[]}function is(){this.subPaths=[],this.currentPath=null}function rs(e){this.data=e}function Ds(e){this.manager=void 0!==e?e:T}function ls(e){this.manager=void 0!==e?e:T}function ds(e,t,n,s){b.call(this,e,t),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0!==n?n:10,this.height=void 0!==s?s:10}function zs(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new x,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new x,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Ln(e,n,o){s.call(this),this.type="CubeCamera";var i,a,r,c,l,d=new x(90,1,e,n);d.up.set(0,-1,0),d.lookAt(new t(1,0,0)),this.add(d),i=new x(90,1,e,n),i.up.set(0,-1,0),i.lookAt(new t(-1,0,0)),this.add(i),a=new x(90,1,e,n),a.up.set(0,0,1),a.lookAt(new t(0,1,0)),this.add(a),r=new x(90,1,e,n),r.up.set(0,0,-1),r.lookAt(new t(0,-1,0)),this.add(r),c=new x(90,1,e,n),c.up.set(0,-1,0),c.lookAt(new t(0,0,1)),this.add(c),l=new x(90,1,e,n),l.up.set(0,-1,0),l.lookAt(new t(0,0,-1)),this.add(l),this.renderTarget=new Ne(o,o,{format:1022,magFilter:1006,minFilter:1006}),this.updateCubeMap=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,s=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,d,n),n.activeCubeFace=1,e.render(t,i,n),n.activeCubeFace=2,e.render(t,a,n),n.activeCubeFace=3,e.render(t,r,n),n.activeCubeFace=4,e.render(t,c,n),n.texture.generateMipmaps=s,n.activeCubeFace=5,e.render(t,l,n),e.setRenderTarget(null)}}function ms(){s.call(this),this.type="AudioListener",this.context=gn.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function qe(e){s.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function ps(e){qe.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function gs(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function An(e,t,n){switch(this.binding=e,this.valueSize=n,e=Float64Array,t){case"quaternion":t=this._slerp;break;case"string":case"bool":e=Array,t=this._select;break;default:t=this._lerp}this.buffer=new e(4*n),this._mixBufferRegion=t,this.referenceCount=this.useCount=this.cumulativeWeight=0}function v(e,t,n){this.path=t,this.parsedPath=n||v.parseTrackName(t),this.node=v.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function js(){this.uuid=l.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0,s={},this._indicesByUUID=s;for(var n,s,t=0,o=arguments.length;t!==o;++t)s[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={},n=this,this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function ys(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null,t=(e=t.tracks).length,n=Array(t);for(var o,i={endingStart:2400,endingEnd:2400},s=0;s!==t;++s)o=e[s].createInterpolant(null),n[s]=o,o.settings=i;this._interpolantSettings=i,this._interpolants=n,this._propertyBindings=Array(t),this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function en(e){this._root=e,this._initMemoryManager(),this.time=this._accuIndex=0,this.timeScale=1}function jn(e,t){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=t),this.value=e}function Me(){i.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function xs(e,t,n,s){this.uuid=l.generateUUID(),this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===s}function Ke(e,t){this.uuid=l.generateUUID(),this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Ue(e,t,n){Ke.call(this,e,t),this.meshPerAttribute=n||1}function We(e,t,n){u.call(this,e,t),this.meshPerAttribute=n||1}function ws(e,t,n,s){this.ray=new ie(e,t),this.near=n||0,this.far=s||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Ss(e,t){return e.distance-t.distance}function _s(e,t,n,s){if(!1!==e.visible&&(e.raycast(t,n),!0===s)){s=0;for(var o=(e=e.children).length;s<o;s++)_s(e[s],t,n,!0)}}function bs(e){this.autoStart=void 0===e||e,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1}function fs(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function us(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}function w(e,t){_.call(this,e,t),this.animationsMap={},this.animationsList=[];var n=this.geometry.morphTargets.length;this.createAnimation("__default",0,n-1,n/1),this.setAnimationWeight("__default",1)}function dn(e){s.call(this),this.material=e,this.render=function(){}}function hn(e,t,n,s){this.object=e,this.size=void 0!==t?t:1,e=void 0!==n?n:16711680,s=void 0!==s?s:1,t=0,(n=this.object.geometry)&&n.isGeometry?t=3*n.faces.length:n&&n.isBufferGeometry&&(t=n.attributes.normal.count),n=new i,t=new o(6*t,3),n.addAttribute("position",t),g.call(this,n,new j({color:e,linewidth:s})),this.matrixAutoUpdate=!1,this.update()}function $e(e){s.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,e=new i;for(var a,r,t=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],n=0,c=1;32>n;n++,c++)a=n/32*Math.PI*2,r=c/32*Math.PI*2,t.push(Math.cos(a),Math.sin(a),1,Math.cos(r),Math.sin(r),1);e.addAttribute("position",new o(t,3)),t=new j({fog:!1}),this.cone=new g(e,t),this.add(this.cone),this.update()}function Ve(e){this.bones=this.getBoneList(e);for(var d,n=new i,t=[],s=[],r=new a(0,0,1),c=new a(0,1,0),l=0;l<this.bones.length;l++)d=this.bones[l],d.parent&&d.parent.isBone&&(t.push(0,0,0),t.push(0,0,0),s.push(r.r,r.g,r.b),s.push(c.r,c.g,c.b));n.addAttribute("position",new o(t,3)),n.addAttribute("color",new o(s,3)),t=new j({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0}),g.call(this,n,t),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Be(e,t){this.light=e,this.light.updateMatrixWorld();var s=new ve(t,4,2),n=new M({wireframe:!0,fog:!1});n.color.copy(this.light.color).multiplyScalar(this.light.intensity),_.call(this,s,n),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function Ie(e){s.call(this),this.light=e,this.light.updateMatrixWorld();var t,n=new M({color:e.color,fog:!1});e=new M({color:e.color,fog:!1,wireframe:!0}),t=new i,t.addAttribute("position",new u(new Float32Array(18),3)),this.add(new _(t,n)),this.add(new _(t,e)),this.update()}function He(e,t){s.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,n=new je(t),n.rotateY(.5*Math.PI);var n,i=new M({vertexColors:2,wireframe:!0}),o=n.getAttribute("position"),o=new Float32Array(3*o.count);n.addAttribute("color",new u(o,3)),this.add(new _(n,i)),this.update()}function cn(e,t,n,s){e=e||10,t=t||10,n=new a(void 0!==n?n:4473924),s=new a(void 0!==s?s:8947848);var m=t/2,f=e/t,c=e/2;e=[];for(var u,l=[],h=0,r=0,d=-c;h<=t;h++,d+=f)e.push(-c,0,d,c,0,d),e.push(d,0,-c,d,0,c),u=h===m?n:s,u.toArray(l,r),r+=3,u.toArray(l,r),r+=3,u.toArray(l,r),r+=3,u.toArray(l,r),r+=3;(t=new i).addAttribute("position",new o(e,3)),t.addAttribute("color",new o(l,3)),n=new j({vertexColors:2}),g.call(this,t,n)}function vn(e,t,n,s,r,c){e=e||10,t=t||16,n=n||8,s=s||64,r=new a(void 0!==r?r:4473924),c=new a(void 0!==c?c:8947848);var l,d,u,m,f,h=[],p=[];for(u=0;u<=t;u++)l=u/t*2*Math.PI,m=Math.sin(l)*e,l=Math.cos(l)*e,h.push(0,0,0),h.push(m,0,l),d=1&u?r:c,p.push(d.r,d.g,d.b),p.push(d.r,d.g,d.b);for(u=0;u<=n;u++)for(d=1&u?r:c,f=e-e/n*u,t=0;t<s;t++)l=t/s*2*Math.PI,m=Math.sin(l)*f,l=Math.cos(l)*f,h.push(m,0,l),p.push(d.r,d.g,d.b),l=(t+1)/s*2*Math.PI,m=Math.sin(l)*f,l=Math.cos(l)*f,h.push(m,0,l),p.push(d.r,d.g,d.b);(e=new i).addAttribute("position",new o(h,3)),e.addAttribute("color",new o(p,3)),h=new j({vertexColors:2}),g.call(this,e,h)}function tn(e,t,n,s){this.object=e,this.size=void 0!==t?t:1,e=void 0!==n?n:16776960,s=void 0!==s?s:1,t=0,(n=this.object.geometry)&&n.isGeometry?t=n.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead."),n=new i,t=new o(6*t,3),n.addAttribute("position",t),g.call(this,n,new j({color:e,linewidth:s})),this.matrixAutoUpdate=!1,this.update()}function Pe(e,t){s.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,void 0===t&&(t=1);var a,n=new i;n.addAttribute("position",new o([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3)),a=new j({fog:!1}),this.add(new ee(n,a)),(n=new i).addAttribute("position",new o([0,0,0,0,0,1],3)),this.add(new ee(n,a)),this.update()}function Pt(e){function t(e,t,n){h(e,n),h(t,n)}function h(e,t){d.push(0,0,0),m.push(t.r,t.g,t.b),void 0===r[e]&&(r[e]=[]),r[e].push(d.length/3-1)}var l=new i,f=new j({color:16777215,vertexColors:1}),d=[],m=[],r={},n=new a(16755200),c=new a(16711680),u=new a(43775),p=new a(16777215),s=new a(3355443);t("n1","n2",n),t("n2","n4",n),t("n4","n3",n),t("n3","n1",n),t("f1","f2",n),t("f2","f4",n),t("f4","f3",n),t("f3","f1",n),t("n1","f1",n),t("n2","f2",n),t("n3","f3",n),t("n4","f4",n),t("p","n1",c),t("p","n2",c),t("p","n3",c),t("p","n4",c),t("u1","u2",u),t("u2","u3",u),t("u3","u1",u),t("c","t",p),t("p","c",s),t("cn1","cn2",s),t("cn3","cn4",s),t("cf1","cf2",s),t("cf3","cf4",s),l.addAttribute("position",new o(d,3)),l.addAttribute("color",new o(m,3)),g.call(this,l,f),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=r,this.update()}function Re(e,t){void 0===t&&(t=16776960);var s=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new Float32Array(24),n=new i;n.setIndex(new u(s,1)),n.addAttribute("position",new u(o,3)),g.call(this,n,new j({color:t})),void 0!==e&&this.update(e)}function re(e,t,n,a,r,c){s.call(this),void 0===a&&(a=16776960),void 0===n&&(n=1),void 0===r&&(r=.2*n),void 0===c&&(c=.2*r),void 0===vs&&((vs=new i).addAttribute("position",new o([0,0,0,0,1,0],3)),(Ms=new J(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new ee(vs,new j({color:a})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new _(Ms,new M({color:a})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,c)}function Bn(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e];(e=new i).addAttribute("position",new o(t,3)),e.addAttribute("color",new o([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),t=new j({vertexColors:2}),g.call(this,e,t)}function Qn(){var e=0,t=0,n=0,s=0;return{initCatmullRom:function(o,i,a,r,c){e=i,t=o=c*(a-o),n=-3*i+3*a-2*o-(r=c*(r-i)),s=2*i-2*a+o+r},initNonuniformCatmullRom:function(o,i,a,r,c,l,d){e=i,t=o=((i-o)/c-(a-o)/(c+l)+(a-i)/l)*l,n=-3*i+3*a-2*o-(r=((a-i)/l-(r-i)/(l+d)+(r-a)/d)*l),s=2*i-2*a+o+r},calc:function(o){var i=o*o;return e+t*o+n*i+s*i*o}}}function W(e){this.points=e||[],this.closed=!1}function zt(e,t,n,s){this.v0=e,this.v1=t,this.v2=n,this.v3=s}function Ft(e,t,n){this.v0=e,this.v1=t,this.v2=n}function kt(e,t){this.v1=e,this.v2=t}function _n(e,t,n,s,o,i){Q.call(this,e,t,n,n,s,o,i)}function Qs(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),W.call(this,e),this.type="catmullrom",this.closed=!0}function Ys(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),W.call(this,e),this.type="catmullrom"}function Jn(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),W.call(this,e),this.type="catmullrom"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(e){return 0>e?-1:0<e?1:+e}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t,s,o=Object(e),n=1;n<arguments.length;n++)if(t=arguments[n],t!=null)for(s in t)Object.prototype.hasOwnProperty.call(t,s)&&(o[s]=t[s]);return o}),X.prototype={addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var s,n=this._listeners[e];void 0!==n&&(s=n.indexOf(t),-1!==s&&n.splice(s,1))}},dispatchEvent:function(e){if(void 0!==this._listeners&&(n=this._listeners[e.type],void 0!==n)){e.target=this;var t,n,s=[],o=n.length;for(t=0;t<o;t++)s[t]=n[t];for(t=0;t<o;t++)s[t].call(this,e)}}},l={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:(Rs="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),rn=Array(36),nn=0,function(){for(var e=0;36>e;e++)8===e||13===e||18===e||23===e?rn[e]="-":14===e?rn[e]="4":(2>=nn&&(nn=33554432+16777216*Math.random()|0),ss=15&nn,nn>>=4,rn[e]=Rs[19===e?3&ss|8:ss]);return rn.join("")}),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,s,o){return s+(e-t)*(o-s)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*l.DEG2RAD},radToDeg:function(e){return e*l.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}},n.prototype={constructor:n,isVector2:!0,get width(){return this.x},set width(e){this.x=e},get height(){return this.y},set height(e){this.y=e},set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e):this.y=this.x=0,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e,t;return function(s,o){return void 0===e&&(e=new n,t=new n),e.set(s,s),t.set(o,o),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var e=Math.atan2(this.y,this.x);return 0>e&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x;return t*t+(e=this.y-e.y)*e},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),s=Math.sin(t),o=this.x-e.x,i=this.y-e.y;return this.x=o*n-i*s+e.x,this.y=o*s+i*n+e.y,this}},Es=0,p.DEFAULT_IMAGE=void 0,p.DEFAULT_MAPPING=300,p.prototype={constructor:p,isTexture:!0,set needsUpdate(e){!0===e&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){if(void 0!==e.textures[this.uuid])return e.textures[this.uuid];if(s={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY},void 0!==this.image){if(t=this.image,void 0===t.uuid&&(t.uuid=l.generateUUID()),void 0===e.images[t.uuid]){var t,n,s,o=e.images,i=t.uuid,a=t.uuid;void 0!==t.toDataURL?n=t:((n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=t.width,n.height=t.height,n.getContext("2d").drawImage(t,0,0,t.width,t.height)),n=2048<n.width||2048<n.height?n.toDataURL("image/jpeg",.6):n.toDataURL("image/png"),o[i]={uuid:a,url:n}}s.image=t.uuid}return e.textures[this.uuid]=s},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300===this.mapping){if(e.multiply(this.repeat),e.add(this.offset),0>e.x||1<e.x)switch(this.wrapS){case 1e3:e.x-=Math.floor(e.x);break;case 1001:e.x=0>e.x?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(0>e.y||1<e.y)switch(this.wrapT){case 1e3:e.y-=Math.floor(e.y);break;case 1001:e.y=0>e.y?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}},Object.assign(p.prototype,X.prototype),f.prototype={constructor:f,isVector4:!0,set:function(e,t,n,s){return this.x=e,this.y=t,this.z=n,this.w=s,this},setScalar:function(e){return this.w=this.z=this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e,this.w*=e):this.w=this.z=this.y=this.x=0,this},applyMatrix4:function(e){var t=this.x,n=this.y,s=this.z,o=this.w;return e=e.elements,this.x=e[0]*t+e[4]*n+e[8]*s+e[12]*o,this.y=e[1]*t+e[5]*n+e[9]*s+e[13]*o,this.z=e[2]*t+e[6]*n+e[10]*s+e[14]*o,this.w=e[3]*t+e[7]*n+e[11]*s+e[15]*o,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return 1e-4>t?(this.x=1,this.z=this.y=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,r=(e=e.elements)[0],t=e[4],o=e[8],l=e[1],c=e[5],i=e[9],s=e[2],n=e[6],a=e[10];return.01>Math.abs(t-l)&&.01>Math.abs(o-s)&&.01>Math.abs(i-n)?.1>Math.abs(t+l)&&.1>Math.abs(o+s)&&.1>Math.abs(i+n)&&.1>Math.abs(r+c+a-3)?(this.set(1,0,0,0),this):(e=Math.PI,a=(a+1)/2,t=(t+l)/4,o=(o+s)/4,i=(i+n)/4,(r=(r+1)/2)>(c=(c+1)/2)&&r>a?.01>r?(n=0,t=s=.707106781):(s=t/(n=Math.sqrt(r)),t=o/n):c>a?.01>c?(n=.707106781,s=0,t=.707106781):(n=t/(s=Math.sqrt(c)),t=i/s):.01>a?(s=n=.707106781,t=0):(n=o/(t=Math.sqrt(a)),s=i/t),this.set(n,s,t,e),this):(e=Math.sqrt((n-i)*(n-i)+(o-s)*(o-s)+(l-t)*(l-t)),.001>Math.abs(e)&&(e=1),this.x=(n-i)/e,this.y=(o-s)/e,this.z=(l-t)/e,this.w=Math.acos((r+c+a-1)/2),this)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,s){return void 0===e&&(e=new f,t=new f),e.set(n,n,n,n),t.set(s,s,s,s),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},oe.prototype={constructor:oe,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(oe.prototype,X.prototype),Ne.prototype=Object.create(oe.prototype),Ne.prototype.constructor=Ne,Ne.prototype.isWebGLRenderTargetCube=!0,y.prototype={constructor:y,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,n,s){return this._x=e,this._y=t,this._z=n,this._w=s,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!1===(e&&e.isEuler))throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=Math.cos(e._x/2),s=Math.cos(e._y/2),o=Math.cos(e._z/2),i=Math.sin(e._x/2),a=Math.sin(e._y/2),r=Math.sin(e._z/2),c=e.order;return"XYZ"===c?(this._x=i*s*o+n*a*r,this._y=n*a*o-i*s*r,this._z=n*s*r+i*a*o,this._w=n*s*o-i*a*r):"YXZ"===c?(this._x=i*s*o+n*a*r,this._y=n*a*o-i*s*r,this._z=n*s*r-i*a*o,this._w=n*s*o+i*a*r):"ZXY"===c?(this._x=i*s*o-n*a*r,this._y=n*a*o+i*s*r,this._z=n*s*r+i*a*o,this._w=n*s*o-i*a*r):"ZYX"===c?(this._x=i*s*o-n*a*r,this._y=n*a*o+i*s*r,this._z=n*s*r-i*a*o,this._w=n*s*o+i*a*r):"YZX"===c?(this._x=i*s*o+n*a*r,this._y=n*a*o+i*s*r,this._z=n*s*r-i*a*o,this._w=n*s*o-i*a*r):"XZY"===c&&(this._x=i*s*o-n*a*r,this._y=n*a*o-i*s*r,this._z=n*s*r+i*a*o,this._w=n*s*o+i*a*r),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var s=t/2,n=Math.sin(s);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(s),this.onChangeCallback(),this},setFromRotationMatrix:function(e){t=(n=e.elements)[0],e=n[4];var t,n,o=n[8],i=n[1],s=n[5],a=n[9],r=n[2],c=n[6],l=t+s+(n=n[10]);return 0<l?(t=.5/Math.sqrt(l+1),this._w=.25/t,this._x=(c-a)*t,this._y=(o-r)*t,this._z=(i-e)*t):t>s&&t>n?(t=2*Math.sqrt(1+t-s-n),this._w=(c-a)/t,this._x=.25*t,this._y=(e+i)/t,this._z=(o+r)/t):s>n?(t=2*Math.sqrt(1+s-t-n),this._w=(o-r)/t,this._x=(e+i)/t,this._y=.25*t,this._z=(a+c)/t):(t=2*Math.sqrt(1+n-t-s),this._w=(i-e)/t,this._x=(o+r)/t,this._y=(a+c)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,n;return function(s,o){return void 0===e&&(e=new t),1e-6>(n=s.dot(o)+1)?(n=0,Math.abs(s.x)>Math.abs(s.z)?e.set(-s.y,s.x,0):e.set(0,-s.z,s.y)):e.crossVectors(s,o),this._x=e.x,this._y=e.y,this._z=e.z,this._w=n,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._z=this._y=this._x=0,this._w=1):(e=1/e,this._x*=e,this._y*=e,this._z*=e,this._w*=e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,s=e._y,o=e._z,i=e._w,a=t._x,r=t._y,c=t._z,l=t._w;return this._x=n*l+i*a+s*c-o*r,this._y=s*l+i*r+o*a-n*c,this._z=o*l+i*c+n*r-s*a,this._w=i*l-n*a-s*r-o*c,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n,s,c,o=this._x,i=this._y,a=this._z,r=this._w;return 0>(n=r*e._w+o*e._x+i*e._y+a*e._z)?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,n=-n):this.copy(e),1<=n?(this._w=r,this._x=o,this._y=i,this._z=a,this):(s=Math.sqrt(1-n*n),.001>Math.abs(s)?(this._w=.5*(r+this._w),this._x=.5*(o+this._x),this._y=.5*(i+this._y),this._z=.5*(a+this._z),this):(c=Math.atan2(s,n),n=Math.sin((1-t)*c)/s,s=Math.sin(t*c)/s,this._w=r*n+this._w*s,this._x=o*n+this._x*s,this._y=i*n+this._y*s,this._z=a*n+this._z*s,this.onChangeCallback(),this))},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},Object.assign(y,{slerp:function(e,t,n,s){return n.copy(e).slerp(t,s)},slerpFlat:function(e,t,n,s,o,i,a){var m,f,r=n[s+0],c=n[s+1],l=n[s+2];if(n=n[s+3],s=o[i+0],m=o[i+1],f=o[i+2],n!==(o=o[i+3])||r!==s||c!==m||l!==f){i=1-a;var d=r*s+c*m+l*f+n*o,h=0<=d?1:-1,u=1-d*d;u>Number.EPSILON&&(u=Math.sqrt(u),d=Math.atan2(u,d*h),i=Math.sin(i*d)/u,a=Math.sin(a*d)/u),r=r*i+s*(h*=a),c=c*i+m*h,l=l*i+f*h,n=n*i+o*h,i===1-a&&(r*=a=1/Math.sqrt(r*r+c*c+l*l+n*n),c*=a,l*=a,n*=a)}e[t]=r,e[t+1]=c,e[t+2]=l,e[t+3]=n}}),t.prototype={constructor:t,isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.z=this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e):this.z=this.y=this.x=0,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e;return function(t){return!1===(t&&t.isEuler)&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===e&&(e=new y),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e;return function(t,n){return void 0===e&&(e=new y),this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,s=this.z;return e=e.elements,this.x=e[0]*t+e[3]*n+e[6]*s,this.y=e[1]*t+e[4]*n+e[7]*s,this.z=e[2]*t+e[5]*n+e[8]*s,this},applyMatrix4:function(e){var t=this.x,n=this.y,s=this.z;return e=e.elements,this.x=e[0]*t+e[4]*n+e[8]*s+e[12],this.y=e[1]*t+e[5]*n+e[9]*s+e[13],this.z=e[2]*t+e[6]*n+e[10]*s+e[14],this.divideScalar(e[3]*t+e[7]*n+e[11]*s+e[15])},applyQuaternion:function(e){var t=this.x,i=this.y,a=this.z,n=e.x,s=e.y,o=e.z,r=(e=e.w)*t+s*a-o*i,c=e*i+o*t-n*a,l=e*a+n*i-s*t,t=-n*t-s*i-o*a;return this.x=r*e+t*-n+c*-o-l*-s,this.y=c*e+t*-s+l*-n-r*-o,this.z=l*e+t*-o+r*-s-c*-n,this},project:function(){var e;return function(t){return void 0===e&&(e=new r),e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e;return function(t){return void 0===e&&(e=new r),e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,s=this.z;return e=e.elements,this.x=e[0]*t+e[4]*n+e[8]*s,this.y=e[1]*t+e[5]*n+e[9]*s,this.z=e[2]*t+e[6]*n+e[10]*s,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e,n;return function(s,o){return void 0===e&&(e=new t,n=new t),e.set(s,s,s),n.set(o,o,o),this.clamp(e,n)}}(),clampLength:function(e,t){var n=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var n=this.x,s=this.y,o=this.z;return this.x=s*e.z-o*e.y,this.y=o*e.x-n*e.z,this.z=n*e.y-s*e.x,this},crossVectors:function(e,t){var n=e.x,s=e.y,o=e.z,i=t.x,a=t.y,r=t.z;return this.x=s*r-o*a,this.y=o*i-n*r,this.z=n*a-s*i,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e;return function(n){return void 0===e&&(e=new t),e.copy(this).projectOnVector(n),this.sub(e)}}(),reflect:function(){var e;return function(n){return void 0===e&&(e=new t),this.sub(e.copy(n).multiplyScalar(2*this.dot(n)))}}(),angleTo:function(e){return e=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq()),Math.acos(l.clamp(e,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n+(e=this.z-e.z)*e},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){return this.setFromMatrixColumn(e,3)},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length();return e=this.setFromMatrixColumn(e,2).length(),this.x=t,this.y=n,this.z=e,this},setFromMatrixColumn:function(e,t){if("number"==typeof e){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var n=e;e=t,t=n}return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},r.prototype={constructor:r,isMatrix4:!0,set:function(e,t,n,s,o,i,a,r,c,l,d,u,h,m,f,p){var g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=s,g[1]=o,g[5]=i,g[9]=a,g[13]=r,g[2]=c,g[6]=l,g[10]=d,g[14]=u,g[3]=h,g[7]=m,g[11]=f,g[15]=p,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new r).fromArray(this.elements)},copy:function(e){return this.elements.set(e.elements),this},copyPosition:function(e){var t=this.elements;return e=e.elements,t[12]=e[12],t[13]=e[13],t[14]=e[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e;return function(n){void 0===e&&(e=new t);var s=this.elements,o=n.elements,i=1/e.setFromMatrixColumn(n,0).length(),a=1/e.setFromMatrixColumn(n,1).length();return n=1/e.setFromMatrixColumn(n,2).length(),s[0]=o[0]*i,s[1]=o[1]*i,s[2]=o[2]*i,s[4]=o[4]*a,s[5]=o[5]*a,s[6]=o[6]*a,s[8]=o[8]*n,s[9]=o[9]*n,s[10]=o[10]*n,this}}(),makeRotationFromEuler:function(e){!1===(e&&e.isEuler)&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,s=e.y,o=e.z,i=Math.cos(n),a=(n=Math.sin(n),Math.cos(s)),r=(s=Math.sin(s),Math.cos(o)),o=Math.sin(o);if("XYZ"===e.order){e=i*r;var c=i*o,l=n*r,d=n*o;t[0]=a*r,t[4]=-a*o,t[8]=s,t[1]=c+l*s,t[5]=e-d*s,t[9]=-n*a,t[2]=d-e*s,t[6]=l+c*s,t[10]=i*a}else"YXZ"===e.order?(e=a*r,c=a*o,l=s*r,d=s*o,t[0]=e+d*n,t[4]=l*n-c,t[8]=i*s,t[1]=i*o,t[5]=i*r,t[9]=-n,t[2]=c*n-l,t[6]=d+e*n,t[10]=i*a):"ZXY"===e.order?(e=a*r,c=a*o,l=s*r,d=s*o,t[0]=e-d*n,t[4]=-i*o,t[8]=l+c*n,t[1]=c+l*n,t[5]=i*r,t[9]=d-e*n,t[2]=-i*s,t[6]=n,t[10]=i*a):"ZYX"===e.order?(e=i*r,c=i*o,l=n*r,d=n*o,t[0]=a*r,t[4]=l*s-c,t[8]=e*s+d,t[1]=a*o,t[5]=d*s+e,t[9]=c*s-l,t[2]=-s,t[6]=n*a,t[10]=i*a):"YZX"===e.order?(e=i*a,c=i*s,l=n*a,d=n*s,t[0]=a*r,t[4]=d-e*o,t[8]=l*o+c,t[1]=o,t[5]=i*r,t[9]=-n*r,t[2]=-s*r,t[6]=c*o+l,t[10]=e-d*o):"XZY"===e.order&&(e=i*a,c=i*s,l=n*a,d=n*s,t[0]=a*r,t[4]=-o,t[8]=s*r,t[1]=e*o+d,t[5]=i*r,t[9]=c*o-l,t[2]=l*o-c,t[6]=n*r,t[10]=d*o+e);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,n=e.x,s=e.y,o=e.z,i=e.w,r=o+o;e=n*(c=n+n);var l=n*(a=s+s),d=(n=n*r,s*a),c=(s=s*r,o=o*r,i*c),a=i*a;return i*=r,t[0]=1-(d+o),t[4]=l-i,t[8]=n+a,t[1]=l+i,t[5]=1-(e+o),t[9]=s-c,t[2]=n-a,t[6]=s+c,t[10]=1-(e+d),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e,n,s;return function(o,i,a){void 0===n&&(n=new t,s=new t,e=new t);var r=this.elements;return e.subVectors(o,i).normalize(),0===e.lengthSq()&&(e.z=1),n.crossVectors(a,e).normalize(),0===n.lengthSq()&&(e.z+=1e-4,n.crossVectors(a,e).normalize()),s.crossVectors(e,n),r[0]=n.x,r[4]=s.x,r[8]=e.x,r[1]=n.y,r[5]=s.y,r[9]=e.y,r[2]=n.z,r[6]=s.z,r[10]=e.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,s=t.elements,o=this.elements,i=n[0],a=n[4],r=n[8],c=n[12],l=n[1],d=n[5],u=n[9],h=n[13],m=n[2],f=n[6],p=n[10],g=n[14],v=n[3],b=n[7],j=n[11],y=(n=n[15],s[0]),_=s[4],w=s[8],O=s[12],x=s[1],C=s[5],E=s[9],k=s[13],A=s[2],S=s[6],M=s[10],F=s[14],T=s[3],z=s[7],D=s[11],s=s[15];return o[0]=i*y+a*x+r*A+c*T,o[4]=i*_+a*C+r*S+c*z,o[8]=i*w+a*E+r*M+c*D,o[12]=i*O+a*k+r*F+c*s,o[1]=l*y+d*x+u*A+h*T,o[5]=l*_+d*C+u*S+h*z,o[9]=l*w+d*E+u*M+h*D,o[13]=l*O+d*k+u*F+h*s,o[2]=m*y+f*x+p*A+g*T,o[6]=m*_+f*C+p*S+g*z,o[10]=m*w+f*E+p*M+g*D,o[14]=m*O+f*k+p*F+g*s,o[3]=v*y+b*x+j*A+n*T,o[7]=v*_+b*C+j*S+n*z,o[11]=v*w+b*E+j*M+n*D,o[15]=v*O+b*k+j*F+n*s,this},multiplyToArray:function(e,t,n){var s=this.elements;return this.multiplyMatrices(e,t),n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8],n[9]=s[9],n[10]=s[10],n[11]=s[11],n[12]=s[12],n[13]=s[13],n[14]=s[14],n[15]=s[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e;return function(n){void 0===e&&(e=new t);for(var s=0,o=n.count;s<o;s++)e.x=n.getX(s),e.y=n.getY(s),e.z=n.getZ(s),e.applyMatrix4(this),n.setXYZ(s,e.x,e.y,e.z);return n}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],s=e[8],o=e[12],i=e[1],a=e[5],r=e[9],c=e[13],l=e[2],d=e[6],u=e[10],h=e[14];return e[3]*(+o*r*d-s*c*d-o*a*u+n*c*u+s*a*h-n*r*h)+e[7]*(+t*r*h-t*c*u+o*i*u-s*i*h+s*c*l-o*r*l)+e[11]*(+t*c*d-t*a*h-o*i*d+n*i*h+o*a*l-n*c*l)+e[15]*(-s*a*l-t*r*d+t*a*u+s*i*d-n*i*u+n*r*l)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n,j=this.elements,o=(n=e.elements)[0],i=n[1],a=n[2],r=n[3],h=n[4],p=n[5],d=n[6],u=n[7],c=n[8],m=n[9],f=n[10],l=n[11],g=n[12],v=n[13],b=n[14],y=m*b*u-v*f*u+v*d*l-p*b*l-m*d*(n=n[15])+p*f*n,_=g*f*u-c*b*u-g*d*l+h*b*l+c*d*n-h*f*n,w=c*v*u-g*m*u+g*p*l-h*v*l-c*p*n+h*m*n,O=g*m*d-c*v*d-g*p*f+h*v*f+c*p*b-h*m*b,s=o*y+i*_+a*w+r*O;if(0===s){if(!0===t)throw Error("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");return console.warn("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0"),this.identity()}return s=1/s,j[0]=y*s,j[1]=(v*f*r-m*b*r-v*a*l+i*b*l+m*a*n-i*f*n)*s,j[2]=(p*b*r-v*d*r+v*a*u-i*b*u-p*a*n+i*d*n)*s,j[3]=(m*d*r-p*f*r-m*a*u+i*f*u+p*a*l-i*d*l)*s,j[4]=_*s,j[5]=(c*b*r-g*f*r+g*a*l-o*b*l-c*a*n+o*f*n)*s,j[6]=(g*d*r-h*b*r-g*a*u+o*b*u+h*a*n-o*d*n)*s,j[7]=(h*f*r-c*d*r+c*a*u-o*f*u-h*a*l+o*d*l)*s,j[8]=w*s,j[9]=(g*m*r-c*v*r-g*i*l+o*v*l+c*i*n-o*m*n)*s,j[10]=(h*v*r-g*p*r+g*i*u-o*v*u-h*i*n+o*p*n)*s,j[11]=(c*p*r-h*m*r-c*i*u+o*m*u+h*i*l-o*p*l)*s,j[12]=O*s,j[13]=(c*v*a-g*m*a+g*i*f-o*v*f-c*i*b+o*m*b)*s,j[14]=(g*p*a-h*v*a-g*i*d+o*v*d+h*i*b-o*p*b)*s,j[15]=(h*m*a-c*p*a+c*i*d-o*m*d-h*i*f+o*p*f)*s,this},scale:function(e){var t=this.elements,n=e.x,s=e.y;return e=e.z,t[0]*=n,t[4]*=s,t[8]*=e,t[1]*=n,t[5]*=s,t[9]*=e,t[2]*=n,t[6]*=s,t[10]*=e,t[3]*=n,t[7]*=s,t[11]*=e,this},getMaxScaleOnAxis:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var a=Math.cos(t),s=Math.sin(t),c=1-a,r=e.x,o=e.y,n=e.z,i=c*r,l=c*o;return this.set(i*r+a,i*o-s*n,i*n+s*o,0,i*o+s*n,l*o+a,l*n-s*r,0,i*n-s*o,l*n+s*r,c*n*n+a,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:function(){var e,n;return function(s,o,i){void 0===n&&(n=new t,e=new r);var l,a=this.elements,c=n.set(a[0],a[1],a[2]).length(),d=n.set(a[4],a[5],a[6]).length(),u=n.set(a[8],a[9],a[10]).length();return 0>this.determinant()&&(c=-c),s.x=a[12],s.y=a[13],s.z=a[14],e.elements.set(this.elements),s=1/c,a=1/d,l=1/u,e.elements[0]*=s,e.elements[1]*=s,e.elements[2]*=s,e.elements[4]*=a,e.elements[5]*=a,e.elements[6]*=a,e.elements[8]*=l,e.elements[9]*=l,e.elements[10]*=l,o.setFromRotationMatrix(e),i.x=c,i.y=d,i.z=u,this}}(),makePerspective:function(e,t,n,s,o,i){void 0===i&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements;return a[0]=2*o/(t-e),a[4]=0,a[8]=(t+e)/(t-e),a[12]=0,a[1]=0,a[5]=2*o/(n-s),a[9]=(n+s)/(n-s),a[13]=0,a[2]=0,a[6]=0,a[10]=-(i+o)/(i-o),a[14]=-2*i*o/(i-o),a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,s,o,i){var a=this.elements,r=1/(t-e),c=1/(n-s),l=1/(i-o);return a[0]=2*r,a[4]=0,a[8]=0,a[12]=-(t+e)*r,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-(n+s)*c,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-(i+o)*l,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){var t,n=this.elements;e=e.elements;for(t=0;16>t;t++)if(n[t]!==e[t])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;16>n;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}},se.prototype=Object.create(p.prototype),se.prototype.constructor=se,se.prototype.isCubeTexture=!0,Object.defineProperty(se.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var l,d,m,O,A,P,H,G,Z,ss,Rs,rn,nn,Es,Cs=new p,Ts=new se,$s=[],Us=[],Wn,Xs,Zs,Js,Sn,qs,zn,Tn,vs,Ms,gn;As.prototype.setValue=function(e,t){for(var s,o=this.seq,n=0,i=o.length;n!==i;++n)s=o[n],s.setValue(e,t[s.id])},Wn=/([\w\d_]+)(\])?(\[|\.)?/g,ae.prototype.setValue=function(e,t,n){void 0!==(t=this.map[t])&&t.setValue(e,n,this.renderer)},ae.prototype.set=function(e,t,n){var s=this.map[n];void 0!==s&&s.setValue(e,t[n],this.renderer)},ae.prototype.setOptional=function(e,t,n){void 0!==(t=t[n])&&this.setValue(e,n,t)},ae.upload=function(e,t,n,s){for(var i,a,o=0,r=t.length;o!==r;++o)i=t[o],a=n[i.id],!1!==a.needsUpdate&&i.setValue(e,a.value,s)},ae.seqWithValue=function(e,t){for(var s,o=[],n=0,i=e.length;n!==i;++n)s=e[n],s.id in t&&o.push(s);return o},A={merge:function(e){for(var n,s,o={},t=0;t<e.length;t++){s=this.clone(e[t]);for(n in s)o[n]=s[n]}return o},clone:function(e){var t,n,o,s={};for(n in e)for(o in s[n]={},e[n])t=e[n][o],t&&(t.isColor||t.isMatrix3||t.isMatrix4||t.isVector2||t.isVector3||t.isVector4||t.isTexture)?s[n][o]=t.clone():Array.isArray(t)?s[n][o]=t.slice():s[n][o]=t;return s}},m={alphamap_fragment:`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif
`,alphamap_pars_fragment:`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif
`,alphatest_fragment:`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif
`,aomap_fragment:`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( PHYSICAL )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif
`,aomap_pars_fragment:`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex:`
vec3 transformed = vec3( position );
`,beginnormal_vertex:`
vec3 objectNormal = vec3( normal );
`,bsdfs:`float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
		if( decayExponent > 0.0 ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
			float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
			float maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
			return distanceFalloff * maxDistanceCutoffFactor;
#else
			return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
#endif
		}
		return 1.0;
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;
	const float LUT_BIAS  = 0.5/LUT_SIZE;
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 P = geometry.position;
	float theta = acos( dot( N, V ) );
	vec2 uv = vec2(
		sqrt( saturate( roughness ) ),
		saturate( theta / ( 0.5 * PI ) ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
void clipQuadToHorizon( inout vec3 L[5], out int n ) {
	int config = 0;
	if ( L[0].z > 0.0 ) config += 1;
	if ( L[1].z > 0.0 ) config += 2;
	if ( L[2].z > 0.0 ) config += 4;
	if ( L[3].z > 0.0 ) config += 8;
	n = 0;
	if ( config == 0 ) {
	} else if ( config == 1 ) {
		n = 3;
		L[1] = -L[1].z * L[0] + L[0].z * L[1];
		L[2] = -L[3].z * L[0] + L[0].z * L[3];
	} else if ( config == 2 ) {
		n = 3;
		L[0] = -L[0].z * L[1] + L[1].z * L[0];
		L[2] = -L[2].z * L[1] + L[1].z * L[2];
	} else if ( config == 3 ) {
		n = 4;
		L[2] = -L[2].z * L[1] + L[1].z * L[2];
		L[3] = -L[3].z * L[0] + L[0].z * L[3];
	} else if ( config == 4 ) {
		n = 3;
		L[0] = -L[3].z * L[2] + L[2].z * L[3];
		L[1] = -L[1].z * L[2] + L[2].z * L[1];
	} else if ( config == 5 ) {
		n = 0;
	} else if ( config == 6 ) {
		n = 4;
		L[0] = -L[0].z * L[1] + L[1].z * L[0];
		L[3] = -L[3].z * L[2] + L[2].z * L[3];
	} else if ( config == 7 ) {
		n = 5;
		L[4] = -L[3].z * L[0] + L[0].z * L[3];
		L[3] = -L[3].z * L[2] + L[2].z * L[3];
	} else if ( config == 8 ) {
		n = 3;
		L[0] = -L[0].z * L[3] + L[3].z * L[0];
		L[1] = -L[2].z * L[3] + L[3].z * L[2];
		L[2] =  L[3];
	} else if ( config == 9 ) {
		n = 4;
		L[1] = -L[1].z * L[0] + L[0].z * L[1];
		L[2] = -L[2].z * L[3] + L[3].z * L[2];
	} else if ( config == 10 ) {
		n = 0;
	} else if ( config == 11 ) {
		n = 5;
		L[4] = L[3];
		L[3] = -L[2].z * L[3] + L[3].z * L[2];
		L[2] = -L[2].z * L[1] + L[1].z * L[2];
	} else if ( config == 12 ) {
		n = 4;
		L[1] = -L[1].z * L[2] + L[2].z * L[1];
		L[0] = -L[0].z * L[3] + L[3].z * L[0];
	} else if ( config == 13 ) {
		n = 5;
		L[4] = L[3];
		L[3] = L[2];
		L[2] = -L[1].z * L[2] + L[2].z * L[1];
		L[1] = -L[1].z * L[0] + L[0].z * L[1];
	} else if ( config == 14 ) {
		n = 5;
		L[4] = -L[0].z * L[3] + L[3].z * L[0];
		L[0] = -L[0].z * L[1] + L[1].z * L[0];
	} else if ( config == 15 ) {
		n = 4;
	}
	if ( n == 3 )
		L[3] = L[0];
	if ( n == 4 )
		L[4] = L[0];
}
float integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {
	float cosTheta = dot( v1, v2 );
	float theta = acos( cosTheta );
	float res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );
	return res;
}
void initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {
	rectPoints[0] = pos - halfWidth - halfHeight;
	rectPoints[1] = pos + halfWidth - halfHeight;
	rectPoints[2] = pos + halfWidth + halfHeight;
	rectPoints[3] = pos - halfWidth + halfHeight;
}
vec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 P = geometry.position;
	vec3 T1, T2;
	T1 = normalize(V - N * dot( V, N ));
	T2 = - cross( N, T1 );
	mat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );
	vec3 clippedRect[5];
	clippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );
	clippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );
	clippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );
	clippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );
	int n;
	clipQuadToHorizon(clippedRect, n);
	if ( n == 0 )
		return vec3( 0, 0, 0 );
	clippedRect[0] = normalize( clippedRect[0] );
	clippedRect[1] = normalize( clippedRect[1] );
	clippedRect[2] = normalize( clippedRect[2] );
	clippedRect[3] = normalize( clippedRect[3] );
	clippedRect[4] = normalize( clippedRect[4] );
	float sum = 0.0;
	sum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );
	sum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );
	sum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );
	if (n >= 4)
		sum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );
	if (n == 5)
		sum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );
	sum = max( 0.0, sum );
	vec3 Lo_i = vec3( sum, sum, sum );
	return Lo_i;
}
vec3 Rect_Area_Light_Specular_Reflectance(
		const in GeometricContext geometry,
		const in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,
		const in float roughness,
		const in sampler2D ltcMat, const in sampler2D ltcMag ) {
	vec3 rectPoints[4];
	initRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );
	vec2 uv = ltcTextureCoords( geometry, roughness );
	vec4 brdfLtcApproxParams, t;
	brdfLtcApproxParams = texture2D( ltcMat, uv );
	t = texture2D( ltcMat, uv );
	float brdfLtcScalar = texture2D( ltcMag, uv ).a;
	mat3 brdfLtcApproxMat = mat3(
		vec3(   1,   0, t.y ),
		vec3(   0, t.z,   0 ),
		vec3( t.w,   0, t.x )
	);
	vec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );
	specularReflectance *= brdfLtcScalar;
	return specularReflectance;
}
vec3 Rect_Area_Light_Diffuse_Reflectance(
		const in GeometricContext geometry,
		const in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {
	vec3 rectPoints[4];
	initRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );
	mat3 diffuseBrdfMat = mat3(1);
	vec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );
	return diffuseReflectance;
}
vec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;
	return specularColor * AB.x + AB.y;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
`,bumpmap_pars_fragment:`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = dFdx( surf_pos );
		vec3 vSigmaY = dFdy( surf_pos );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif
`,clipping_planes_fragment:`#if NUM_CLIPPING_PLANES > 0
	for ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {
		vec4 plane = clippingPlanes[ i ];
		if ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;
	}
		
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {
			vec4 plane = clippingPlanes[ i ];
			clipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;
		}
		if ( clipped ) discard;
	
	#endif
#endif
`,clipping_planes_pars_fragment:`#if NUM_CLIPPING_PLANES > 0
	#if ! defined( PHYSICAL ) && ! defined( PHONG )
		varying vec3 vViewPosition;
	#endif
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif
`,clipping_planes_pars_vertex:`#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )
	varying vec3 vViewPosition;
#endif
`,clipping_planes_vertex:`#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )
	vViewPosition = - mvPosition.xyz;
#endif
`,color_fragment:`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment:`#ifdef USE_COLOR
	varying vec3 vColor;
#endif
`,color_pars_vertex:`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_vertex:`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,common:`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#define saturate(a) clamp( a, 0.0, 1.0 )
#define whiteCompliment(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transpose( const in mat3 v ) {
	mat3 tmp;
	tmp[0] = vec3(v[0].x, v[1].x, v[2].x);
	tmp[1] = vec3(v[0].y, v[1].y, v[2].y);
	tmp[2] = vec3(v[0].z, v[1].z, v[2].z);
	return tmp;
}
`,cube_uv_reflection_fragment:`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_textureSize (1024.0)
int getFaceFromDirection(vec3 direction) {
	vec3 absDirection = abs(direction);
	int face = -1;
	if( absDirection.x > absDirection.z ) {
		if(absDirection.x > absDirection.y )
			face = direction.x > 0.0 ? 0 : 3;
		else
			face = direction.y > 0.0 ? 1 : 4;
	}
	else {
		if(absDirection.z > absDirection.y )
			face = direction.z > 0.0 ? 2 : 5;
		else
			face = direction.y > 0.0 ? 1 : 4;
	}
	return face;
}
#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)
#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))
vec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {
	float scale = exp2(cubeUV_maxLods1 - roughnessLevel);
	float dxRoughness = dFdx(roughness);
	float dyRoughness = dFdy(roughness);
	vec3 dx = dFdx( vec * scale * dxRoughness );
	vec3 dy = dFdy( vec * scale * dyRoughness );
	float d = max( dot( dx, dx ), dot( dy, dy ) );
	d = clamp(d, 1.0, cubeUV_rangeClamp);
	float mipLevel = 0.5 * log2(d);
	return vec2(floor(mipLevel), fract(mipLevel));
}
#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)
#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)
vec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {
	mipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;
	float a = 16.0 * cubeUV_rcpTextureSize;
	vec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );
	vec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;
	float powScale = exp2_packed.x * exp2_packed.y;
	float scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;
	float mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;
	bool bRes = mipLevel == 0.0;
	scale =  bRes && (scale < a) ? a : scale;
	vec3 r;
	vec2 offset;
	int face = getFaceFromDirection(direction);
	float rcpPowScale = 1.0 / powScale;
	if( face == 0) {
		r = vec3(direction.x, -direction.z, direction.y);
		offset = vec2(0.0+mipOffset,0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 1) {
		r = vec3(direction.y, direction.x, direction.z);
		offset = vec2(scale+mipOffset, 0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 2) {
		r = vec3(direction.z, direction.x, direction.y);
		offset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 3) {
		r = vec3(direction.x, direction.z, direction.y);
		offset = vec2(0.0+mipOffset,0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	else if( face == 4) {
		r = vec3(direction.y, direction.x, -direction.z);
		offset = vec2(scale+mipOffset, 0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	else {
		r = vec3(direction.z, -direction.x, direction.y);
		offset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	r = normalize(r);
	float texelOffset = 0.5 * cubeUV_rcpTextureSize;
	vec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;
	vec2 base = offset + vec2( texelOffset );
	return base + s * ( scale - 2.0 * texelOffset );
}
#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)
vec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {
	float roughnessVal = roughness* cubeUV_maxLods3;
	float r1 = floor(roughnessVal);
	float r2 = r1 + 1.0;
	float t = fract(roughnessVal);
	vec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);
	float s = mipInfo.y;
	float level0 = mipInfo.x;
	float level1 = level0 + 1.0;
	level1 = level1 > 5.0 ? 5.0 : level1;
	level0 += min( floor( s + 0.5 ), 5.0 );
	vec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);
	vec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));
	vec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);
	vec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));
	vec4 result = mix(color10, color20, t);
	return vec4(result.rgb, 1.0);
}
#endif
`,defaultnormal_vertex:`#ifdef FLIP_SIDED
	objectNormal = -objectNormal;
#endif
vec3 transformedNormal = normalMatrix * objectNormal;
`,displacementmap_pars_vertex:`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif
`,displacementmap_vertex:`#ifdef USE_DISPLACEMENTMAP
	transformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );
#endif
`,emissivemap_fragment:`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif
`,emissivemap_pars_fragment:`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif
`,encodings_fragment:`  gl_FragColor = linearToOutputTexel( gl_FragColor );
`,encodings_pars_fragment:`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.xyz * value.w * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.x, max( value.g, value.b ) );
	float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M            = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.x, max( value.g, value.b ) );
	float D      = max( maxRange / maxRGB, 1.0 );
	D            = min( floor( D ) / 255.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;
	Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract(Le);
	vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;
	return vec4( max(vRGB, 0.0), 1.0 );
}
`,envmap_fragment:`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToVertex, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		vec2 sampleUV;
		sampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );
		sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		vec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	envColor = envMapTexelToLinear( envColor );
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif
`,envmap_pars_fragment:`#if defined( USE_ENVMAP ) || defined( PHYSICAL )
	uniform float reflectivity;
	uniform float envMapIntensity;
#endif
#ifdef USE_ENVMAP
	#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )
		varying vec3 vWorldPosition;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	uniform float flipEnvMap;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif
`,envmap_pars_vertex:`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif
`,envmap_vertex:`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif
`,fog_vertex:`
#ifdef USE_FOG
fogDepth = -mvPosition.z;
#endif`,fog_pars_vertex:`#ifdef USE_FOG
  varying float fogDepth;
#endif
`,fog_fragment:`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif
`,fog_pars_fragment:`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif
`,gradientmap_pars_fragment:`#ifdef TOON
	uniform sampler2D gradientMap;
	vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
		float dotNL = dot( normal, lightDirection );
		vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
		#ifdef USE_GRADIENTMAP
			return texture2D( gradientMap, coord ).rgb;
		#else
			return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
		#endif
	}
#endif
`,lightmap_fragment:`#ifdef USE_LIGHTMAP
	reflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
#endif
`,lightmap_pars_fragment:`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex:`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
#if NUM_POINT_LIGHTS > 0
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_DIR_LIGHTS > 0
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_HEMI_LIGHTS > 0
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
#endif
`,lights_pars:`uniform vec3 ambientLightColor;
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltcMat;	uniform sampler2D ltcMag;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif
#if defined( USE_ENVMAP ) && defined( PHYSICAL )
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			vec4 envMapColor = textureCubeUV( queryVec, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );
		#else
			vec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			vec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV;
			sampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );
			sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif
`,lights_phong_fragment:`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;
`,lights_phong_pars_fragment:`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 matDiffColor = material.diffuseColor;
		vec3 matSpecColor = material.specularColor;
		vec3 lightColor   = rectAreaLight.color;
		float roughness = BlinnExponentToGGXRoughness( material.specularShininess );
		vec3 spec = Rect_Area_Light_Specular_Reflectance(
				geometry,
				rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,
				roughness,
				ltcMat, ltcMag );
		vec3 diff = Rect_Area_Light_Diffuse_Reflectance(
				geometry,
				rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );
		reflectedLight.directSpecular += lightColor * matSpecColor * spec / PI2;
		reflectedLight.directDiffuse  += lightColor * matDiffColor * diff / PI2;
	}
#endif
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	#ifdef TOON
		vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#else
		float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
		vec3 irradiance = dotNL * directLight.color;
	#endif
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_Direct_RectArea		RE_Direct_RectArea_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)
`,lights_physical_fragment:`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );
#ifdef STANDARD
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
	material.clearCoat = saturate( clearCoat );	material.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );
#endif
`,lights_physical_pars_fragment:`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
	#ifndef STANDARD
		float clearCoat;
		float clearCoatRoughness;
	#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearCoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 matDiffColor = material.diffuseColor;
		vec3 matSpecColor = material.specularColor;
		vec3 lightColor   = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 spec = Rect_Area_Light_Specular_Reflectance(
				geometry,
				rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,
				roughness,
				ltcMat, ltcMag );
		vec3 diff = Rect_Area_Light_Diffuse_Reflectance(
				geometry,
				rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );
		reflectedLight.directSpecular += lightColor * matSpecColor * spec;
		reflectedLight.directDiffuse  += lightColor * matDiffColor * diff;
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifndef STANDARD
		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );
	#else
		float clearCoatDHR = 0.0;
	#endif
	reflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );
	reflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	#ifndef STANDARD
		reflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );
	#endif
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	#ifndef STANDARD
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		float dotNL = dotNV;
		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );
	#else
		float clearCoatDHR = 0.0;
	#endif
	reflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );
	#ifndef STANDARD
		reflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );
	#endif
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )
#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}
`,lights_template:`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = normalize( vViewPosition );
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#ifdef USE_SHADOWMAP
		directLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#ifdef USE_SHADOWMAP
		directLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#ifdef USE_SHADOWMAP
		directLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
#endif
#if defined( RE_IndirectDiffuse )
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#ifdef USE_LIGHTMAP
		vec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
	#endif
	#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )
		irradiance += getLightProbeIndirectIrradiance( geometry, 8 );
	#endif
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	vec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );
	#ifndef STANDARD
		vec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );
	#else
		vec3 clearCoatRadiance = vec3( 0.0 );
	#endif
	RE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );
#endif
`,logdepthbuf_fragment:`#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)
	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment:`#ifdef USE_LOGDEPTHBUF
	uniform float logDepthBufFC;
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
	#endif
#endif
`,logdepthbuf_pars_vertex:`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
	#endif
	uniform float logDepthBufFC;
#endif`,logdepthbuf_vertex:`#ifdef USE_LOGDEPTHBUF
	gl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
	#else
		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;
	#endif
#endif
`,map_fragment:`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif
`,map_pars_fragment:`#ifdef USE_MAP
	uniform sampler2D map;
#endif
`,map_particle_fragment:`#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
`,map_particle_pars_fragment:`#ifdef USE_MAP
	uniform vec4 offsetRepeat;
	uniform sampler2D map;
#endif
`,metalnessmap_fragment:`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.r;
#endif
`,metalnessmap_pars_fragment:`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex:`#ifdef USE_MORPHNORMALS
	objectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];
	objectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];
	objectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];
	objectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];
#endif
`,morphtarget_pars_vertex:`#ifdef USE_MORPHTARGETS
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,morphtarget_vertex:`#ifdef USE_MORPHTARGETS
	transformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];
	transformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];
	transformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];
	transformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];
	transformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];
	transformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];
	transformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];
	#endif
#endif
`,normal_flip:`#ifdef DOUBLE_SIDED
	float flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );
#else
	float flipNormal = 1.0;
#endif
`,normal_fragment:`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal ) * flipNormal;
#endif
#ifdef USE_NORMALMAP
	normal = perturbNormal2Arb( -vViewPosition, normal );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif
`,normalmap_pars_fragment:`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 S = normalize( q0 * st1.t - q1 * st0.t );
		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );
		vec3 N = normalize( surf_norm );
		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
		mapN.xy = normalScale * mapN.xy;
		mat3 tsn = mat3( S, T, N );
		return normalize( tsn * mapN );
	}
#endif
`,packing:`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 1.0 - 2.0 * rgb.xyz;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}
`,premultiplied_alpha_fragment:`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif
`,project_vertex:`#ifdef USE_SKINNING
	vec4 mvPosition = modelViewMatrix * skinned;
#else
	vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );
#endif
gl_Position = projectionMatrix * mvPosition;
`,roughnessmap_fragment:`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.r;
#endif
`,roughnessmap_pars_fragment:`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];
	#endif
	#if NUM_SPOT_LIGHTS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];
	#endif
	#if NUM_POINT_LIGHTS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	float texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {
		const vec2 offset = vec2( 0.0, 1.0 );
		vec2 texelSize = vec2( 1.0 ) / size;
		vec2 centroidUV = floor( uv * size + 0.5 ) / size;
		float lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );
		float lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );
		float rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );
		float rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );
		vec2 f = fract( uv * size + 0.5 );
		float a = mix( lb, lt, f.y );
		float b = mix( rb, rt, f.y );
		float c = mix( a, b, f.x );
		return c;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			return (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			return (
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return 1.0;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		float dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif
`,shadowmap_pars_vertex:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];
	#endif
	#if NUM_SPOT_LIGHTS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];
	#endif
	#if NUM_POINT_LIGHTS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];
	#endif
#endif
`,shadowmap_vertex:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#endif
	#if NUM_SPOT_LIGHTS > 0
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#endif
	#if NUM_POINT_LIGHTS > 0
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#endif
#endif
`,shadowmask_pars_fragment:`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
	DirectionalLight directionalLight;
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		shadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#endif
	#if NUM_SPOT_LIGHTS > 0
	SpotLight spotLight;
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		shadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#endif
	#if NUM_POINT_LIGHTS > 0
	PointLight pointLight;
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		shadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;
	}
	#endif
	#endif
	return shadow;
}
`,skinbase_vertex:`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex:`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform sampler2D boneTexture;
		uniform int boneTextureWidth;
		uniform int boneTextureHeight;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureWidth ) );
			float y = floor( j / float( boneTextureWidth ) );
			float dx = 1.0 / float( boneTextureWidth );
			float dy = 1.0 / float( boneTextureHeight );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif
`,skinning_vertex:`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	skinned  = bindMatrixInverse * skinned;
#endif
`,skinnormal_vertex:`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
#endif
`,specularmap_fragment:`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment:`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment:`#if defined( TONE_MAPPING )
  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif
`,tonemapping_pars_fragment:`#define saturate(a) clamp( a, 0.0, 1.0 )
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
`,uv_pars_fragment:`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )
	varying vec2 vUv;
#endif`,uv_pars_vertex:`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )
	varying vec2 vUv;
	uniform vec4 offsetRepeat;
#endif
`,uv_vertex:`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )
	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;
#endif`,uv2_pars_fragment:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
#endif`,uv2_vertex:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = uv2;
#endif`,worldpos_vertex:`#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )
	#ifdef USE_SKINNING
		vec4 worldPosition = modelMatrix * skinned;
	#else
		vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );
	#endif
#endif
`,cube_frag:`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldPosition;
#include <common>
void main() {
	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );
	gl_FragColor.a *= opacity;
}
`,cube_vert:`varying vec3 vWorldPosition;
#include <common>
void main() {
	vWorldPosition = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}
`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( gl_FragCoord.z );
	#endif
}
`,depth_vert:`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#include <begin_vertex>
	#include <displacementmap_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
}
`,distanceRGBA_frag:`uniform vec3 lightPos;
varying vec4 vWorldPosition;
#include <common>
#include <packing>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	gl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );
}
`,distanceRGBA_vert:`varying vec4 vWorldPosition;
#include <common>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <skinbase_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition;
}
`,equirect_frag:`uniform sampler2D tEquirect;
uniform float tFlip;
varying vec3 vWorldPosition;
#include <common>
void main() {
	vec3 direction = normalize( vWorldPosition );
	vec2 sampleUV;
	sampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );
	sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;
	gl_FragColor = texture2D( tEquirect, sampleUV );
}
`,equirect_vert:`varying vec3 vWorldPosition;
#include <common>
void main() {
	vWorldPosition = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}
`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}
`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	vLineDistance = scale * lineDistance;
	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}
`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		reflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <normal_flip>
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}
`,meshbasic_vert:`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}
`,meshlambert_frag:`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
#endif
#include <common>
#include <packing>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_pars_fragment>
#include <bsdfs>
#include <lights_pars>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	reflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <normal_flip>
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}
`,meshlambert_vert:`#define LAMBERT
varying vec3 vLightFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_flip>
	#include <normal_fragment>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_template>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}
`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <displacementmap_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,meshphysical_frag:`#define PHYSICAL
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifndef STANDARD
	uniform float clearCoat;
	uniform float clearCoatRoughness;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <packing>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <lights_pars>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_flip>
	#include <normal_fragment>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_template>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}
`,meshphysical_vert:`#define PHYSICAL
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <displacementmap_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,normal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	#include <normal_flip>
	#include <normal_fragment>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}
`,normal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <displacementmap_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}
`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <packing>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}
`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <project_vertex>
	#ifdef USE_SIZEATTENUATION
		gl_PointSize = size * ( scale / - mvPosition.z );
	#else
		gl_PointSize = size;
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,shadow_frag:`uniform float opacity;
#include <common>
#include <packing>
#include <bsdfs>
#include <lights_pars>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0 - getShadowMask() ) );
}
`,shadow_vert:`#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
}
`},a.prototype={constructor:a,isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.b=this.g=this.r=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return 0>n&&(n+=1),1<n&&--n,n<1/6?e+6*(t-e)*n:.5>n?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,s){return t=l.euclideanModulo(t,1),n=l.clamp(n,0,1),s=l.clamp(s,0,1),0===n?this.r=this.g=this.b=s:(s=2*s-(n=.5>=s?s*(1+n):s+n-s*n),this.r=e(s,n,t+1/3),this.g=e(s,n,t),this.b=e(s,n,t-1/3)),this}}(),setStyle:function(e){function s(t){void 0!==t&&1>parseFloat(t)&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^((?:rgb|hsl)a?)\(\s*([^)]*)\)/.exec(e))switch(n=t[2],t[1]){case"rgb":case"rgba":if(t=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,s(t[5]),this;if(t=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,s(t[5]),this;break;case"hsl":case"hsla":if(t=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n)){n=parseFloat(t[1])/360;var t,n,o=parseInt(t[2],10)/100,i=parseInt(t[3],10)/100;return s(t[5]),this.setHSL(n,o,i)}}else if(t=/^#([A-Fa-f0-9]+)$/.exec(e)){if(3===(n=(t=t[1]).length))return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,this;if(6===n)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,this}return e&&0<e.length&&(void 0!==(t=Xs[e])?this.setHex(t):console.warn("THREE.Color: Unknown color "+e)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=0<t?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){e=e||{h:0,s:0,l:0};var t,n,a,r=this.r,s=this.g,o=this.b,i=Math.max(r,s,o),c=((t=Math.min(r,s,o))+i)/2;if(t===i)t=n=0;else{switch(a=i-t,t=.5>=c?a/(i+t):a/(2-i-t),i){case r:n=(s-o)/a+(s<o?6:0);break;case s:n=(o-r)/a+2;break;case o:n=(r-s)/a+4}n/=6}return e.h=n,e.s=t,e.l=c,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){var s=this.getHSL();return s.h+=e,s.s+=t,s.l+=n,this.setHSL(s.h,s.s,s.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}},Xs={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},be.prototype=Object.create(p.prototype),be.prototype.constructor=be,be.prototype.isDataTexture=!0,d={common:{diffuse:{value:new a(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new f(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new n(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new a(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new a(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new f(0,0,1,1)}}},Z={basic:{uniforms:A.merge([d.common,d.aomap,d.lightmap,d.fog]),vertexShader:m.meshbasic_vert,fragmentShader:m.meshbasic_frag},lambert:{uniforms:A.merge([d.common,d.aomap,d.lightmap,d.emissivemap,d.fog,d.lights,{emissive:{value:new a(0)}}]),vertexShader:m.meshlambert_vert,fragmentShader:m.meshlambert_frag},phong:{uniforms:A.merge([d.common,d.aomap,d.lightmap,d.emissivemap,d.bumpmap,d.normalmap,d.displacementmap,d.gradientmap,d.fog,d.lights,{emissive:{value:new a(0)},specular:{value:new a(1118481)},shininess:{value:30}}]),vertexShader:m.meshphong_vert,fragmentShader:m.meshphong_frag},standard:{uniforms:A.merge([d.common,d.aomap,d.lightmap,d.emissivemap,d.bumpmap,d.normalmap,d.displacementmap,d.roughnessmap,d.metalnessmap,d.fog,d.lights,{emissive:{value:new a(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:m.meshphysical_vert,fragmentShader:m.meshphysical_frag},points:{uniforms:A.merge([d.points,d.fog]),vertexShader:m.points_vert,fragmentShader:m.points_frag},dashed:{uniforms:A.merge([d.common,d.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:m.linedashed_vert,fragmentShader:m.linedashed_frag},depth:{uniforms:A.merge([d.common,d.displacementmap]),vertexShader:m.depth_vert,fragmentShader:m.depth_frag},normal:{uniforms:A.merge([d.common,d.bumpmap,d.normalmap,d.displacementmap,{opacity:{value:1}}]),vertexShader:m.normal_vert,fragmentShader:m.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:m.cube_vert,fragmentShader:m.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:m.equirect_vert,fragmentShader:m.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new t}},vertexShader:m.distanceRGBA_vert,fragmentShader:m.distanceRGBA_frag}},Z.physical={uniforms:A.merge([Z.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:m.meshphysical_vert,fragmentShader:m.meshphysical_frag},un.prototype={constructor:un,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new n;return function(t,n){var s=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(s),this.max.copy(t).add(s),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return e=e||new n,this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return e=e||new n,this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return(t||new n).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return(t||new n).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new n;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},Zs=0,h.prototype={constructor:h,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){!0===e&&this.update(),this._needsUpdate=e},setValues:function(e){if(void 0!==e)for(s in e){var t,s,n=e[s];void 0===n?console.warn("THREE.Material: '"+s+"' parameter is undefined."):(t=this[s],void 0===t?console.warn("THREE."+this.type+": '"+s+"' is not a property of this material."):t&&t.isColor?t.set(n):t&&t.isVector3&&n&&n.isVector3?t.copy(n):this[s]="overdraw"===s?Number(n):n)}},toJSON:function(e){function s(e){var t,n,s=[];for(n in e)t=e[n],delete t.metadata,s.push(t);return s}var t,n=void 0===e;return n&&(e={textures:{},images:{}}),t={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}},t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),this.color&&this.color.isColor&&(t.color=this.color.getHex()),void 0!==this.roughness&&(t.roughness=this.roughness),void 0!==this.metalness&&(t.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(t.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(t.specular=this.specular.getHex()),void 0!==this.shininess&&(t.shininess=this.shininess),void 0!==this.clearCoat&&(t.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(t.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(t.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(t.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(t.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(t.bumpMap=this.bumpMap.toJSON(e).uuid,t.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(t.normalMap=this.normalMap.toJSON(e).uuid,t.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(t.displacementMap=this.displacementMap.toJSON(e).uuid,t.displacementScale=this.displacementScale,t.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(t.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(t.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(t.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(t.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(t.envMap=this.envMap.toJSON(e).uuid,t.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(t.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(t.size=this.size),void 0!==this.sizeAttenuation&&(t.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(t.blending=this.blending),2!==this.shading&&(t.shading=this.shading),0!==this.side&&(t.side=this.side),0!==this.vertexColors&&(t.vertexColors=this.vertexColors),1>this.opacity&&(t.opacity=this.opacity),!0===this.transparent&&(t.transparent=this.transparent),t.depthFunc=this.depthFunc,t.depthTest=this.depthTest,t.depthWrite=this.depthWrite,0<this.alphaTest&&(t.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(t.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(t.wireframe=this.wireframe),1<this.wireframeLinewidth&&(t.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(t.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(t.wireframeLinejoin=this.wireframeLinejoin),t.skinning=this.skinning,t.morphTargets=this.morphTargets,n&&(n=s(e.textures),e=s(e.images),0<n.length&&(t.textures=n),0<e.length&&(t.images=e)),t},clone:function(){return(new this.constructor).copy(this)},copy:function(e){if(this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.shading=e.shading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection,t=null,null!==(e=e.clippingPlanes))for(var t,s=e.length,n=(t=Array(s),0);n!==s;++n)t[n]=e[n].clone();return this.clippingPlanes=t,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(h.prototype,X.prototype),E.prototype=Object.create(h.prototype),E.prototype.constructor=E,E.prototype.isShaderMaterial=!0,E.prototype.copy=function(e){return h.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=A.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},E.prototype.toJSON=function(e){return(e=h.prototype.toJSON.call(this,e)).uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},te.prototype=Object.create(h.prototype),te.prototype.constructor=te,te.prototype.isMeshDepthMaterial=!0,te.prototype.copy=function(e){return h.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},K.prototype={constructor:K,isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var i=1/0,a=1/0,r=1/0,c=-1/0,l=-1/0,d=-1/0,t=0,u=e.length;t<u;t+=3){var n=e[t],s=e[t+1],o=e[t+2];n<i&&(i=n),s<a&&(a=s),o<r&&(r=o),n>c&&(c=n),s>l&&(l=s),o>d&&(d=o)}return this.min.set(i,a,r),this.max.set(c,l,d),this},setFromBufferAttribute:function(e){for(var i=1/0,a=1/0,r=1/0,c=-1/0,l=-1/0,d=-1/0,t=0,u=e.count;t<u;t++){var n=e.getX(t),s=e.getY(t),o=e.getZ(t);n<i&&(i=n),s<a&&(a=s),o<r&&(r=o),n>c&&(c=n),s>l&&(l=s),o>d&&(d=o)}return this.min.set(i,a,r),this.max.set(c,l,d),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new t;return function(t,n){var s=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(s),this.max.copy(t).add(s),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return e=e||new t,this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return e=e||new t,this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e=new t;return function(t){var n=this;return t.updateMatrixWorld(!0),t.traverse(function(t){if(void 0!==(s=t.geometry))if(s.isGeometry){var s,i,o=s.vertices;for(s=0,i=o.length;s<i;s++)e.copy(o[s]),e.applyMatrix4(t.matrixWorld),n.expandByPoint(e)}else if(s.isBufferGeometry&&void 0!==(o=s.attributes.position))for(s=0,i=o.count;s<i;s++)e.fromBufferAttribute(o,s).applyMatrix4(t.matrixWorld),n.expandByPoint(e)}),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,n){return(n||new t).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e;return function(n){return void 0===e&&(e=new t),this.clampPoint(n.center,e),e.distanceToSquared(n.center)<=n.radius*n.radius}}(),intersectsPlane:function(e){var t,n;return 0<e.normal.x?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),0<e.normal.y?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),0<e.normal.z?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},clampPoint:function(e,n){return(n||new t).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new t;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new t;return function(t){return t=t||new D,this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new t,new t,new t,new t,new t,new t,new t,new t];return function(t){return this.isEmpty()||(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e)),this}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},D.prototype={constructor:D,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e;return function(t,n){void 0===e&&(e=new K),s=this.center,void 0!==n?s.copy(n):e.setFromPoints(t).getCenter(s);for(var s,o=0,i=0,a=t.length;i<a;i++)o=Math.max(o,s.distanceToSquared(t[i]));return this.radius=Math.sqrt(o),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(this.center.dot(e.normal)-e.constant)<=this.radius},clampPoint:function(e,n){var o=this.center.distanceToSquared(e),s=n||new t;return s.copy(e),o>this.radius*this.radius&&(s.sub(this.center).normalize(),s.multiplyScalar(this.radius).add(this.center)),s},getBoundingBox:function(e){return(e=e||new K).set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius*=e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},B.prototype={constructor:B,isMatrix3:!0,set:function(e,t,n,s,o,i,a,r,c){var l=this.elements;return l[0]=e,l[1]=s,l[2]=a,l[3]=t,l[4]=o,l[5]=r,l[6]=n,l[7]=i,l[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){return e=e.elements,this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},setFromMatrix4:function(e){return e=e.elements,this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var e;return function(n){void 0===e&&(e=new t);for(var s=0,o=n.count;s<o;s++)e.x=n.getX(s),e.y=n.getY(s),e.z=n.getZ(s),e.applyMatrix3(this),n.setXYZ(s,e.x,e.y,e.z);return n}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e,t=(e=this.elements)[0],n=e[1],s=e[2],o=e[3],i=e[4],a=e[5],r=e[6],c=e[7];return t*i*(e=e[8])-t*a*c-n*o*e+n*a*r+s*o*c-s*i*r},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var n=e.elements,o=this.elements,i=n[0],a=n[1],r=n[2],h=n[3],c=n[4],l=n[5],d=n[6],u=n[7],m=(n=n[8])*c-l*u,f=l*d-n*h,p=u*h-c*d,s=i*m+a*f+r*p;if(0===s){if(!0===t)throw Error("THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0");return console.warn("THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0"),this.identity()}return s=1/s,o[0]=m*s,o[1]=(r*u-n*a)*s,o[2]=(l*a-r*c)*s,o[3]=f*s,o[4]=(n*i-r*d)*s,o[5]=(r*h-l*i)*s,o[6]=p*s,o[7]=(a*d-u*i)*s,o[8]=(c*i-a*h)*s,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;9>n;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},z.prototype={constructor:z,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,s){return this.normal.set(e,t,n),this.constant=s,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new t,n=new t;return function(t,s,o){return s=e.subVectors(o,s).cross(n.subVectors(t,s)).normalize(),this.setFromNormalAndCoplanarPoint(s,t),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,n){var s=this.distanceToPoint(e);return(n||new t).copy(this.normal).multiplyScalar(s)},intersectLine:function(){var e=new t;return function(n,s){var i=s||new t,a=n.delta(e),o=this.normal.dot(a);return 0!==o?0>(o=-(n.start.dot(this.normal)+this.constant)/o)||1<o?void 0:i.copy(a).multiplyScalar(o).add(n.start):0===this.distanceToPoint(n.start)?i.copy(n.start):void 0}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start);return e=this.distanceToPoint(e.end),0>t&&0<e||0>e&&0<t},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return(e||new t).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new t,n=new B;return function(t,s){var i=this.coplanarPoint(e).applyMatrix4(t),o=s||n.getNormalMatrix(t),o=this.normal.applyMatrix3(o).normalize();return this.constant=-i.dot(o),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},ln.prototype={constructor:ln,set:function(e,t,n,s,o,i){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(s),a[4].copy(o),a[5].copy(i),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var n=this.planes,t=0;6>t;t++)n[t].copy(e.planes[t]);return this},setFromMatrix:function(e){n=this.planes,e=(t=e.elements)[0];var n,g=t[1],h=t[2],i=t[3],l=t[4],c=t[5],r=t[6],s=t[7],a=t[8],d=t[9],u=t[10],o=t[11],m=t[12],f=t[13],p=t[14],t=t[15];return n[0].setComponents(i-e,s-l,o-a,t-m).normalize(),n[1].setComponents(i+e,s+l,o+a,t+m).normalize(),n[2].setComponents(i+g,s+c,o+d,t+f).normalize(),n[3].setComponents(i-g,s-c,o-d,t-f).normalize(),n[4].setComponents(i-h,s-r,o-u,t-p).normalize(),n[5].setComponents(i+h,s+r,o+u,t+p).normalize(),this},intersectsObject:function(){var e=new D;return function(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new D;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){var t,n=this.planes,s=e.center;e=-e.radius;for(t=0;6>t;t++)if(n[t].distanceToPoint(s)<e)return!1;return!0},intersectsBox:function(){var e=new t,n=new t;return function(t){for(var s,i,a=this.planes,o=0;6>o;o++)if(s=a[o],e.x=0<s.normal.x?t.min.x:t.max.x,n.x=0<s.normal.x?t.max.x:t.min.x,e.y=0<s.normal.y?t.min.y:t.max.y,n.y=0<s.normal.y?t.max.y:t.min.y,e.z=0<s.normal.z?t.min.z:t.max.z,n.z=0<s.normal.z?t.max.z:t.min.z,i=s.distanceToPoint(e),s=s.distanceToPoint(n),0>i&&0>s)return!1;return!0}}(),containsPoint:function(e){for(var n=this.planes,t=0;6>t;t++)if(0>n[t].distanceToPoint(e))return!1;return!0}},ie.prototype={constructor:ie,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,n){return(n||new t).copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new t;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,n){var o,s=n||new t;return s.subVectors(e,this.origin),o=s.dot(this.direction),0>o?s.copy(this.origin):s.copy(this.direction).multiplyScalar(o).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new t;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return 0>n?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var s=new t,e=new t,n=new t;return function(t,o,i,a){s.copy(t).add(o).multiplyScalar(.5),e.copy(o).sub(t).normalize(),n.copy(this.origin).sub(s);var h,c=.5*t.distanceTo(o),r=-this.direction.dot(e),d=n.dot(this.direction),l=-n.dot(e),u=n.lengthSq(),m=Math.abs(1-r*r);return 0<m?(o=r*d-l,h=c*m,0<=(t=r*l-d)?o>=-h?o<=h?r=(t*=c=1/m)*(t+r*(o*=c)+2*d)+o*(r*t+o+2*l)+u:(o=c,r=-(t=Math.max(0,-(r*o+d)))*t+o*(o+2*l)+u):(o=-c,r=-(t=Math.max(0,-(r*o+d)))*t+o*(o+2*l)+u):o<=-h?r=-(t=Math.max(0,-(-r*c+d)))*t+(o=0<t?-c:Math.min(Math.max(-c,-l),c))*(o+2*l)+u:o<=h?(t=0,r=(o=Math.min(Math.max(-c,-l),c))*(o+2*l)+u):r=-(t=Math.max(0,-(r*c+d)))*t+(o=0<t?c:Math.min(Math.max(-c,-l),c))*(o+2*l)+u):(o=0<r?-c:c,r=-(t=Math.max(0,-(r*o+d)))*t+o*(o+2*l)+u),i&&i.copy(this.direction).multiplyScalar(t).add(this.origin),a&&a.copy(e).multiplyScalar(o).add(s),r}}(),intersectSphere:function(){var e=new t;return function(t,n){e.subVectors(t.center,this.origin);var s=e.dot(this.direction),o=e.dot(e)-s*s,i=t.radius*t.radius;return o>i?null:(o=s-(i=Math.sqrt(i-o)),s+=i,0>o&&0>s?null:0>o?this.at(s,n):this.at(o,n))}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);return 0===t?0===e.distanceToPoint(this.origin)?0:null:0<=(e=-(this.origin.dot(e.normal)+e.constant)/t)?e:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||0>e.normal.dot(this.direction)*t},intersectBox:function(e,t){var s,i,n=1/this.direction.x,a=1/this.direction.y,r=1/this.direction.z,o=this.origin;return 0<=n?(s=(e.min.x-o.x)*n,n*=e.max.x-o.x):(s=(e.max.x-o.x)*n,n*=e.min.x-o.x),0<=a?(i=(e.min.y-o.y)*a,a*=e.max.y-o.y):(i=(e.max.y-o.y)*a,a*=e.min.y-o.y),s>a||i>n?null:((i>s||s!=s)&&(s=i),(a<n||n!=n)&&(n=a),0<=r?(i=(e.min.z-o.z)*r,r*=e.max.z-o.z):(i=(e.max.z-o.z)*r,r*=e.min.z-o.z),s>r||i>n?null:((i>s||s!=s)&&(s=i),(r<n||n!=n)&&(n=r),0>n?null:this.at(0<=s?s:n,t)))},intersectsBox:function(){var e=new t;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new t,s=new t,n=new t,o=new t;return function(t,i,a,r,c){if(s.subVectors(i,t),n.subVectors(a,t),o.crossVectors(s,n),0<(i=this.direction.dot(o))){if(r)return null;r=1}else{if(!(0>i))return null;r=-1,i=-i}return e.subVectors(this.origin,t),0>(t=r*this.direction.dot(n.crossVectors(e,n)))||0>(a=r*this.direction.dot(s.cross(e)))||t+a>i||0>(t=-r*e.dot(o))?null:this.at(t/i,c)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},ne.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),ne.DefaultOrder="XYZ",ne.prototype={constructor:ne,isEuler:!0,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,n,s){return this._x=e,this._y=t,this._z=n,this._order=s||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){o=l.clamp,e=(s=e.elements)[0];var o,a=s[4],r=s[8],c=s[1],i=s[5],d=s[9],u=s[2],h=s[6],s=s[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(o(r,-1,1)),.99999>Math.abs(r)?(this._x=Math.atan2(-d,s),this._z=Math.atan2(-a,e)):(this._x=Math.atan2(h,i),this._z=0)):"YXZ"===t?(this._x=Math.asin(-o(d,-1,1)),.99999>Math.abs(d)?(this._y=Math.atan2(r,s),this._z=Math.atan2(c,i)):(this._y=Math.atan2(-u,e),this._z=0)):"ZXY"===t?(this._x=Math.asin(o(h,-1,1)),.99999>Math.abs(h)?(this._y=Math.atan2(-u,s),this._z=Math.atan2(-a,i)):(this._y=0,this._z=Math.atan2(c,e))):"ZYX"===t?(this._y=Math.asin(-o(u,-1,1)),.99999>Math.abs(u)?(this._x=Math.atan2(h,s),this._z=Math.atan2(c,e)):(this._x=0,this._z=Math.atan2(-a,i))):"YZX"===t?(this._z=Math.asin(o(c,-1,1)),.99999>Math.abs(c)?(this._x=Math.atan2(-d,i),this._y=Math.atan2(-u,e)):(this._x=0,this._y=Math.atan2(r,s))):"XZY"===t?(this._z=Math.asin(-o(a,-1,1)),.99999>Math.abs(a)?(this._x=Math.atan2(h,i),this._y=Math.atan2(r,e)):(this._x=Math.atan2(-d,s),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e;return function(t,n,s){return void 0===e&&(e=new r),e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,s)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new y;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new t(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},pn.prototype={constructor:pn,set:function(e){this.mask=1<<e},enable:function(e){this.mask|=1<<e},toggle:function(e){this.mask^=1<<e},disable:function(e){this.mask&=~(1<<e)},test:function(e){return 0!=(this.mask&e.mask)}},Js=0,s.DefaultUp=new t(0,1,0),s.DefaultMatrixAutoUpdate=!0,s.prototype={constructor:s,isObject3D:!0,applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new y;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new t(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new t(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new t(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new t;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new t(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new t(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new t(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new r;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new r;return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(1<arguments.length)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);-1!==(t=this.children.indexOf(e))&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(t,1))},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var s,n=0,o=this.children.length;n<o;n++)if(s=this.children[n].getObjectByProperty(e,t),void 0!==s)return s},getWorldPosition:function(e){return e=e||new t,this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new t,n=new t;return function(t){return t=t||new y,this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),t}}(),getWorldRotation:function(){var e=new y;return function(t){return t=t||new ne,this.getWorldQuaternion(e),t.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new t,n=new y;return function(s){return s=s||new t,this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,n,s),s}}(),getWorldDirection:function(){var e=new y;return function(n){return n=n||new t,this.getWorldQuaternion(e),n.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var n=this.children,t=0,s=n.length;t<s;t++)n[t].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var n=this.children,t=0,s=n.length;t<s;t++)n[t].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==e||(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var n=this.children,t=0,s=n.length;t<s;t++)n[t].updateMatrixWorld(e)},toJSON:function(e){function o(e){var t,n,s=[];for(n in e)t=e[n],delete t.metadata,s.push(t);return s}if(n={},(i=void 0===e||""===e)&&(e={geometries:{},materials:{},textures:{},images:{}},n.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"}),t={},t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),"{}"!==JSON.stringify(this.userData)&&(t.userData=this.userData),!0===this.castShadow&&(t.castShadow=!0),!0===this.receiveShadow&&(t.receiveShadow=!0),!1===this.visible&&(t.visible=!1),t.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===e.geometries[this.geometry.uuid]&&(e.geometries[this.geometry.uuid]=this.geometry.toJSON(e)),t.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===e.materials[this.material.uuid]&&(e.materials[this.material.uuid]=this.material.toJSON(e)),t.material=this.material.uuid),0<this.children.length){t.children=[];for(s=0;s<this.children.length;s++)t.children.push(this.children[s].toJSON(e).object)}if(i){var t,n,s,i=o(e.geometries),a=(s=o(e.materials),o(e.textures));e=o(e.images),0<i.length&&(n.geometries=i),0<s.length&&(n.materials=s),0<a.length&&(n.textures=a),0<e.length&&(n.images=e)}return n.object=t,n},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++)this.add(e.children[n].clone());return this}},Object.assign(s.prototype,X.prototype),ce.prototype={constructor:ce,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return(e||new t).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return(e||new t).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,n){var s=n||new t;return this.delta(s).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var n=new t,e=new t;return function(t,s){n.subVectors(t,this.start),e.subVectors(this.end,this.start);var o=e.dot(e),o=e.dot(n)/o;return s&&(o=l.clamp(o,0,1)),o}}(),closestPointToPoint:function(e,n,s){return e=this.closestPointToPointParameter(e,n),s=s||new t,this.delta(s).multiplyScalar(e).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},R.normal=function(){var e=new t;return function(n,s,o,i){return(i=i||new t).subVectors(o,s),e.subVectors(n,s),i.cross(e),0<(n=i.lengthSq())?i.multiplyScalar(1/Math.sqrt(n)):i.set(0,0,0)}}(),R.barycoordFromPoint=function(){var e=new t,n=new t,s=new t;return function(o,i,a,r,c){e.subVectors(r,i),n.subVectors(a,i),s.subVectors(o,i),o=e.dot(e),i=e.dot(n),a=e.dot(s);var d,l=n.dot(n);return r=n.dot(s),d=o*l-i*i,c=c||new t,0===d?c.set(-2,-1,-1):(l=(l*a-i*r)*(d=1/d),o=(o*r-i*a)*d,c.set(1-l-o,o,l))}}(),R.containsPoint=function(){var e=new t;return function(t,n,s,o){return 0<=(t=R.barycoordFromPoint(t,n,s,o,e)).x&&0<=t.y&&1>=t.x+t.y}}(),R.prototype={constructor:R,set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,s){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[s]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new t,n=new t;return function(){return e.subVectors(this.c,this.b),n.subVectors(this.a,this.b),.5*e.cross(n).length()}}(),midpoint:function(e){return(e||new t).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return R.normal(this.a,this.b,this.c,e)},plane:function(e){return(e||new z).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return R.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return R.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(){var e,n,s,o;return function(i,a){void 0===s&&(s=new z,e=[new ce,new ce,new ce],n=new t,o=new t);var r,l,c=a||new t,d=1/0;if(s.setFromCoplanarPoints(this.a,this.b,this.c),s.projectPoint(i,n),!0===this.containsPoint(n))c.copy(n);else{e[0].set(this.a,this.b),e[1].set(this.b,this.c),e[2].set(this.c,this.a);for(r=0;r<e.length;r++)e[r].closestPointToPoint(n,!0,o),l=n.distanceToSquared(o),l<d&&(d=l,c.copy(o))}return c}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},N.prototype={constructor:N,clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}},M.prototype=Object.create(h.prototype),M.prototype.constructor=M,M.prototype.isMeshBasicMaterial=!0,M.prototype.copy=function(e){return h.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},u.prototype={constructor:u,isBufferAttribute:!0,set needsUpdate(e){!0===e&&this.version++},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.itemSize:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var s=0,o=this.itemSize;s<o;s++)this.array[e+s]=t.array[n+s];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t,s=this.array,o=0,n=0,i=e.length;n<i;n++)t=e[n],void 0===t&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),t=new a),s[o++]=t.r,s[o++]=t.g,s[o++]=t.b;return this},copyIndicesArray:function(e){for(var t,n=this.array,s=0,o=0,i=e.length;o<i;o++)t=e[o],n[s++]=t.a,n[s++]=t.b,n[s++]=t.c;return this},copyVector2sArray:function(e){for(var t,o=this.array,i=0,s=0,a=e.length;s<a;s++)t=e[s],void 0===t&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",s),t=new n),o[i++]=t.x,o[i++]=t.y;return this},copyVector3sArray:function(e){for(var n,o=this.array,i=0,s=0,a=e.length;s<a;s++)n=e[s],void 0===n&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",s),n=new t),o[i++]=n.x,o[i++]=n.y,o[i++]=n.z;return this},copyVector4sArray:function(e){for(var t,n=this.array,s=0,o=0,i=e.length;o<i;o++)t=e[o],void 0===t&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",o),t=new f),n[s++]=t.x,n[s++]=t.y,n[s++]=t.z,n[s++]=t.w;return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,s){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this},setXYZW:function(e,t,n,s,o){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this.array[e+3]=o,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},jt.prototype=Object.create(u.prototype),jt.prototype.constructor=jt,on.prototype=Object.create(u.prototype),on.prototype.constructor=on,Xt.prototype=Object.create(u.prototype),Xt.prototype.constructor=Xt,Gt.prototype=Object.create(u.prototype),Gt.prototype.constructor=Gt,me.prototype=Object.create(u.prototype),me.prototype.constructor=me,qt.prototype=Object.create(u.prototype),qt.prototype.constructor=qt,pe.prototype=Object.create(u.prototype),pe.prototype.constructor=pe,o.prototype=Object.create(u.prototype),o.prototype.constructor=o,Bt.prototype=Object.create(u.prototype),Bt.prototype.constructor=Bt,Object.assign(Ks.prototype,{computeGroups:function(e){var t,n,i,s=[],o=void 0;e=e.faces;for(n=0;n<e.length;n++)i=e[n],i.materialIndex!==o&&(o=i.materialIndex,void 0!==t&&(t.count=3*n-t.start,s.push(t)),t={start:3*n,materialIndex:o});void 0!==t&&(t.count=3*n-t.start,s.push(t)),this.groups=s},fromGeometry:function(e){var t,s,o,i,l,d,u,f,g=e.faces,r=e.vertices,a=e.faceVertexUvs,y=a[0]&&0<a[0].length,j=a[1]&&0<a[1].length,p=e.morphTargets,m=p.length;if(0<m){u=[];for(s=0;s<m;s++)u[s]=[];this.morphTargets.position=u}if(f=e.morphNormals,d=f.length,0<d){for(l=[],s=0;s<d;s++)l[s]=[];this.morphTargets.normal=l}var c=e.skinIndices,h=e.skinWeights,v=c.length===r.length,b=h.length===r.length;for(s=0;s<g.length;s++){o=g[s],this.vertices.push(r[o.a],r[o.b],r[o.c]),t=o.vertexNormals;for(3===t.length?this.normals.push(t[0],t[1],t[2]):(t=o.normal,this.normals.push(t,t,t)),3===(t=o.vertexColors).length?this.colors.push(t[0],t[1],t[2]):(t=o.color,this.colors.push(t,t,t)),!0===y&&(void 0!==(t=a[0][s])?this.uvs.push(t[0],t[1],t[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",s),this.uvs.push(new n,new n,new n))),!0===j&&(void 0!==(t=a[1][s])?this.uvs2.push(t[0],t[1],t[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",s),this.uvs2.push(new n,new n,new n))),t=0;t<m;t++)i=p[t].vertices,u[t].push(i[o.a],i[o.b],i[o.c]);for(t=0;t<d;t++)i=f[t].vertexNormals[s],l[t].push(i.a,i.b,i.c);v&&this.skinIndices.push(c[o.a],c[o.b],c[o.c]),b&&this.skinWeights.push(h[o.a],h[o.b],h[o.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}}),Sn=0,c.prototype={constructor:c,isGeometry:!0,applyMatrix:function(e){for(var n,i,o=(new B).getNormalMatrix(e),t=0,s=this.vertices.length;t<s;t++)this.vertices[t].applyMatrix4(e);for(t=0,s=this.faces.length;t<s;t++){(e=this.faces[t]).normal.applyMatrix3(o).normalize();for(n=0,i=e.vertexNormals.length;n<i;n++)e.vertexNormals[n].applyMatrix3(o).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0,this},rotateX:function(){var e;return function(t){return void 0===e&&(e=new r),e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e;return function(t){return void 0===e&&(e=new r),e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(t){return void 0===e&&(e=new r),e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e;return function(t,n,s){return void 0===e&&(e=new r),e.makeTranslation(t,n,s),this.applyMatrix(e),this}}(),scale:function(){var e;return function(t,n,s){return void 0===e&&(e=new r),e.makeScale(t,n,s),this.applyMatrix(e),this}}(),lookAt:function(){var e;return function(t){void 0===e&&(e=new s),e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){function b(e,t,n,s){s=new N(e,t,n,void 0!==u?[m[e].clone(),m[t].clone(),m[n].clone()]:[],void 0!==l?[i.colors[e].clone(),i.colors[t].clone(),i.colors[n].clone()]:[],s),i.faces.push(s),void 0!==h&&i.faceVertexUvs[0].push([f[e].clone(),f[t].clone(),f[n].clone()]),void 0!==d&&i.faceVertexUvs[1].push([p[e].clone(),p[t].clone(),p[n].clone()])}var g,v,i=this,r=null!==e.index?e.index.array:void 0,s=e.attributes,c=s.position.array,u=void 0!==s.normal?s.normal.array:void 0,l=void 0!==s.color?s.color.array:void 0,h=void 0!==s.uv?s.uv.array:void 0,d=void 0!==s.uv2?s.uv2.array:void 0;void 0!==d&&(this.faceVertexUvs[1]=[]);for(var m=[],f=[],p=[],o=s=0;s<c.length;s+=3,o+=2)i.vertices.push(new t(c[s],c[s+1],c[s+2])),void 0!==u&&m.push(new t(u[s],u[s+1],u[s+2])),void 0!==l&&i.colors.push(new a(l[s],l[s+1],l[s+2])),void 0!==h&&f.push(new n(h[o],h[o+1])),void 0!==d&&p.push(new n(d[o],d[o+1]));if(void 0!==r)if(0<(c=e.groups).length)for(s=0;s<c.length;s++)for(g=c[s],v=(o=v=g.start,v+g.count);o<v;o+=3)b(r[o],r[o+1],r[o+2],g.materialIndex);else for(s=0;s<r.length;s+=3)b(r[s],r[s+1],r[s+2]);else for(s=0;s<c.length/3;s+=3)b(s,s+1,s+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=0===(e=this.boundingSphere.radius)?1:1/e,n=new r;return n.set(e,0,0,-e*t.x,0,e,0,-e*t.y,0,0,e,-e*t.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var e=new t,o=new t,s=0,a=this.faces.length;s<a;s++){var n=this.faces[s],r=this.vertices[n.a],i=this.vertices[n.b];e.subVectors(this.vertices[n.c],i),o.subVectors(r,i),e.cross(o),e.normalize(),n.normal.copy(e)}},computeVertexNormals:function(e){for(void 0===e&&(e=!0),s=Array(this.vertices.length),o=0,n=this.vertices.length;o<n;o++)s[o]=new t;if(e){var n,s,o,i,r,c,a=new t,l=new t;for(e=0,o=this.faces.length;e<o;e++)n=this.faces[e],i=this.vertices[n.a],r=this.vertices[n.b],c=this.vertices[n.c],a.subVectors(c,r),l.subVectors(i,r),a.cross(l),s[n.a].add(a),s[n.b].add(a),s[n.c].add(a)}else for(this.computeFaceNormals(),e=0,o=this.faces.length;e<o;e++)s[(n=this.faces[e]).a].add(n.normal),s[n.b].add(n.normal),s[n.c].add(n.normal);for(o=0,n=this.vertices.length;o<n;o++)s[o].normalize();for(e=0,o=this.faces.length;e<o;e++)3===(i=(n=this.faces[e]).vertexNormals).length?(i[0].copy(s[n.a]),i[1].copy(s[n.b]),i[2].copy(s[n.c])):(i[0]=s[n.a].clone(),i[1]=s[n.b].clone(),i[2]=s[n.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){for(this.computeFaceNormals(),n=0,s=this.faces.length;n<s;n++){var e,n,s,t=(e=this.faces[n]).vertexNormals;3===t.length?(t[0].copy(e.normal),t[1].copy(e.normal),t[2].copy(e.normal)):(t[0]=e.normal.clone(),t[1]=e.normal.clone(),t[2]=e.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(s=0,o=this.faces.length;s<o;s++)for((e=this.faces[s]).__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone(),e.__originalVertexNormals||(e.__originalVertexNormals=[]),n=0,r=e.vertexNormals.length;n<r;n++)e.__originalVertexNormals[n]?e.__originalVertexNormals[n].copy(e.vertexNormals[n]):e.__originalVertexNormals[n]=e.vertexNormals[n].clone();var e,n,s,o,i,a,r,d,l=new c;for(l.faces=this.faces,n=0,r=this.morphTargets.length;n<r;n++){if(!this.morphNormals[n]){this.morphNormals[n]={},this.morphNormals[n].faceNormals=[],this.morphNormals[n].vertexNormals=[],e=this.morphNormals[n].faceNormals,a=this.morphNormals[n].vertexNormals;for(s=0,o=this.faces.length;s<o;s++)d=new t,i={a:new t,b:new t,c:new t},e.push(d),a.push(i)}for(a=this.morphNormals[n],l.vertices=this.morphTargets[n].vertices,l.computeFaceNormals(),l.computeVertexNormals(),s=0,o=this.faces.length;s<o;s++)e=this.faces[s],d=a.faceNormals[s],i=a.vertexNormals[s],d.copy(e.normal),i.a.copy(e.vertexNormals[0]),i.b.copy(e.vertexNormals[1]),i.c.copy(e.vertexNormals[2])}for(s=0,o=this.faces.length;s<o;s++)(e=this.faces[s]).normal=e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals},computeLineDistances:function(){for(var n=0,t=this.vertices,e=0,s=t.length;e<s;e++)0<e&&(n+=t[e].distanceTo(t[e-1])),this.lineDistances[e]=n},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new K),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new D),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!1===(e&&e.isGeometry))console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);else{var i,a,r,u,d=this.vertices.length,c=this.vertices,s=e.vertices,p=this.faces,m=e.faces,f=this.faceVertexUvs[0],h=e.faceVertexUvs[0],o=this.colors,l=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new B).getNormalMatrix(t)),e=0;for(a=s.length;e<a;e++)i=s[e].clone(),void 0!==t&&i.applyMatrix4(t),c.push(i);for(e=0,a=l.length;e<a;e++)o.push(l[e].clone());for(e=0,a=m.length;e<a;e++){u=(s=m[e]).vertexNormals,l=s.vertexColors;for((o=new N(s.a+d,s.b+d,s.c+d)).normal.copy(s.normal),void 0!==r&&o.normal.applyMatrix3(r).normalize(),t=0,c=u.length;t<c;t++)i=u[t].clone(),void 0!==r&&i.applyMatrix3(r).normalize(),o.vertexNormals.push(i);for(o.color.copy(s.color),t=0,c=l.length;t<c;t++)i=l[t],o.vertexColors.push(i.clone());o.materialIndex=s.materialIndex+n,p.push(o)}for(e=0,a=h.length;e<a;e++)if(r=[],void 0!==(n=h[e])){for(t=0,c=n.length;t<c;t++)r.push(n[t].clone());f.push(r)}}},mergeMesh:function(e){!1===(e&&e.isMesh)?console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e):(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix))},mergeVertices:function(){var e,n,i,o={},a=[],s=[],t=Math.pow(10,4);for(e=0,i=this.vertices.length;e<i;e++)n=this.vertices[e],void 0===o[n=Math.round(n.x*t)+"_"+Math.round(n.y*t)+"_"+Math.round(n.z*t)]?(o[n]=e,a.push(this.vertices[e]),s[e]=a.length-1):s[e]=s[o[n]];for(o=[],e=0,i=this.faces.length;e<i;e++)for((t=this.faces[e]).a=s[t.a],t.b=s[t.b],t.c=s[t.c],t=[t.a,t.b,t.c],n=0;3>n;n++)if(t[n]===t[(n+1)%3]){o.push(e);break}for(e=o.length-1;0<=e;e--)for(t=o[e],this.faces.splice(t,1),s=0,i=this.faceVertexUvs.length;s<i;s++)this.faceVertexUvs[s].splice(t,1);return e=this.vertices.length-a.length,this.vertices=a,e},sortFacesByMaterialIndex:function(){for(var t,n,i,a,r,s=this.faces,o=s.length,e=0;e<o;e++)s[e]._id=e;s.sort(function(e,t){return e.materialIndex-t.materialIndex}),i=this.faceVertexUvs[0],a=this.faceVertexUvs[1];for(i&&i.length===o&&(t=[]),a&&a.length===o&&(n=[]),e=0;e<o;e++)r=s[e]._id,t&&t.push(i[r]),n&&n.push(a[r]);t&&(this.faceVertexUvs[0]=t),n&&(this.faceVertexUvs[1]=n)},toJSON:function(){function i(e,t,n){return n?e|1<<t:e&~(1<<t)}function d(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==v[t]||(v[t]=f.length/3,f.push(e.x,e.y,e.z)),v[t]}function l(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==g[t]||(g[t]=u.length,u.push(e.getHex())),g[t]}function m(e){var t=e.x.toString()+e.y.toString();return void 0!==p[t]||(p[t]=h.length/2,h.push(e.x,e.y)),p[t]}if(o={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}},o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),void 0!==this.parameters){a=this.parameters;for(n in a)void 0!==a[n]&&(o[n]=a[n]);return o}for(a=[],n=0;n<this.vertices.length;n++)s=this.vertices[n],a.push(s.x,s.y,s.z);var s=[],f=[],v={},u=[],g={},h=[],p={};for(n=0;n<this.faces.length;n++){var n,o,a,e=this.faces[n],r=void 0!==this.faceVertexUvs[0][n],c=0<e.normal.length(),b=0<e.vertexNormals.length,j=1!==e.color.r||1!==e.color.g||1!==e.color.b,y=0<e.vertexColors.length,t=i(t=0,0,0),t=i(t,1,!0),t=i(t,2,!1),t=i(t,3,r),t=i(t,4,c),t=i(t,5,b),t=i(t,6,j),t=i(t,7,y);s.push(t),s.push(e.a,e.b,e.c),s.push(e.materialIndex),r&&(r=this.faceVertexUvs[0][n],s.push(m(r[0]),m(r[1]),m(r[2]))),c&&s.push(d(e.normal)),b&&(c=e.vertexNormals,s.push(d(c[0]),d(c[1]),d(c[2]))),j&&s.push(l(e.color)),y&&(e=e.vertexColors,s.push(l(e[0]),l(e[1]),l(e[2])))}return o.data={},o.data.vertices=a,o.data.normals=f,0<u.length&&(o.data.colors=u),0<h.length&&(o.data.uvs=[h]),o.data.faces=s,o},clone:function(){return(new c).copy(this)},copy:function(e){for(this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.name=e.name,t=0,o=(n=e.vertices).length;t<o;t++)this.vertices.push(n[t].clone());for(t=0,o=(n=e.colors).length;t<o;t++)this.colors.push(n[t].clone());for(t=0,o=(n=e.faces).length;t<o;t++)this.faces.push(n[t].clone());for(t=0,o=e.faceVertexUvs.length;t<o;t++){r=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),n=0,a=r.length;n<a;n++){var t,n,s,o,i,a,r,c=r[n],l=[];for(s=0,i=c.length;s<i;s++)l.push(c[s].clone());this.faceVertexUvs[t].push(l)}}for(t=0,o=(s=e.morphTargets).length;t<o;t++){if((i={}).name=s[t].name,void 0!==s[t].vertices)for(i.vertices=[],n=0,a=s[t].vertices.length;n<a;n++)i.vertices.push(s[t].vertices[n].clone());if(void 0!==s[t].normals)for(i.normals=[],n=0,a=s[t].normals.length;n<a;n++)i.normals.push(s[t].normals[n].clone());this.morphTargets.push(i)}for(t=0,o=(s=e.morphNormals).length;t<o;t++){if(i={},void 0!==s[t].vertexNormals)for(i.vertexNormals=[],n=0,a=s[t].vertexNormals.length;n<a;n++)r=s[t].vertexNormals[n],(c={}).a=r.a.clone(),c.b=r.b.clone(),c.c=r.c.clone(),i.vertexNormals.push(c);if(void 0!==s[t].faceNormals)for(i.faceNormals=[],n=0,a=s[t].faceNormals.length;n<a;n++)i.faceNormals.push(s[t].faceNormals[n].clone());this.morphNormals.push(i)}for(t=0,o=(n=e.skinWeights).length;t<o;t++)this.skinWeights.push(n[t].clone());for(t=0,o=(n=e.skinIndices).length;t<o;t++)this.skinIndices.push(n[t].clone());for(t=0,o=(n=e.lineDistances).length;t<o;t++)this.lineDistances.push(n[t]);return null!==(t=e.boundingBox)&&(this.boundingBox=t.clone()),null!==(t=e.boundingSphere)&&(this.boundingSphere=t.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(c.prototype,X.prototype),i.prototype={constructor:i,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(65535<Yn(e)?pe:me)(e,1):this.index=e},addAttribute:function(e,t,n){if(!1===(t&&t.isBufferAttribute)&&!1===(t&&t.isInterleavedBufferAttribute))console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new u(t,n));else{if("index"!==e)return this.attributes[e]=t,this;console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t)}},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;return void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0),void 0!==(t=this.attributes.normal)&&((new B).getNormalMatrix(e).applyToBufferAttribute(t),t.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e;return function(t){return void 0===e&&(e=new r),e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e;return function(t){return void 0===e&&(e=new r),e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(t){return void 0===e&&(e=new r),e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e;return function(t,n,s){return void 0===e&&(e=new r),e.makeTranslation(t,n,s),this.applyMatrix(e),this}}(),scale:function(){var e;return function(t,n,s){return void 0===e&&(e=new r),e.makeScale(t,n,s),this.applyMatrix(e),this}}(),lookAt:function(){var e;return function(t){void 0===e&&(e=new s),e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var n,t=e.geometry;return e.isPoints||e.isLine?(e=new o(3*t.vertices.length,3),n=new o(3*t.colors.length,3),this.addAttribute("position",e.copyVector3sArray(t.vertices)),this.addAttribute("color",n.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length&&(e=new o(t.lineDistances.length,1),this.addAttribute("lineDistance",e.copyArray(t.lineDistances))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())):e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t),this},updateFromObject:function(e){var n,t=e.geometry;if(e.isMesh){if(n=t.__directGeometry,!0===t.elementsNeedUpdate&&(n=void 0,t.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}return!0===t.verticesNeedUpdate&&(void 0!==(n=this.attributes.position)&&(n.copyVector3sArray(t.vertices),n.needsUpdate=!0),t.verticesNeedUpdate=!1),!0===t.normalsNeedUpdate&&(void 0!==(n=this.attributes.normal)&&(n.copyVector3sArray(t.normals),n.needsUpdate=!0),t.normalsNeedUpdate=!1),!0===t.colorsNeedUpdate&&(void 0!==(n=this.attributes.color)&&(n.copyColorsArray(t.colors),n.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(void 0!==(n=this.attributes.uv)&&(n.copyVector2sArray(t.uvs),n.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(void 0!==(n=this.attributes.lineDistance)&&(n.copyArray(t.lineDistances),n.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Ks).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){t=new Float32Array(3*e.vertices.length);for(n in this.addAttribute("position",new u(t,3).copyVector3sArray(e.vertices)),0<e.normals.length&&(t=new Float32Array(3*e.normals.length),this.addAttribute("normal",new u(t,3).copyVector3sArray(e.normals))),0<e.colors.length&&(t=new Float32Array(3*e.colors.length),this.addAttribute("color",new u(t,3).copyColorsArray(e.colors))),0<e.uvs.length&&(t=new Float32Array(2*e.uvs.length),this.addAttribute("uv",new u(t,2).copyVector2sArray(e.uvs))),0<e.uvs2.length&&(t=new Float32Array(2*e.uvs2.length),this.addAttribute("uv2",new u(t,2).copyVector2sArray(e.uvs2))),0<e.indices.length&&(t=new(65535<Yn(e.indices)?Uint32Array:Uint16Array)(3*e.indices.length),this.setIndex(new u(t,1).copyIndicesArray(e.indices))),this.groups=e.groups,e.morphTargets){t=[];for(var t,n,i,r,a=e.morphTargets[n],s=0,c=a.length;s<c;s++)i=a[s],r=new o(3*i.length,3),t.push(r.copyVector3sArray(i));this.morphAttributes[n]=t}return 0<e.skinIndices.length&&(n=new o(4*e.skinIndices.length,4),this.addAttribute("skinIndex",n.copyVector4sArray(e.skinIndices))),0<e.skinWeights.length&&(n=new o(4*e.skinWeights.length,4),this.addAttribute("skinWeight",n.copyVector4sArray(e.skinWeights))),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new K);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var n=new K,e=new t;return function(){if(null===this.boundingSphere&&(this.boundingSphere=new D),t=this.attributes.position,t){o=this.boundingSphere.center,n.setFromBufferAttribute(t),n.getCenter(o);for(var t,o,i=0,s=0,a=t.count;s<a;s++)e.x=t.getX(s),e.y=t.getY(s),e.z=t.getZ(s),i=Math.max(i,o.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var r=this.index,c=this.attributes,v=this.groups;if(c.position){if(o=c.position.array,void 0===c.normal)this.addAttribute("normal",new u(new Float32Array(o.length),3));else for(e=0,i=(s=c.normal.array).length;e<i;e++)s[e]=0;var e,o,i,a,d,h,g,b,s=c.normal.array,m=new t,l=new t,f=new t,n=new t,p=new t;if(r){r=r.array,0===v.length&&this.addGroup(0,r.length);for(g=0,b=v.length;g<b;++g)for(i=(e=v[g]).start,a=e.count,e=i,i+=a;e<i;e+=3)a=3*r[e+0],h=3*r[e+1],d=3*r[e+2],m.fromArray(o,a),l.fromArray(o,h),f.fromArray(o,d),n.subVectors(f,l),p.subVectors(m,l),n.cross(p),s[a]+=n.x,s[a+1]+=n.y,s[a+2]+=n.z,s[h]+=n.x,s[h+1]+=n.y,s[h+2]+=n.z,s[d]+=n.x,s[d+1]+=n.y,s[d+2]+=n.z}else for(e=0,i=o.length;e<i;e+=9)m.fromArray(o,e),l.fromArray(o,e+3),f.fromArray(o,e+6),n.subVectors(f,l),p.subVectors(m,l),n.cross(p),s[e]=n.x,s[e+1]=n.y,s[e+2]=n.z,s[e+3]=n.x,s[e+4]=n.y,s[e+5]=n.z,s[e+6]=n.x,s[e+7]=n.y,s[e+8]=n.z;this.normalizeNormals(),c.normal.needsUpdate=!0}},merge:function(e,t){if(!1!==(e&&e.isBufferGeometry)){void 0===t&&(t=0),o=this.attributes;for(n in o)if(void 0!==e.attributes[n])for(var n,o,r=o[n].array,a=(s=e.attributes[n]).array,i=0,s=s.itemSize*t;i<a.length;i++,s++)r[s]=a[i];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var t,s,o,n=this.attributes.normal.array,e=0,i=n.length;e<i;e+=3)t=n[e],s=n[e+1],o=n[e+2],t=1/Math.sqrt(t*t+s*s+o*o),n[e]*=t,n[e+1]*=t,n[e+2]*=t},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t,a=new i,n=this.index.array,r=this.attributes;for(t in r){for(var o,c,l=(e=r[t]).array,e=e.itemSize,d=new l.constructor(n.length*e),h=0,s=0,m=n.length;s<m;s++){c=n[s]*e;for(o=0;o<e;o++)d[h++]=l[c++]}a.addAttribute(t,new u(d,e))}return a},toJSON:function(){var e,n,s,o,t={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){n=this.parameters;for(e in n)void 0!==n[e]&&(t[e]=n[e]);return t}t.data={attributes:{}},s=this.index;for(e in null!==s&&(n=Array.prototype.slice.call(s.array),t.data.index={type:s.array.constructor.name,array:n}),s=this.attributes)o=s[e],n=Array.prototype.slice.call(o.array),t.data.attributes[e]={itemSize:o.itemSize,type:o.array.constructor.name,array:n,normalized:o.normalized};return 0<(e=this.groups).length&&(t.data.groups=JSON.parse(JSON.stringify(e))),null!==(e=this.boundingSphere)&&(t.data.boundingSphere={center:e.center.toArray(),radius:e.radius}),t},clone:function(){return(new i).copy(this)},copy:function(e){for(t in this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.name=e.name,null!==(n=e.index)&&this.setIndex(n.clone()),n=e.attributes)this.addAttribute(t,n[t].clone());s=e.morphAttributes;for(t in s){var t,n,s,o,i=[],a=s[t];for(n=0,o=a.length;n<o;n++)i.push(a[n].clone());this.morphAttributes[t]=i}for(n=0,o=(t=e.groups).length;n<o;n++)s=t[n],this.addGroup(s.start,s.count,s.materialIndex);return null!==(t=e.boundingBox)&&(this.boundingBox=t.clone()),null!==(t=e.boundingSphere)&&(this.boundingSphere=t.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},i.MaxIndex=65535,Object.assign(i.prototype,X.prototype),_.prototype=Object.assign(Object.create(s.prototype),{constructor:_,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return s.prototype.copy.call(this,e),this.drawMode=e.drawMode,this},updateMorphTargets:function(){if(e=this.geometry.morphTargets,void 0!==e&&0<e.length){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e,t=0,n=e.length;t<n;t++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[e[t].name]=t}},raycast:function(){function g(e,t,n,s,o,i,a){return R.barycoordFromPoint(e,t,n,s,d),o.multiplyScalar(d.x),i.multiplyScalar(d.y),a.multiplyScalar(d.z),o.add(i).add(a),o.clone()}function p(e,t,n,s,o,i,a){var r=e.material;return null===(1===r.side?n.intersectTriangle(i,o,s,!0,a):n.intersectTriangle(s,o,i,2!==r.side,a))?null:(c.copy(a),c.applyMatrix4(e.matrixWorld),(n=t.ray.origin.distanceTo(c))<t.near||n>t.far?null:{distance:n,point:c.clone(),object:e})}function f(t,n,i,r,c,d,m,f){return e.fromBufferAttribute(r,d),o.fromBufferAttribute(r,m),s.fromBufferAttribute(r,f),(t=p(t,n,i,e,o,s,l))&&(c&&(a.fromBufferAttribute(c,d),h.fromBufferAttribute(c,m),u.fromBufferAttribute(c,f),t.uv=g(l,e,o,s,a,h,u)),t.face=new N(d,m,f,R.normal(e,o,s)),t.faceIndex=d),t}var v=new r,i=new ie,m=new D,e=new t,o=new t,s=new t,y=new t,j=new t,b=new t,a=new n,h=new n,u=new n,d=new t,l=new t,c=new t;return function(t,n){var c,d,w,O,x,E,k,A,S,M,F,T,z,D,N,L,r=this.geometry,_=this.material,C=this.matrixWorld;if(void 0!==_&&(null===r.boundingSphere&&r.computeBoundingSphere(),m.copy(r.boundingSphere),m.applyMatrix4(C),!1!==t.ray.intersectsSphere(m)&&(v.getInverse(C),i.copy(t.ray).applyMatrix4(v),null===r.boundingBox||!1!==i.intersectsBox(r.boundingBox))))if(r.isBufferGeometry)if(_=r.index,E=r.attributes.position,C=r.attributes.uv,null!==_)for(d=0,x=_.count;d<x;d+=3)r=_.getX(d),k=_.getX(d+1),w=_.getX(d+2),(c=f(this,t,i,E,C,r,k,w))&&(c.faceIndex=Math.floor(d/3),n.push(c));else for(d=0,x=E.count;d<x;d+=3)(c=f(this,t,i,E,C,r=d,k=d+1,w=d+2))&&(c.index=r,n.push(c));else if(r.isGeometry){d=!0===(C=_&&_.isMultiMaterial)?_.materials:null,x=r.vertices,k=r.faces,0<(w=r.faceVertexUvs[0]).length&&(E=w);for(S=0,N=k.length;S<N;S++)if(O=k[S],void 0!==(c=!0===C?d[O.materialIndex]:_)){if(w=x[O.a],M=x[O.b],A=x[O.c],!0===c.morphTargets){c=r.morphTargets,F=this.morphTargetInfluences,e.set(0,0,0),o.set(0,0,0),s.set(0,0,0);for(T=0,L=c.length;T<L;T++)z=F[T],0!==z&&(D=c[T].vertices,e.addScaledVector(y.subVectors(D[O.a],w),z),o.addScaledVector(j.subVectors(D[O.b],M),z),s.addScaledVector(b.subVectors(D[O.c],A),z));e.add(w),o.add(M),s.add(A),w=e,M=o,A=s}(c=p(this,t,i,w,M,A,l))&&(E&&(F=E[S],a.copy(F[0]),h.copy(F[1]),u.copy(F[2]),c.uv=g(l,w,M,A,a,h,u)),c.face=O,c.faceIndex=S,n.push(c))}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),pt.prototype=Object.create(c.prototype),pt.prototype.constructor=pt,xe.prototype=Object.create(i.prototype),xe.prototype.constructor=xe,St.prototype=Object.create(c.prototype),St.prototype.constructor=St,Ee.prototype=Object.create(i.prototype),Ee.prototype.constructor=Ee,C.prototype=Object.create(s.prototype),C.prototype.constructor=C,C.prototype.isCamera=!0,C.prototype.getWorldDirection=function(){var e=new y;return function(n){return n=n||new t,this.getWorldQuaternion(e),n.set(0,0,-1).applyQuaternion(e)}}(),C.prototype.lookAt=function(){var e=new r;return function(t){e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),C.prototype.clone=function(){return(new this.constructor).copy(this)},C.prototype.copy=function(e){return s.prototype.copy.call(this,e),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},x.prototype=Object.assign(Object.create(C.prototype),{constructor:x,isPerspectiveCamera:!0,copy:function(e){return C.prototype.copy.call(this,e),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){e=.5*this.getFilmHeight()/e,this.fov=2*l.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*l.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*l.RAD2DEG*Math.atan(Math.tan(.5*l.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,s,o,i){this.aspect=e/t,this.view={fullWidth:e,fullHeight:t,offsetX:n,offsetY:s,width:o,height:i},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var i=this.near,t=2*(s=i*Math.tan(.5*l.DEG2RAD*this.fov)/this.zoom),n=-.5*(o=this.aspect*t),e=this.view;if(null!==e){var a=e.fullWidth,r=e.fullHeight,s=(n=n+e.offsetX*o/a,s-e.offsetY*t/r),o=e.width/a*o;t=e.height/r*t}0!==(e=this.filmOffset)&&(n+=i*e/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+o,s,s-t,i,this.far)},toJSON:function(e){return(e=s.prototype.toJSON.call(this,e)).object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),ut.prototype=Object.assign(Object.create(C.prototype),{constructor:ut,isOrthographicCamera:!0,copy:function(e){return C.prototype.copy.call(this,e),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,s,o,i){this.view={fullWidth:e,fullHeight:t,offsetX:n,offsetY:s,width:o,height:i},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var s,i,n=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),o=(t=(this.right+this.left)/2)-n,t=t+n,n=(s=(this.top+this.bottom)/2)+e,e=s-e;null!==this.view&&(t=this.zoom/(this.view.width/this.view.fullWidth),e=this.zoom/(this.view.height/this.view.fullHeight),i=(this.right-this.left)/this.view.width,s=(this.top-this.bottom)/this.view.height,t=(o=o+this.view.offsetX/t*i)+this.view.width/t*i,e=(n=n-this.view.offsetY/e*s)-this.view.height/e*s),this.projectionMatrix.makeOrthographic(o,t,n,e,this.near,this.far)},toJSON:function(e){return(e=s.prototype.toJSON.call(this,e)).object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),qs=0,Je.prototype.isFogExp2=!0,Je.prototype.clone=function(){return new Je(this.color.getHex(),this.density)},Je.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},et.prototype.isFog=!0,et.prototype.clone=function(){return new et(this.color.getHex(),this.near,this.far)},et.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Fe.prototype=Object.create(s.prototype),Fe.prototype.constructor=Fe,Fe.prototype.copy=function(e,t){return s.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},Fe.prototype.toJSON=function(e){var t=s.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},Kn.prototype=Object.assign(Object.create(s.prototype),{constructor:Kn,isLensFlare:!0,copy:function(e){s.prototype.copy.call(this,e),this.positionScreen.copy(e.positionScreen),this.customUpdateCallback=e.customUpdateCallback;for(var t=0,n=e.lensFlares.length;t<n;t++)this.lensFlares.push(e.lensFlares[t]);return this},add:function(e,t,n,s,o,i){void 0===t&&(t=-1),void 0===n&&(n=0),void 0===i&&(i=1),void 0===o&&(o=new a(16777215)),void 0===s&&(s=1),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:e,size:t,distance:n,x:0,y:0,z:0,scale:1,rotation:0,opacity:i,color:o,blending:s})},updateLensFlares:function(){var e,t,n=this.lensFlares.length,s=2*-this.positionScreen.x,o=2*-this.positionScreen.y;for(t=0;t<n;t++)(e=this.lensFlares[t]).x=this.positionScreen.x+s*e.distance,e.y=this.positionScreen.y+o*e.distance,e.wantedRotation=e.x*Math.PI*.25,e.rotation+=.25*(e.wantedRotation-e.rotation)}}),Te.prototype=Object.create(h.prototype),Te.prototype.constructor=Te,Te.prototype.copy=function(e){return h.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},Kt.prototype=Object.assign(Object.create(s.prototype),{constructor:Kt,isSprite:!0,raycast:function(){var e=new t;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var s=t.ray.distanceSqToPoint(e);s>this.scale.x*this.scale.y/4||n.push({distance:Math.sqrt(s),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),Ut.prototype=Object.assign(Object.create(s.prototype),{constructor:Ut,copy:function(e){s.prototype.copy.call(this,e,!1);for(var n,t=0,o=(e=e.levels).length;t<o;t++)n=e[t],this.addLevel(n.object.clone(),n.distance);return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var s=this.levels,n=0;n<s.length&&!(t<s[n].distance);n++);s.splice(n,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var n=this.levels,t=1,s=n.length;t<s&&!(e<n[t].distance);t++);return n[t-1].object},raycast:function(){var e=new t;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var s=t.ray.origin.distanceTo(e);this.getObjectForDistance(s).raycast(t,n)}}(),update:function(){var e=new t,n=new t;return function(t){if(s=this.levels,1<s.length){e.setFromMatrixPosition(t.matrixWorld),n.setFromMatrixPosition(this.matrixWorld),t=e.distanceTo(n),s[0].object.visible=!0;for(var s,o=1,i=s.length;o<i&&t>=s[o].distance;o++)s[o-1].object.visible=!1,s[o].object.visible=!0;for(;o<i;o++)s[o].object.visible=!1}}}(),toJSON:function(e){(e=s.prototype.toJSON.call(this,e)).object.levels=[];for(var n,o=this.levels,t=0,i=o.length;t<i;t++)n=o[t],e.object.levels.push({object:n.object.uuid,distance:n.distance});return e}}),Object.assign(yn.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t,e=0,n=this.bones.length;e<n;e++)t=new r,this.bones[e]&&t.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(t)},pose:function(){for(var e,t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new r;return function(){for(var t=0,n=this.bones.length;t<n;t++)e.multiplyMatrices(this.bones[t]?this.bones[t].matrixWorld:this.identityMatrix,this.boneInverses[t]),e.toArray(this.boneMatrices,16*t);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new yn(this.bones,this.boneInverses,this.useVertexTexture)}}),Nn.prototype=Object.assign(Object.create(s.prototype),{constructor:Nn,isBone:!0}),In.prototype=Object.assign(Object.create(_.prototype),{constructor:In,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++)s=1/(e=this.geometry.skinWeights[t]).lengthManhattan(),1/0!==s?e.multiplyScalar(s):e.set(1,0,0,0);else if(this.geometry&&this.geometry.isBufferGeometry){var t,s,e=new f,n=this.geometry.attributes.skinWeight;for(t=0;t<n.count;t++)e.x=n.getX(t),e.y=n.getY(t),e.z=n.getZ(t),e.w=n.getW(t),1/0!==(s=1/e.lengthManhattan())?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(t,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(){_.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),j.prototype=Object.create(h.prototype),j.prototype.constructor=j,j.prototype.isLineBasicMaterial=!0,j.prototype.copy=function(e){return h.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},ee.prototype=Object.assign(Object.create(s.prototype),{constructor:ee,isLine:!0,raycast:function(){var s=new r,e=new ie,n=new D;return function(o,i){var f=(f=o.linePrecision)*f,a=this.geometry,c=this.matrixWorld;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(c),!1!==o.ray.intersectsSphere(n)){s.getInverse(c),e.copy(o.ray).applyMatrix4(s);var r,h,m,p,d=new t,u=new t,l=(c=new t,new t),g=this&&this.isLineSegments?2:1;if(a.isBufferGeometry)if(h=a.index,m=a.attributes.position.array,null!==h){a=0;for(p=(h=h.array).length-1;a<p;a+=g)r=h[a+1],d.fromArray(m,3*h[a]),u.fromArray(m,3*r),(r=e.distanceSqToSegment(d,u,l,c))>f||(l.applyMatrix4(this.matrixWorld),(r=o.ray.origin.distanceTo(l))<o.near||r>o.far||i.push({distance:r,point:c.clone().applyMatrix4(this.matrixWorld),index:a,face:null,faceIndex:null,object:this}))}else for(a=0,p=m.length/3-1;a<p;a+=g)d.fromArray(m,3*a),u.fromArray(m,3*a+3),(r=e.distanceSqToSegment(d,u,l,c))>f||(l.applyMatrix4(this.matrixWorld),(r=o.ray.origin.distanceTo(l))<o.near||r>o.far||i.push({distance:r,point:c.clone().applyMatrix4(this.matrixWorld),index:a,face:null,faceIndex:null,object:this}));else if(a.isGeometry)for(u=(d=a.vertices).length,a=0;a<u-1;a+=g)(r=e.distanceSqToSegment(d[a],d[a+1],l,c))>f||(l.applyMatrix4(this.matrixWorld),(r=o.ray.origin.distanceTo(l))<o.near||r>o.far||i.push({distance:r,point:c.clone().applyMatrix4(this.matrixWorld),index:a,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),g.prototype=Object.assign(Object.create(ee.prototype),{constructor:g,isLineSegments:!0}),V.prototype=Object.create(h.prototype),V.prototype.constructor=V,V.prototype.isPointsMaterial=!0,V.prototype.copy=function(e){return h.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},mt.prototype=Object.assign(Object.create(s.prototype),{constructor:mt,isPoints:!0,raycast:function(){var s=new r,e=new ie,n=new D;return function(o,i){function d(t,n){var s,a,r=e.distanceSqToPoint(t);r<m&&(s=e.closestPointToPoint(t),s.applyMatrix4(u),a=o.ray.origin.distanceTo(s),a<o.near||a>o.far||i.push({distance:a,distanceToRay:Math.sqrt(r),point:s.clone(),index:n,face:null,object:p}))}var a,l,h,m,f,p=this,r=this.geometry,u=this.matrixWorld,c=o.params.Points.threshold;if(null===r.boundingSphere&&r.computeBoundingSphere(),n.copy(r.boundingSphere),n.applyMatrix4(u),!1!==o.ray.intersectsSphere(n))if(s.getInverse(u),e.copy(o.ray).applyMatrix4(s),m=(c=c/((this.scale.x+this.scale.y+this.scale.z)/3))*c,c=new t,r.isBufferGeometry)if(a=r.index,r=r.attributes.position.array,null!==a)for(l=a.array,f=(a=0,l.length);a<f;a++)h=l[a],c.fromArray(r,3*h),d(c,h);else for(a=0,l=r.length/3;a<l;a++)c.fromArray(r,3*a),d(c,a);else for(a=0,l=(c=r.vertices).length;a<l;a++)d(c[a],a)}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ct.prototype=Object.assign(Object.create(s.prototype),{constructor:Ct}),$n.prototype=Object.create(p.prototype),$n.prototype.constructor=$n,gt.prototype=Object.create(p.prototype),gt.prototype.constructor=gt,gt.prototype.isCompressedTexture=!0,Un.prototype=Object.create(p.prototype),Un.prototype.constructor=Un,Ot.prototype=Object.create(p.prototype),Ot.prototype.constructor=Ot,Ot.prototype.isDepthTexture=!0,De.prototype=Object.create(i.prototype),De.prototype.constructor=De,yt.prototype=Object.create(c.prototype),yt.prototype.constructor=yt,vt.prototype=Object.create(i.prototype),vt.prototype.constructor=vt,wt.prototype=Object.create(c.prototype),wt.prototype.constructor=wt,S.prototype=Object.create(i.prototype),S.prototype.constructor=S,xt.prototype=Object.create(c.prototype),xt.prototype.constructor=xt,ft.prototype=Object.create(S.prototype),ft.prototype.constructor=ft,Et.prototype=Object.create(c.prototype),Et.prototype.constructor=Et,je.prototype=Object.create(S.prototype),je.prototype.constructor=je,At.prototype=Object.create(c.prototype),At.prototype.constructor=At,ht.prototype=Object.create(S.prototype),ht.prototype.constructor=ht,Mt.prototype=Object.create(c.prototype),Mt.prototype.constructor=Mt,dt.prototype=Object.create(S.prototype),dt.prototype.constructor=dt,Tt.prototype=Object.create(c.prototype),Tt.prototype.constructor=Tt,lt.prototype=Object.create(i.prototype),lt.prototype.constructor=lt,bt.prototype=Object.create(c.prototype),bt.prototype.constructor=bt,ct.prototype=Object.create(i.prototype),ct.prototype.constructor=ct,Lt.prototype=Object.create(c.prototype),Lt.prototype.constructor=Lt,rt.prototype=Object.create(i.prototype),rt.prototype.constructor=rt,P={area:function(e){for(var s=e.length,o=0,n=s-1,t=0;t<s;n=t++)o+=e[n].x*e[t].y-e[t].x*e[n].y;return.5*o},triangulate:function(e,t){if(o=e.length,3>o)return null;var n,o,i,a,r,c,l,d,u,h,m,f,p,g,v,b,j,_,w,O,x,C,E,A,k=[],s=[],y=[];if(0<P.area(e))for(n=0;n<o;n++)s[n]=n;else for(n=0;n<o;n++)s[n]=o-1-n;v=2*o;for(n=o-1;2<o;){if(0>=v--){console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()");break}o<=(i=n)&&(i=0),o<=(n=i+1)&&(n=0),o<=(a=n+1)&&(a=0);t:if(u=e[s[i]].x,c=e[s[i]].y,m=e[s[n]].x,h=e[s[n]].y,f=e[s[a]].x,0>=(m-u)*((p=e[s[a]].y)-c)-(h-c)*(f-u))r=!1;else{for(E=f-m,C=p-h,_=u-f,w=c-p,O=m-u,x=h-c,r=0;r<o;r++)if(d=e[s[r]].x,l=e[s[r]].y,!(d===u&&l===c||d===m&&l===h||d===f&&l===p)&&(b=d-m,A=l-h,g=O*(j=l-c)-x*(g=d-u),j=_*(l-=p)-w*(d-=f),(b=E*A-C*b)>=-Number.EPSILON&&j>=-Number.EPSILON&&g>=-Number.EPSILON)){r=!1;break t}r=!0}if(r){for(k.push([e[s[i]],e[s[n]],e[s[a]]]),y.push([s[i],s[n],s[a]]),i=n,a=n+1;a<o;i++,a++)s[i]=s[a];v=2*--o}}return t?y:k},triangulateShape:function(e,t){function l(e){var t=e.length;2<t&&e[t-1].equals(e[0])&&e.pop()}function d(e,t,n){return e.x!==t.x?e.x<t.x?e.x<=n.x&&n.x<=t.x:t.x<=n.x&&n.x<=e.x:e.y<t.y?e.y<=n.y&&n.y<=t.y:t.y<=n.y&&n.y<=e.y}function u(e,t,n,s,o){var r=t.x-e.x,c=t.y-e.y,i=s.x-n.x,l=s.y-n.y,h=e.x-n.x,m=e.y-n.y,a=c*i-r*l,u=c*h-r*m;if(Math.abs(a)>Number.EPSILON){if(0<a){{if(0>u||u>a)return[];if(0>(i=l*h-i*m)||i>a)return[]}}else{if(0<u||u<a)return[];if(0<(i=l*h-i*m)||i<a)return[]}return 0===i?!o||0!==u&&u!==a?[e]:[]:i===a?!o||0!==u&&u!==a?[t]:[]:0===u?[n]:u===a?[s]:(o=i/a,[{x:e.x+o*r,y:e.y+o*c}])}return 0!==u||l*h!=i*m?[]:(i=0===i&&0===l,(c=0===r&&0===c)&&i?e.x!==n.x||e.y!==n.y?[]:[e]:c?d(n,s,e)?[e]:[]:i?d(e,t,n)?[n]:[]:(0!==r?(e.x<t.x?(r=e,i=e.x,c=t,e=t.x):(r=t,i=t.x,c=e,e=e.x),n.x<s.x?(t=n,a=n.x,l=s,n=s.x):(t=s,a=s.x,l=n,n=n.x)):(e.y<t.y?(r=e,i=e.y,c=t,e=t.y):(r=t,i=t.y,c=e,e=e.y),n.y<s.y?(t=n,a=n.y,l=s,n=s.y):(t=s,a=s.y,l=n,n=n.y)),i<=a?e<a?[]:e===a?o?[]:[t]:e<=n?[t,c]:[t,l]:i>n?[]:i===n?o?[]:[r]:e<=n?[r,c]:[r,l]))}function h(e,t,n,s){var i,o=t.x-e.x,a=t.y-e.y;return t=n.x-e.x,n=n.y-e.y,i=s.x-e.x,s=s.y-e.y,e=o*n-a*t,o=o*s-a*i,Math.abs(e)>Number.EPSILON?(t=i*n-s*t,0<e?0<=o&&0<=t:0<=o||0<=t):0<o}l(e),t.forEach(l);var n,s,o,i,a,r,c={};for(s=e.concat(),n=0,o=t.length;n<o;n++)Array.prototype.push.apply(s,t[n]);for(n=0,o=s.length;n<o;n++)void 0!==c[i=s[n].x+":"+s[n].y]&&console.warn("THREE.ShapeUtils: Duplicate point",i,n),c[i]=n;n=function(e,t){function b(e,t){var i,o=n.length-1,a=e-1;return 0>a&&(a=o),i=e+1,i>o&&(i=0),!!(o=h(n[e],n[a],n[i],s[t]))&&(o=s.length-1,0>(a=t-1)&&(a=o),(i=t+1)>o&&(i=0),!!(o=h(s[t],s[a],s[i],n[e])))}function y(e,t){var s,o;for(s=0;s<n.length;s++)if(o=s+1,o%=n.length,0<(o=u(e,t,n[s],n[o],!0)).length)return!0;return!1}function j(e,n){var s,i,a,r;for(a=0;a<o.length;a++)for(s=t[o[a]],i=0;i<s.length;i++)if(r=i+1,r%=s.length,0<(r=u(e,n,s[i],s[r],!0)).length)return!0;return!1}var s,i,a,r,l,d,m,f,p,v,n=e.concat(),o=[],g=[],c=0;for(i=t.length;c<i;c++)o.push(c);d=0;for(v=2*o.length;0<o.length;){if(0>--v){console.log("Infinite Loop! Holes left:"+o.length+", Probably Hole outside Shape!");break}for(r=d;r<n.length;r++){for(m=n[r],i=-1,c=0;c<o.length;c++)if(l=o[c],void 0===g[f=m.x+":"+m.y+":"+l]){for(s=t[l],a=0;a<s.length;a++)if(l=s[a],b(r,a)&&!y(m,l)&&!j(m,l)){i=a,o.splice(c,1),d=n.slice(0,r+1),l=n.slice(r),a=s.slice(i),p=s.slice(0,i+1),n=d.concat(a).concat(p).concat(l),d=r;break}if(0<=i)break;g[f]=!0}if(0<=i)break}}return n}(e,t),r=P.triangulate(n,!1);for(n=0,o=r.length;n<o;n++)for(a=r[n],s=0;3>s;s++)void 0!==(i=c[i=a[s].x+":"+a[s].y])&&(a[s]=i);return r.concat()},isClockWise:function(e){return 0>P.area(e)}},I.prototype=Object.create(c.prototype),I.prototype.constructor=I,I.prototype.addShapeList=function(e,t){for(var s=e.length,n=0;n<s;n++)this.addShape(e[n],t)},I.prototype.addShape=function(e,s){function E(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}function K(e,t,s){var l,d,a=e.x-t.x,o=e.y-t.y,i=s.x-e.x,r=s.y-e.y,c=a*a+o*o;if(Math.abs(a*r-o*i)>Number.EPSILON){if(l=Math.sqrt(c),d=Math.sqrt(i*i+r*r),c=t.x-o/l,t=t.y+a/l,2>=(o=(i=c+a*(r=((s.x-r/d-c)*r-(s.y+i/d-t)*i)/(a*r-o*i))-e.x)*i+(a=t+o*r-e.y)*a))return new n(i,a);o=Math.sqrt(o/2)}else e=!1,a>Number.EPSILON?i>Number.EPSILON&&(e=!0):a<-Number.EPSILON?i<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(r)&&(e=!0),e?(i=-o,o=Math.sqrt(c)):(i=a,a=o,o=Math.sqrt(c/2));return new n(i/o,a/o)}function U(e,t){for(o=e.length;0<=--o;){c=o,0>(r=o-1)&&(r=e.length-1),d=v+2*x;for(a=0;a<d;a++){var a,r,c,d,n=(n=t+c+(s=j*a))+O,s=(s=t+r+s)+O,l=(l=t+r+(i=j*(a+1)))+O,i=(i=t+c+i)+O;_.faces.push(new N(n,s,i,null,null,1)),_.faces.push(new N(s,l,i,null,null,1)),n=W.generateSideWallUV(_,n,s,l,i),_.faceVertexUvs[0].push([n[0],n[1],n[3]]),_.faceVertexUvs[0].push([n[1],n[2],n[3]])}}}function b(e,n,s){_.vertices.push(new t(e,n,s))}function L(e,t,n){e+=O,t+=O,n+=O,_.faces.push(new N(e,t,n,null,null,0)),e=W.generateTopUV(_,e,t,n),_.faceVertexUvs[0].push(e)}var g,y,w,k,A,S,M,T,z,B,$=void 0!==s.amount?s.amount:100,V=void 0!==s.bevelThickness?s.bevelThickness:6,H=void 0!==s.bevelSize?s.bevelSize:V-2,x=void 0!==s.bevelSegments?s.bevelSegments:3,F=void 0===s.bevelEnabled||s.bevelEnabled,u=void 0!==s.curveSegments?s.curveSegments:12,v=void 0!==s.steps?s.steps:1,p=s.extrudePath,D=!1,W=void 0!==s.UVGenerator?s.UVGenerator:I.WorldUVGenerator;p&&(A=p.getSpacedPoints(v),D=!0,F=!1,S=void 0!==s.frames?s.frames:p.computeFrenetFrames(v,!1),z=new t,T=new t,y=new t),F||(H=V=x=0);var a,l,f,_=this,O=this.vertices.length,h=(u=(p=e.extractPoints(u)).shape,p.holes);if(p=!P.isClockWise(u)){for(u=u.reverse(),a=0,f=h.length;a<f;a++)l=h[a],P.isClockWise(l)&&(h[a]=l.reverse());p=!1}k=P.triangulateShape(u,h),g=u;for(a=0,f=h.length;a<f;a++)l=h[a],u=u.concat(l);var i,r,c,d,m,C,j=u.length,R=k.length,o=(p=[],0);for(d=(i=g.length)-1,c=o+1;o<i;o++,d++,c++)d===i&&(d=0),c===i&&(c=0),p[o]=K(g[o],g[d],g[c]);B=[],M=p.concat();for(a=0,f=h.length;a<f;a++){for(l=h[a],w=[],o=0,d=(i=l.length)-1,c=o+1;o<i;o++,d++,c++)d===i&&(d=0),c===i&&(c=0),w[o]=K(l[o],l[d],l[c]);B.push(w),M=M.concat(w)}for(d=0;d<x;d++){for(i=d/x,C=V*Math.cos(i*Math.PI/2),c=H*Math.sin(i*Math.PI/2),o=0,i=g.length;o<i;o++)b((r=E(g[o],p[o],c)).x,r.y,-C);for(a=0,f=h.length;a<f;a++)for(l=h[a],w=B[a],o=0,i=l.length;o<i;o++)b((r=E(l[o],w[o],c)).x,r.y,-C)}for(c=H,o=0;o<j;o++)r=F?E(u[o],M[o],c):u[o],D?(T.copy(S.normals[0]).multiplyScalar(r.x),z.copy(S.binormals[0]).multiplyScalar(r.y),y.copy(A[0]).add(T).add(z),b(y.x,y.y,y.z)):b(r.x,r.y,0);for(i=1;i<=v;i++)for(o=0;o<j;o++)r=F?E(u[o],M[o],c):u[o],D?(T.copy(S.normals[i]).multiplyScalar(r.x),z.copy(S.binormals[i]).multiplyScalar(r.y),y.copy(A[i]).add(T).add(z),b(y.x,y.y,y.z)):b(r.x,r.y,$/v*i);for(d=x-1;0<=d;d--){for(i=d/x,C=V*Math.cos(i*Math.PI/2),c=H*Math.sin(i*Math.PI/2),o=0,i=g.length;o<i;o++)b((r=E(g[o],p[o],c)).x,r.y,$+C);for(a=0,f=h.length;a<f;a++)for(l=h[a],w=B[a],o=0,i=l.length;o<i;o++)r=E(l[o],w[o],c),D?b(r.x,r.y+A[v-1].y,A[v-1].x+C):b(r.x,r.y,$+C)}!function(){if(F){var e=0*j;for(o=0;o<R;o++)L((m=k[o])[2]+e,m[1]+e,m[0]+e);for(e=j*(v+2*x),o=0;o<R;o++)L((m=k[o])[0]+e,m[1]+e,m[2]+e)}else{for(o=0;o<R;o++)L((m=k[o])[2],m[1],m[0]);for(o=0;o<R;o++)L((m=k[o])[0]+j*v,m[1]+j*v,m[2]+j*v)}}(),function(){var e=0;for(U(g,e),e+=g.length,a=0,f=h.length;a<f;a++)U(l=h[a],e),e+=l.length}()},I.WorldUVGenerator={generateTopUV:function(e,t,s,o){return t=(e=e.vertices)[t],s=e[s],o=e[o],[new n(t.x,t.y),new n(s.x,s.y),new n(o.x,o.y)]},generateSideWallUV:function(e,t,s,o,i){return t=(e=e.vertices)[t],s=e[s],o=e[o],i=e[i],.01>Math.abs(t.y-s.y)?[new n(t.x,1-t.z),new n(s.x,1-s.z),new n(o.x,1-o.z),new n(i.x,1-i.z)]:[new n(t.y,1-t.z),new n(s.y,1-s.z),new n(o.y,1-o.z),new n(i.y,1-i.z)]}},Ht.prototype=Object.create(I.prototype),Ht.prototype.constructor=Ht,It.prototype=Object.create(c.prototype),It.prototype.constructor=It,ve.prototype=Object.create(i.prototype),ve.prototype.constructor=ve,Vt.prototype=Object.create(c.prototype),Vt.prototype.constructor=Vt,at.prototype=Object.create(i.prototype),at.prototype.constructor=at,Wt.prototype=Object.create(c.prototype),Wt.prototype.constructor=Wt,it.prototype=Object.create(i.prototype),it.prototype.constructor=it,ot.prototype=Object.create(c.prototype),ot.prototype.constructor=ot,ze.prototype=Object.create(i.prototype),ze.prototype.constructor=ze,st.prototype=Object.create(i.prototype),st.prototype.constructor=st,he.prototype=Object.create(c.prototype),he.prototype.constructor=he,J.prototype=Object.create(i.prototype),J.prototype.constructor=J,Qt.prototype=Object.create(he.prototype),Qt.prototype.constructor=Qt,Zt.prototype=Object.create(J.prototype),Zt.prototype.constructor=Zt,Jt.prototype=Object.create(c.prototype),Jt.prototype.constructor=Jt,nt.prototype=Object.create(i.prototype),nt.prototype.constructor=nt,H=Object.freeze({WireframeGeometry:De,ParametricGeometry:yt,ParametricBufferGeometry:vt,TetrahedronGeometry:xt,TetrahedronBufferGeometry:ft,OctahedronGeometry:Et,OctahedronBufferGeometry:je,IcosahedronGeometry:At,IcosahedronBufferGeometry:ht,DodecahedronGeometry:Mt,DodecahedronBufferGeometry:dt,PolyhedronGeometry:wt,PolyhedronBufferGeometry:S,TubeGeometry:Tt,TubeBufferGeometry:lt,TorusKnotGeometry:bt,TorusKnotBufferGeometry:ct,TorusGeometry:Lt,TorusBufferGeometry:rt,TextGeometry:Ht,SphereGeometry:It,SphereBufferGeometry:ve,RingGeometry:Vt,RingBufferGeometry:at,PlaneGeometry:St,PlaneBufferGeometry:Ee,LatheGeometry:Wt,LatheBufferGeometry:it,ShapeGeometry:ot,ShapeBufferGeometry:ze,ExtrudeGeometry:I,EdgesGeometry:st,ConeGeometry:Qt,ConeBufferGeometry:Zt,CylinderGeometry:he,CylinderBufferGeometry:J,CircleGeometry:Jt,CircleBufferGeometry:nt,BoxGeometry:pt,BoxBufferGeometry:xe}),tt.prototype=Object.create(E.prototype),tt.prototype.constructor=tt,tt.prototype.isShadowMaterial=!0,Ze.prototype=Object.create(E.prototype),Ze.prototype.constructor=Ze,Ze.prototype.isRawShaderMaterial=!0,sn.prototype={constructor:sn,isMultiMaterial:!0,toJSON:function(e){for(var s,t={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},o=this.materials,n=0,i=o.length;n<i;n++)s=o[n].toJSON(e),delete s.metadata,t.materials.push(s);return t.visible=this.visible,t},clone:function(){for(var e=new this.constructor,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e.visible=this.visible,e}},Y.prototype=Object.create(h.prototype),Y.prototype.constructor=Y,Y.prototype.isMeshStandardMaterial=!0,Y.prototype.copy=function(e){return h.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},le.prototype=Object.create(Y.prototype),le.prototype.constructor=le,le.prototype.isMeshPhysicalMaterial=!0,le.prototype.copy=function(e){return Y.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},U.prototype=Object.create(h.prototype),U.prototype.constructor=U,U.prototype.isMeshPhongMaterial=!0,U.prototype.copy=function(e){return h.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},de.prototype=Object.create(U.prototype),de.prototype.constructor=de,de.prototype.isMeshToonMaterial=!0,de.prototype.copy=function(e){return U.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},ue.prototype=Object.create(h.prototype),ue.prototype.constructor=ue,ue.prototype.isMeshNormalMaterial=!0,ue.prototype.copy=function(e){return h.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},fe.prototype=Object.create(h.prototype),fe.prototype.constructor=fe,fe.prototype.isMeshLambertMaterial=!0,fe.prototype.copy=function(e){return h.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ge.prototype=Object.create(h.prototype),ge.prototype.constructor=ge,ge.prototype.isLineDashedMaterial=!0,ge.prototype.copy=function(e){return h.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Ao=Object.freeze({ShadowMaterial:tt,SpriteMaterial:Te,RawShaderMaterial:Ze,ShaderMaterial:E,PointsMaterial:V,MultiMaterial:sn,MeshPhysicalMaterial:le,MeshStandardMaterial:Y,MeshPhongMaterial:U,MeshToonMaterial:de,MeshNormalMaterial:ue,MeshLambertMaterial:fe,MeshDepthMaterial:te,MeshBasicMaterial:M,LineDashedMaterial:ge,LineBasicMaterial:j,Material:h}),Dt={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},T=new os;Object.assign($.prototype,{load:function(e,t,n,s){if(void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),a=this,l=Dt.get(e),void 0!==l)return a.manager.itemStart(e),setTimeout(function(){t&&t(l),a.manager.itemEnd(e)},0),l;if(o=e.match(/^data:(.*?)(;base64)?,(.*)$/)){var i,a,r,l,d,h,u=o[1],c=!!o[2],o=o[3];o=window.decodeURIComponent(o),c&&(o=window.atob(o));try{switch(d=(this.responseType||"").toLowerCase(),d){case"arraybuffer":case"blob":r=new ArrayBuffer(o.length),h=new Uint8Array(r);for(c=0;c<o.length;c++)h[c]=o.charCodeAt(c);"blob"===d&&(r=new Blob([r],{type:u}));break;case"document":r=(new DOMParser).parseFromString(o,u);break;case"json":r=JSON.parse(o);break;default:r=o}window.setTimeout(function(){t&&t(r),a.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){s&&s(t),a.manager.itemError(e)},0)}}else i=new XMLHttpRequest,i.open("GET",e,!0),i.addEventListener("load",function(n){var o=n.target.response;Dt.add(e,o),200===this.status?(t&&t(o),a.manager.itemEnd(e)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),t&&t(o),a.manager.itemEnd(e)):(s&&s(n),a.manager.itemError(e))},!1),void 0!==n&&i.addEventListener("progress",function(e){n(e)},!1),i.addEventListener("error",function(t){s&&s(t),a.manager.itemError(e)},!1),void 0!==this.responseType&&(i.responseType=this.responseType),void 0!==this.withCredentials&&(i.withCredentials=this.withCredentials),i.overrideMimeType&&i.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),i.send(null);return a.manager.itemStart(e),i},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this}}),Object.assign(Ns.prototype,{load:function(e,t,n,s){function l(r){a.load(e[r],function(e){e=c._parser(e,!0),i[r]={width:e.width,height:e.height,format:e.format,mipmaps:e.mipmaps},6===(d+=1)&&(1===e.mipmapCount&&(o.minFilter=1006),o.format=e.format,o.needsUpdate=!0,t&&t(o))},n,s)}var a,c=this,i=[],o=new gt;if(o.image=i,a=new $(this.manager),a.setPath(this.path),a.setResponseType("arraybuffer"),Array.isArray(e))for(var d=0,r=0,u=e.length;r<u;++r)l(r);else a.load(e,function(e){if((e=c._parser(e,!0)).isCubemap)for(var s,a=e.mipmaps.length/e.mipmapCount,n=0;n<a;n++){i[n]={mipmaps:[]};for(s=0;s<e.mipmapCount;s++)i[n].mipmaps.push(e.mipmaps[n*e.mipmapCount+s]),i[n].format=e.format,i[n].width=e.width,i[n].height=e.height}else o.image.width=e.width,o.image.height=e.height,o.mipmaps=e.mipmaps;1===e.mipmapCount&&(o.minFilter=1006),o.format=e.format,o.needsUpdate=!0,t&&t(o)},n,s);return o},setPath:function(e){return this.path=e,this}}),Object.assign(cs.prototype,{load:function(e,t,n,s){var a=this,o=new be,i=new $(this.manager);return i.setResponseType("arraybuffer"),i.load(e,function(e){(e=a._parser(e))&&(void 0!==e.image?o.image=e.image:void 0!==e.data&&(o.image.width=e.width,o.image.height=e.height,o.image.data=e.data),o.wrapS=void 0!==e.wrapS?e.wrapS:1001,o.wrapT=void 0!==e.wrapT?e.wrapT:1001,o.magFilter=void 0!==e.magFilter?e.magFilter:1006,o.minFilter=void 0!==e.minFilter?e.minFilter:1008,o.anisotropy=void 0!==e.anisotropy?e.anisotropy:1,void 0!==e.format&&(o.format=e.format),void 0!==e.type&&(o.type=e.type),void 0!==e.mipmaps&&(o.mipmaps=e.mipmaps),1===e.mipmapCount&&(o.minFilter=1006),o.needsUpdate=!0,t&&t(o,e))},n,s),o}}),Object.assign(an.prototype,{load:function(e,t,n,s){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var o=this,i=Dt.get(e);return void 0!==i?(o.manager.itemStart(e),setTimeout(function(){t&&t(i),o.manager.itemEnd(e)},0),i):((n=document.createElementNS("http://www.w3.org/1999/xhtml","img")).addEventListener("load",function(){Dt.add(e,this),t&&t(this),o.manager.itemEnd(e)},!1),n.addEventListener("error",function(t){s&&s(t),o.manager.itemError(e)},!1),void 0!==this.crossOrigin&&(n.crossOrigin=this.crossOrigin),o.manager.itemStart(e),n.src=e,n)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Os.prototype,{load:function(e,t,n,s){function r(n){i.load(e[n],function(e){o.images[n]=e,6===++a&&(o.needsUpdate=!0,t&&t(o))},void 0,s)}var a,o=new se,i=new an(this.manager);i.setCrossOrigin(this.crossOrigin),i.setPath(this.path),a=0;for(n=0;n<e.length;++n)r(n);return o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(bn.prototype,{load:function(e,t,n,s){var o=new p,i=new an(this.manager);return i.setCrossOrigin(this.crossOrigin),i.setPath(this.path),i.load(e,function(n){var s=0<e.search(/\.(jpg|jpeg)$/)||0===e.search(/^data:image\/jpeg/);o.format=s?1022:1023,o.image=n,o.needsUpdate=!0,void 0!==t&&t(o)},n,s),o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),b.prototype=Object.assign(Object.create(s.prototype),{constructor:b,isLight:!0,copy:function(e){return s.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){return(e=s.prototype.toJSON.call(this,e)).object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),fn.prototype=Object.assign(Object.create(b.prototype),{constructor:fn,isHemisphereLight:!0,copy:function(e){return b.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(ye.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),wn.prototype=Object.assign(Object.create(ye.prototype),{constructor:wn,isSpotLightShadow:!0,update:function(e){var t,n=2*l.RAD2DEG*e.angle,s=this.mapSize.width/this.mapSize.height;e=e.distance||500,t=this.camera,n===t.fov&&s===t.aspect&&e===t.far||(t.fov=n,t.aspect=s,t.far=e,t.updateProjectionMatrix())}}),On.prototype=Object.assign(Object.create(b.prototype),{constructor:On,isSpotLight:!0,copy:function(e){return b.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),xn.prototype=Object.assign(Object.create(b.prototype),{constructor:xn,isPointLight:!0,copy:function(e){return b.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Cn.prototype=Object.assign(Object.create(ye.prototype),{constructor:Cn}),Fn.prototype=Object.assign(Object.create(b.prototype),{constructor:Fn,isDirectionalLight:!0,copy:function(e){return b.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),kn.prototype=Object.assign(Object.create(b.prototype),{constructor:kn,isAmbientLight:!0}),O={arraySlice:function(e,t,n){return O.isTypedArray(e)?new e.constructor(e.subarray(t,n)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var s=e.length,n=Array(s),t=0;t!==s;++t)n[t]=t;return n.sort(function(t,n){return e[t]-e[n]}),n},sortedArray:function(e,t,n){for(var s,c,o=e.length,i=new e.constructor(o),a=0,r=0;r!==o;++a)for(c=n[a]*t,s=0;s!==t;++s)i[r++]=e[c+s];return i},flattenJSON:function(e,t,n,s){for(var i,a=1,o=e[0];void 0!==o&&void 0===o[s];)o=e[a++];if(void 0!==o&&(i=o[s],void 0!==i))if(Array.isArray(i))do void 0!==(i=o[s])&&(t.push(o.time),n.push.apply(n,i)),o=e[a++];while(void 0!==o)else if(void 0!==i.toArray)do void 0!==(i=o[s])&&(t.push(o.time),i.toArray(n,n.length)),o=e[a++];while(void 0!==o)else do void 0!==(i=o[s])&&(t.push(o.time),n.push(i)),o=e[a++];while(void 0!==o)}},F.prototype={constructor:F,evaluate:function(e){var i,o=this.parameterPositions,t=this._cachedIndex,n=o[t],s=o[t-1];t:{e:{i:{n:if(!(e<n)){for(i=t+2;;){if(void 0===n){if(e<s)break n;return this._cachedIndex=t=o.length,this.afterEnd_(t-1,e,s)}if(t===i)break;if(s=n,e<(n=o[++t]))break e}n=o.length;break i}if(e>=s)break t;for(e<(i=o[1])&&(t=2,s=i),i=t-2;;){if(void 0===s)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(t===i)break;if(n=s,e>=(s=o[--t-1]))break e}n=t,t=0}for(;t<n;)e<o[s=t+n>>>1]?n=s:t=s+1;if(n=o[t],void 0===(s=o[t-1]))return this._cachedIndex=0,this.beforeStart_(0,e,n);if(void 0===n)return this._cachedIndex=t=o.length,this.afterEnd_(t-1,s,e)}this._cachedIndex=t,this.intervalChanged_(t,s,n)}return this.interpolate_(t,s,e,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){var t,n=this.resultBuffer,o=this.sampleValues,s=this.valueSize;e*=s;for(t=0;t!==s;++t)n[t]=o[e+t];return n},interpolate_:function(){throw Error("call to abstract method")},intervalChanged_:function(){}},Object.assign(F.prototype,{beforeStart_:F.prototype.copySampleValue_,afterEnd_:F.prototype.copySampleValue_}),mn.prototype=Object.assign(Object.create(F.prototype),{constructor:mn,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(e,t,n){var s=this.parameterPositions,o=e-2,i=e+1,a=s[o],r=s[i];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:o=e,a=2*t-n;break;case 2402:a=t+s[o=s.length-2]-s[o+1];break;default:o=e,a=n}if(void 0===r)switch(this.getSettings_().endingEnd){case 2401:i=e,r=2*n-t;break;case 2402:i=1,r=n+s[1]-s[0];break;default:i=e-1,r=t}e=.5*(n-t),s=this.valueSize,this._weightPrev=e/(t-a),this._weightNext=e/(r-n),this._offsetPrev=o*s,this._offsetNext=i*s},interpolate_:function(e,t,n,s){var l=this.resultBuffer,r=this.sampleValues,c=this.valueSize,d=(e*=c)-c,u=this._offsetPrev,h=this._offsetNext,o=this._weightPrev,a=this._weightNext,i=(n-t)/(s-t);for(t=-o*(s=(n=i*i)*i)+2*o*n-o*i,o=(1+o)*s+(-1.5-2*o)*n+(-.5+o)*i+1,i=(-1-a)*s+(1.5+a)*n+.5*i,a=a*s-a*n,n=0;n!==c;++n)l[n]=t*r[u+n]+o*r[d+n]+i*r[e+n]+a*r[h+n];return l}}),$t.prototype=Object.assign(Object.create(F.prototype),{constructor:$t,interpolate_:function(e,t,n,s){var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,r=(e*=o)-o;for(n=1-(t=(n-t)/(s-t)),s=0;s!==o;++s)i[s]=a[r+s]*n+a[e+s]*t;return i}}),En.prototype=Object.assign(Object.create(F.prototype),{constructor:En,interpolate_:function(e){return this.copySampleValue_(e-1)}}),G={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new En(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new $t(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new mn(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){if(t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name,void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw Error(t);this.setInterpolation(this.DefaultInterpolation)}console.warn(t)}else this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var n=this.times,t=0,s=n.length;t!==s;++t)n[t]+=e;return this},scale:function(e){if(1!==e)for(var n=this.times,t=0,s=n.length;t!==s;++t)n[t]*=e;return this},trim:function(e,t){for(var i=this.times,o=i.length,s=0,n=o-1;s!==o&&i[s]<e;)++s;for(;-1!==n&&i[n]>t;)--n;return++n,0===s&&n===o||(s>=n&&(s=(n=Math.max(n,1))-1),o=this.getValueSize(),this.times=O.arraySlice(i,s,n),this.values=O.arraySlice(this.values,s*o,n*o)),this},validate:function(){t=!0,0!=(s=this.getValueSize())-Math.floor(s)&&(console.error("invalid value size in track",this),t=!1);var e,t,n,i,a=this.times,s=this.values,o=a.length;0===o&&(console.error("track is empty",this),t=!1);for(i=null,e=0;e!==o;e++){if(n=a[e],"number"==typeof n&&isNaN(n)){console.error("time is not a valid number",this,e,n),t=!1;break}if(null!==i&&i>n){console.error("out of order keys",this,e,n,i),t=!1;break}i=n}if(void 0!==s&&O.isTypedArray(s))for(e=0,a=s.length;e!==a;++e)if(o=s[e],isNaN(o)){console.error("value is not a valid number",this,e,o),t=!1;break}return t},optimize:function(){for(var a,l,s=this.times,i=this.values,t=this.getValueSize(),d=2302===this.getInterpolation(),n=1,c=s.length-1,o=1;o<c;++o){if(a=!1,(e=s[o])!==s[o+1]&&(1!==o||e!==e[0]))if(d)a=!0;else for(var r=o*t,h=r-t,u=r+t,e=0;e!==t;++e)if(l=i[r+e],l!==i[h+e]||l!==i[u+e]){a=!0;break}if(a){if(o!==n)for(s[n]=s[o],a=o*t,r=n*t,e=0;e!==t;++e)i[r+e]=i[a+e];++n}}if(0<c){for(s[n]=s[c],a=c*t,r=n*t,e=0;e!==t;++e)i[r+e]=i[a+e];++n}return n!==s.length&&(this.times=O.arraySlice(s,0,n),this.values=O.arraySlice(i,0,n*t)),this}},Qe.prototype=Object.assign(Object.create(G),{constructor:Qe,ValueTypeName:"vector"}),Dn.prototype=Object.assign(Object.create(F.prototype),{constructor:Dn,interpolate_:function(e,t,n,s){var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize;for(t=(n-t)/(s-t),n=(e*=o)+o;e!==n;e+=4)y.slerpFlat(i,0,a,e-o,a,e,t);return i}}),Rt.prototype=Object.assign(Object.create(G),{constructor:Rt,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new Dn(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Xe.prototype=Object.assign(Object.create(G),{constructor:Xe,ValueTypeName:"number"}),Rn.prototype=Object.assign(Object.create(G),{constructor:Rn,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Pn.prototype=Object.assign(Object.create(G),{constructor:Pn,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Hn.prototype=Object.assign(Object.create(G),{constructor:Hn,ValueTypeName:"color"}),we.prototype=G,G.constructor=we,Object.assign(we,{parse:function(e){if(void 0===e.type)throw Error("track type undefined, can not parse");if(t=we._getTrackTypeForValueTypeName(e.type),void 0===e.times){var t,n=[],s=[];O.flattenJSON(e.keys,n,s,"value"),e.times=n,e.values=s}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){if(void 0!==(t=e.constructor).toJSON)t=t.toJSON(e);else{var t={name:e.name,times:O.convertArray(e.times,Array),values:O.convertArray(e.values,Array)},n=e.getInterpolation();n!==e.DefaultInterpolation&&(t.interpolation=n)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Xe;case"vector":case"vector2":case"vector3":case"vector4":return Qe;case"color":return Hn;case"quaternion":return Rt;case"bool":case"boolean":return Pn;case"string":return Rn}throw Error("Unsupported typeName: "+e)}}),L.prototype={constructor:L,resetDuration:function(){for(var n,e=0,t=0,s=this.tracks.length;t!==s;++t)n=this.tracks[t],e=Math.max(e,n.times[n.times.length-1]);this.duration=e},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},Object.assign(L,{parse:function(e){for(var n=[],s=e.tracks,o=1/(e.fps||1),t=0,i=s.length;t!==i;++t)n.push(we.parse(s[t]).scale(o));return new L(e.name,e.duration,n)},toJSON:function(e){var t,o,n=[],s=e.tracks;e={name:e.name,duration:e.duration,tracks:n};for(t=0,o=s.length;t!==o;++t)n.push(we.toJSON(s[t]));return e},CreateFromMorphTargetSequence:function(e,t,n,s){for(var o,i,c,r=t.length,l=[],a=0;a<r;a++)o=[],(i=[]).push((a+r-1)%r,a,(a+1)%r),o.push(0,1,0),c=O.getKeyframeOrder(i),i=O.sortedArray(i,1,c),o=O.sortedArray(o,1,c),s||0!==i[0]||(i.push(r),o.push(o[0])),l.push(new Xe(".morphTargetInfluences["+t[a].name+"]",i,o).scale(1/n));return new L(e,-1,l)},findByName:function(e,t){var n,s=e;Array.isArray(e)||(s=e.geometry&&e.geometry.animations||e.animations);for(n=0;n<s.length;n++)if(s[n].name===t)return s[n];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var s,o,r,i={},c=/^([\w-]*?)([\d]+)$/,a=0,l=e.length;a<l;a++)r=e[a],s=r.name.match(c),s&&1<s.length&&(o=s[1],(s=i[o])||(i[o]=s=[]),s.push(r));for(o in e=[],i)e.push(L.CreateFromMorphTargetSequence(o,i[o],t,n));return e},parseAnimation:function(e,t){if(!e)return console.error("  no animation in JSONLoader data"),null;for(var n,s,o,l,d,u,m,c=function(e,t,n,s,o){if(0!==n.length){var i=[],a=[];O.flattenJSON(n,i,a,s),0!==i.length&&o.push(new e(t,i,a))}},a=[],p=e.name||"default",i=e.length||-1,f=e.fps||30,h=e.hierarchy||[],r=0;r<h.length;r++)if(n=h[r].keys,n&&0!==n.length)if(n[0].morphTargets){i={};for(s=0;s<n.length;s++)if(n[s].morphTargets)for(o=0;o<n[s].morphTargets.length;o++)i[n[s].morphTargets[o]]=-1;for(m in i){l=[],d=[];for(o=0;o!==n[s].morphTargets.length;++o)u=n[s],l.push(u.time),d.push(u.morphTarget===m?1:0);a.push(new Xe(".morphTargetInfluence["+m+"]",l,d))}i=i.length*(f||1)}else c(Qe,(s=".bones["+t[r].name+"]")+".position",n,"pos",a),c(Rt,s+".quaternion",n,"rot",a),c(Qe,s+".scale",n,"scl",a);return 0===a.length?null:new L(p,i,a)}}),Object.assign(Vn.prototype,{load:function(e,t,n,s){var o=this;new $(o.manager).load(e,function(e){t(o.parse(JSON.parse(e)))},n,s)},setTextures:function(e){this.textures=e},parse:function(e){function s(e){return void 0===i[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),i[e]}var o,a,i=this.textures,t=new Ao[e.type];if((void 0!==e.uuid&&(t.uuid=e.uuid),void 0!==e.name&&(t.name=e.name),void 0!==e.color&&t.color.setHex(e.color),void 0!==e.roughness&&(t.roughness=e.roughness),void 0!==e.metalness&&(t.metalness=e.metalness),void 0!==e.emissive&&t.emissive.setHex(e.emissive),void 0!==e.specular&&t.specular.setHex(e.specular),void 0!==e.shininess&&(t.shininess=e.shininess),void 0!==e.clearCoat&&(t.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(t.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(t.uniforms=e.uniforms),void 0!==e.vertexShader&&(t.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(t.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(t.vertexColors=e.vertexColors),void 0!==e.fog&&(t.fog=e.fog),void 0!==e.shading&&(t.shading=e.shading),void 0!==e.blending&&(t.blending=e.blending),void 0!==e.side&&(t.side=e.side),void 0!==e.opacity&&(t.opacity=e.opacity),void 0!==e.transparent&&(t.transparent=e.transparent),void 0!==e.alphaTest&&(t.alphaTest=e.alphaTest),void 0!==e.depthTest&&(t.depthTest=e.depthTest),void 0!==e.depthWrite&&(t.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(t.colorWrite=e.colorWrite),void 0!==e.wireframe&&(t.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(t.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(t.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(t.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.skinning&&(t.skinning=e.skinning),void 0!==e.morphTargets&&(t.morphTargets=e.morphTargets),void 0!==e.size&&(t.size=e.size),void 0!==e.sizeAttenuation&&(t.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(t.map=s(e.map)),void 0!==e.alphaMap&&(t.alphaMap=s(e.alphaMap),t.transparent=!0),void 0!==e.bumpMap&&(t.bumpMap=s(e.bumpMap)),void 0!==e.bumpScale&&(t.bumpScale=e.bumpScale),void 0!==e.normalMap&&(t.normalMap=s(e.normalMap)),void 0!==e.normalScale)&&(o=e.normalScale,!1===Array.isArray(o)&&(o=[o,o]),t.normalScale=(new n).fromArray(o)),void 0!==e.displacementMap&&(t.displacementMap=s(e.displacementMap)),void 0!==e.displacementScale&&(t.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(t.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(t.roughnessMap=s(e.roughnessMap)),void 0!==e.metalnessMap&&(t.metalnessMap=s(e.metalnessMap)),void 0!==e.emissiveMap&&(t.emissiveMap=s(e.emissiveMap)),void 0!==e.emissiveIntensity&&(t.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(t.specularMap=s(e.specularMap)),void 0!==e.envMap&&(t.envMap=s(e.envMap)),void 0!==e.reflectivity&&(t.reflectivity=e.reflectivity),void 0!==e.lightMap&&(t.lightMap=s(e.lightMap)),void 0!==e.lightMapIntensity&&(t.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(t.aoMap=s(e.aoMap)),void 0!==e.aoMapIntensity&&(t.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(t.gradientMap=s(e.gradientMap)),void 0!==e.materials){o=0;for(a=e.materials.length;o<a;o++)t.materials.push(this.parse(e.materials[o]))}return t}}),Object.assign(ts.prototype,{load:function(e,t,n,s){var o=this;new $(o.manager).load(e,function(e){t(o.parse(JSON.parse(e)))},n,s)},parse:function(e){var o,a,c,r=new i,n=e.data.index,s={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};void 0!==n&&(n=new s[n.type](n.array),r.setIndex(new u(n,1))),a=e.data.attributes;for(o in a)c=a[o],n=new s[c.type](c.array),r.addAttribute(o,new u(n,c.itemSize,c.normalized));if(void 0!==(s=e.data.groups||e.data.drawcalls||e.data.offsets))for(o=0,n=s.length;o!==n;++o)a=s[o],r.addGroup(a.start,a.count,a.materialIndex);return void 0!==(e=e.data.boundingSphere)&&(s=new t,void 0!==e.center&&s.fromArray(e.center),r.boundingSphere=new D(s,e.radius)),r}}),Oe.prototype={constructor:Oe,crossOrigin:void 0,extractUrlBase:function(e){return 1===(e=e.split("/")).length?"./":(e.pop(),e.join("/")+"/")},initMaterials:function(e,t,n){for(var o=[],s=0;s<e.length;++s)o[s]=this.createMaterial(e[s],t,n);return o},createMaterial:function(){var e,t,n,s={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5};return function(o,i,r){function u(e,n,s,o,a){e=i+e;var c=Oe.Handlers.get(e);return null!==c?e=c.load(e):(t.setCrossOrigin(r),e=t.load(e)),void 0!==n&&(e.repeat.fromArray(n),1!==n[0]&&(e.wrapS=1e3),1!==n[1]&&(e.wrapT=1e3)),void 0!==s&&e.offset.fromArray(s),void 0!==o&&("repeat"===o[0]&&(e.wrapS=1e3),"mirror"===o[0]&&(e.wrapS=1002),"repeat"===o[1]&&(e.wrapT=1e3),"mirror"===o[1]&&(e.wrapT=1002)),void 0!==a&&(e.anisotropy=a),n=l.generateUUID(),m[n]=e,n}void 0===e&&(e=new a),void 0===t&&(t=new bn),void 0===n&&(n=new Vn);var d,h,m={},c={uuid:l.generateUUID(),type:"MeshLambertMaterial"};for(h in o)switch(d=o[h],h){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"DbgName":c.name=d;break;case"blending":c.blending=s[d];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",h,"is no longer supported.");break;case"colorDiffuse":c.color=e.fromArray(d).getHex();break;case"colorSpecular":c.specular=e.fromArray(d).getHex();break;case"colorEmissive":c.emissive=e.fromArray(d).getHex();break;case"specularCoef":c.shininess=d;break;case"shading":"basic"===d.toLowerCase()&&(c.type="MeshBasicMaterial"),"phong"===d.toLowerCase()&&(c.type="MeshPhongMaterial"),"standard"===d.toLowerCase()&&(c.type="MeshStandardMaterial");break;case"mapDiffuse":c.map=u(d,o.mapDiffuseRepeat,o.mapDiffuseOffset,o.mapDiffuseWrap,o.mapDiffuseAnisotropy);break;case"mapEmissive":c.emissiveMap=u(d,o.mapEmissiveRepeat,o.mapEmissiveOffset,o.mapEmissiveWrap,o.mapEmissiveAnisotropy);break;case"mapLight":c.lightMap=u(d,o.mapLightRepeat,o.mapLightOffset,o.mapLightWrap,o.mapLightAnisotropy);break;case"mapAO":c.aoMap=u(d,o.mapAORepeat,o.mapAOOffset,o.mapAOWrap,o.mapAOAnisotropy);break;case"mapBump":c.bumpMap=u(d,o.mapBumpRepeat,o.mapBumpOffset,o.mapBumpWrap,o.mapBumpAnisotropy);break;case"mapBumpScale":c.bumpScale=d;break;case"mapNormal":c.normalMap=u(d,o.mapNormalRepeat,o.mapNormalOffset,o.mapNormalWrap,o.mapNormalAnisotropy);break;case"mapNormalFactor":c.normalScale=[d,d];break;case"mapSpecular":c.specularMap=u(d,o.mapSpecularRepeat,o.mapSpecularOffset,o.mapSpecularWrap,o.mapSpecularAnisotropy);break;case"mapMetalness":c.metalnessMap=u(d,o.mapMetalnessRepeat,o.mapMetalnessOffset,o.mapMetalnessWrap,o.mapMetalnessAnisotropy);break;case"mapRoughness":c.roughnessMap=u(d,o.mapRoughnessRepeat,o.mapRoughnessOffset,o.mapRoughnessWrap,o.mapRoughnessAnisotropy);break;case"mapAlpha":c.alphaMap=u(d,o.mapAlphaRepeat,o.mapAlphaOffset,o.mapAlphaWrap,o.mapAlphaAnisotropy);break;case"flipSided":c.side=1;break;case"doubleSided":c.side=2;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),c.opacity=d;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":c[h]=d;break;case"vertexColors":!0===d&&(c.vertexColors=2),"face"===d&&(c.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",h,d)}return"MeshBasicMaterial"===c.type&&delete c.emissive,"MeshPhongMaterial"!==c.type&&delete c.specular,1>c.opacity&&(c.transparent=!0),n.setTextures(m),n.parse(c)}}()},Oe.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var s,n=this.handlers,t=0,o=n.length;t<o;t+=2)if(s=n[t+1],n[t].test(e))return s;return null}},Object.assign(Zn.prototype,{load:function(e,t,n,s){var i=this,a=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:Oe.prototype.extractUrlBase(e),o=new $(this.manager);o.setWithCredentials(this.withCredentials),o.load(e,function(n){var s=(n=JSON.parse(n)).metadata;if(void 0!==s&&void 0!==(s=s.type)){if("object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");if("scene"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.")}n=i.parse(n,a),t(n.geometry,n.materials)},n,s)},setTexturePath:function(e){this.texturePath=e},parse:function(e,s){var o=new c,i=void 0!==e.scale?1/e.scale:1;return function(s){var i,r,l,d,u,h,f,p,g,v,b,j,w,c=e.faces,d=e.vertices,m=e.normals,y=e.colors,_=0;if(void 0!==e.uvs){for(i=0;i<e.uvs.length;i++)e.uvs[i].length&&_++;for(i=0;i<_;i++)o.faceVertexUvs[i]=[]}for(r=0,w=d.length;r<w;)(i=new t).x=d[r++]*s,i.y=d[r++]*s,i.z=d[r++]*s,o.vertices.push(i);for(r=0,w=c.length;r<w;)if(l=1&(s=c[r++]),h=2&s,i=8&s,u=16&s,g=32&s,d=64&s,s&=128,l){if((l=new N).a=c[r],l.b=c[r+1],l.c=c[r+3],(f=new N).a=c[r+1],f.b=c[r+2],f.c=c[r+3],r+=4,h&&(h=c[r++],l.materialIndex=h,f.materialIndex=h),h=o.faces.length,i)for(i=0;i<_;i++)for(b=e.uvs[i],o.faceVertexUvs[i][h]=[],o.faceVertexUvs[i][h+1]=[],p=0;4>p;p++)v=new n(v=b[2*(j=c[r++])],j=b[2*j+1]),2!==p&&o.faceVertexUvs[i][h].push(v),0!==p&&o.faceVertexUvs[i][h+1].push(v);if(u&&(u=3*c[r++],l.normal.set(m[u++],m[u++],m[u]),f.normal.copy(l.normal)),g)for(i=0;4>i;i++)u=3*c[r++],g=new t(m[u++],m[u++],m[u]),2!==i&&l.vertexNormals.push(g),0!==i&&f.vertexNormals.push(g);if(d&&(d=y[d=c[r++]],l.color.setHex(d),f.color.setHex(d)),s)for(i=0;4>i;i++)d=y[d=c[r++]],2!==i&&l.vertexColors.push(new a(d)),0!==i&&f.vertexColors.push(new a(d));o.faces.push(l),o.faces.push(f)}else{if((l=new N).a=c[r++],l.b=c[r++],l.c=c[r++],h&&(h=c[r++],l.materialIndex=h),h=o.faces.length,i)for(i=0;i<_;i++)for(b=e.uvs[i],o.faceVertexUvs[i][h]=[],p=0;3>p;p++)v=new n(v=b[2*(j=c[r++])],j=b[2*j+1]),o.faceVertexUvs[i][h].push(v);if(u&&(u=3*c[r++],l.normal.set(m[u++],m[u++],m[u])),g)for(i=0;3>i;i++)u=3*c[r++],g=new t(m[u++],m[u++],m[u]),l.vertexNormals.push(g);if(d&&(d=c[r++],l.color.setHex(y[d])),s)for(i=0;3>i;i++)d=c[r++],l.vertexColors.push(new a(y[d]));o.faces.push(l)}}(i),function(){if(n=void 0!==e.influencesPerVertex?e.influencesPerVertex:2,e.skinWeights)for(var n,t=0,s=e.skinWeights.length;t<s;t+=n)o.skinWeights.push(new f(e.skinWeights[t],1<n?e.skinWeights[t+1]:0,2<n?e.skinWeights[t+2]:0,3<n?e.skinWeights[t+3]:0));if(e.skinIndices)for(t=0,s=e.skinIndices.length;t<s;t+=n)o.skinIndices.push(new f(e.skinIndices[t],1<n?e.skinIndices[t+1]:0,2<n?e.skinIndices[t+2]:0,3<n?e.skinIndices[t+3]:0));o.bones=e.bones,o.bones&&0<o.bones.length&&(o.skinWeights.length!==o.skinIndices.length||o.skinIndices.length!==o.vertices.length)&&console.warn("When skinning, number of vertices ("+o.vertices.length+"), skinIndices ("+o.skinIndices.length+"), and skinWeights ("+o.skinWeights.length+") should match.")}(),function(n){if(void 0!==e.morphTargets)for(s=0,r=e.morphTargets.length;s<r;s++){o.morphTargets[s]={},o.morphTargets[s].name=e.morphTargets[s].name,o.morphTargets[s].vertices=[];for(var s,a,r,l=o.morphTargets[s].vertices,c=e.morphTargets[s].vertices,i=0,d=c.length;i<d;i+=3)a=new t,a.x=c[i]*n,a.y=c[i+1]*n,a.z=c[i+2]*n,l.push(a)}if(void 0!==e.morphColors&&0<e.morphColors.length)for(console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.'),n=o.faces,l=e.morphColors[0].colors,s=0,r=n.length;s<r;s++)n[s].color.fromArray(l,3*s)}(i),function(){var s,i,n=[],t=[];void 0!==e.animation&&t.push(e.animation),void 0!==e.animations&&(e.animations.length?t=t.concat(e.animations):t.push(e.animations));for(s=0;s<t.length;s++)i=L.parseAnimation(t[s],o.bones),i&&n.push(i);o.morphTargets&&(t=L.CreateClipsFromMorphTargetSequences(o.morphTargets,10),n=n.concat(t)),0<n.length&&(o.animations=n)}(),o.computeFaceNormals(),o.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:o}:(i=Oe.prototype.initMaterials(e.materials,s,this.crossOrigin),{geometry:o,materials:i})}}),Object.assign(eo.prototype,{load:function(e,t,n,s){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var o=this;new $(o.manager).load(e,function(n){var i=null;try{i=JSON.parse(n)}catch(t){return void 0!==s&&s(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}void 0===(n=i.metadata)||void 0===n.type||"geometry"===n.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead."):o.parse(i,t)},n,s)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var o=this.parseGeometries(e.geometries),n=this.parseImages(e.images,function(){void 0!==t&&t(s)}),s=(n=this.parseTextures(e.textures,n),n=this.parseMaterials(e.materials,n),this.parseObject(e.object,o,n));return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0===t||t(s),s},parseGeometries:function(e){if(s={},void 0!==e)for(var t,n,s,i=new Zn,a=new ts,o=0,r=e.length;o<r;o++){switch(t=e[o],t.type){case"PlaneGeometry":case"PlaneBufferGeometry":n=new H[t.type](t.width,t.height,t.widthSegments,t.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":n=new H[t.type](t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":n=new H[t.type](t.radius,t.segments,t.thetaStart,t.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":n=new H[t.type](t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":n=new H[t.type](t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":n=new H[t.type](t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":n=new H[t.type](t.radius,t.detail);break;case"RingGeometry":case"RingBufferGeometry":n=new H[t.type](t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":n=new H[t.type](t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":n=new H[t.type](t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q);break;case"LatheGeometry":case"LatheBufferGeometry":n=new H[t.type](t.points,t.segments,t.phiStart,t.phiLength);break;case"BufferGeometry":n=a.parse(t);break;case"Geometry":n=i.parse(t.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+t.type+'"');continue}n.uuid=t.uuid,void 0!==t.name&&(n.name=t.name),s[t.uuid]=n}return s},parseMaterials:function(e,t){if(n={},void 0!==e){s=new Vn,s.setTextures(t);for(var n,s,i,o=0,a=e.length;o<a;o++)i=s.parse(e[o]),n[i.uuid]=i}return n},parseAnimations:function(e){for(var s,n=[],t=0;t<e.length;t++)s=L.parse(e[t]),n.push(s);return n},parseImages:function(e,t){function l(e){return o.manager.itemStart(e),i.load(e,function(){o.manager.itemEnd(e)},void 0,function(){o.manager.itemError(e)})}var n,s,i,r,c,o=this,a={};if(void 0!==e&&0<e.length){i=new an(n=new os(t)),i.setCrossOrigin(this.crossOrigin);for(n=0,r=e.length;n<r;n++)s=e[n],c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s.url)?s.url:o.texturePath+s.url,a[s.uuid]=l(c)}return a},parseTextures:function(e,t){function o(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var n,s,i,l,d={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},a={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},r={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008},c={};if(void 0!==e)for(i=0,l=e.length;i<l;i++)n=e[i],void 0===n.image&&console.warn('THREE.ObjectLoader: No "image" specified for',n.uuid),void 0===t[n.image]&&console.warn("THREE.ObjectLoader: Undefined image",n.image),s=new p(t[n.image]),s.needsUpdate=!0,s.uuid=n.uuid,void 0!==n.name&&(s.name=n.name),void 0!==n.mapping&&(s.mapping=o(n.mapping,d)),void 0!==n.offset&&s.offset.fromArray(n.offset),void 0!==n.repeat&&s.repeat.fromArray(n.repeat),void 0!==n.wrap&&(s.wrapS=o(n.wrap[0],a),s.wrapT=o(n.wrap[1],a)),void 0!==n.minFilter&&(s.minFilter=o(n.minFilter,r)),void 0!==n.magFilter&&(s.magFilter=o(n.magFilter,r)),void 0!==n.anisotropy&&(s.anisotropy=n.anisotropy),void 0!==n.flipY&&(s.flipY=n.flipY),c[n.uuid]=s;return c},parseObject:function(){var e=new r;return function(t,n,o){function l(e){return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),n[e]}function c(e){if(void 0!==e)return void 0===o[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),o[e]}switch(t.type){case"Scene":i=new Fe,void 0!==t.background&&Number.isInteger(t.background)&&(i.background=new a(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?i.fog=new et(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(i.fog=new Je(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":i=new x(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(i.focus=t.focus),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.filmGauge&&(i.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(i.filmOffset=t.filmOffset),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"OrthographicCamera":i=new ut(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":i=new kn(t.color,t.intensity);break;case"DirectionalLight":i=new Fn(t.color,t.intensity);break;case"PointLight":i=new xn(t.color,t.intensity,t.distance,t.decay);break;case"SpotLight":i=new On(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":i=new fn(t.color,t.groundColor,t.intensity);break;case"Mesh":i=l(t.geometry);var i,d,u,r=c(t.material);i=i.bones&&0<i.bones.length?new In(i,r):new _(i,r);break;case"LOD":i=new Ut;break;case"Line":i=new ee(l(t.geometry),c(t.material),t.mode);break;case"LineSegments":i=new g(l(t.geometry),c(t.material));break;case"PointCloud":case"Points":i=new mt(l(t.geometry),c(t.material));break;case"Sprite":i=new Kt(c(t.material));break;case"Group":i=new Ct;break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh type. Instantiates Object3D instead.");default:i=new s}if(i.uuid=t.uuid,void 0!==t.name&&(i.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(i.position,i.quaternion,i.scale)):(void 0!==t.position&&i.position.fromArray(t.position),void 0!==t.rotation&&i.rotation.fromArray(t.rotation),void 0!==t.quaternion&&i.quaternion.fromArray(t.quaternion),void 0!==t.scale&&i.scale.fromArray(t.scale)),void 0!==t.castShadow&&(i.castShadow=t.castShadow),void 0!==t.receiveShadow&&(i.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(i.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(i.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&i.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(i.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.children)for(d in t.children)i.add(this.parseObject(t.children[d],n,o));if("LOD"===t.type)for(t=t.levels,r=0;r<t.length;r++)u=t[r],void 0!==(d=i.getObjectByProperty("uuid",u.object))&&i.addLevel(d,u.distance);return i}}()}),k.prototype={constructor:k,getPoint:function(){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(e){return e=this.getUtoTmapping(e),this.getPoint(e)},getPoints:function(e){isNaN(e)&&(e=5);for(var n=[],t=0;t<=e;t++)n.push(this.getPoint(t/e));return n},getSpacedPoints:function(e){isNaN(e)&&(e=5);for(var n=[],t=0;t<=e;t++)n.push(this.getPointAt(t/e));return n},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(isNaN(e)&&(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,s,n=[],o=this.getPoint(0),i=0;for(n.push(0),t=1;t<=e;t++)i+=(s=this.getPoint(t/e)).distanceTo(o),n.push(i),o=s;return this.cacheArcLengths=n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){for(var n,c,s=this.getLengths(),a=s.length,r=t||e*s[a-1],o=0,i=a-1;o<=i;)if(0>(c=s[n=Math.floor(o+(i-o)/2)]-r))o=n+1;else{if(!(0<c)){i=n;break}i=n-1}return s[n=i]===r?n/(a-1):(n+(r-(o=s[n]))/(s[n+1]-o))/(a-1)},getTangent:function(e){var t=e-1e-4;return 0>t&&(t=0),1<(e+=1e-4)&&(e=1),t=this.getPoint(t),this.getPoint(e).clone().sub(t).normalize()},getTangentAt:function(e){return e=this.getUtoTmapping(e),this.getTangent(e)},computeFrenetFrames:function(e,n){var s,u,h,f,a=new t,o=[],i=[],c=[],d=new t,m=new r;for(s=0;s<=e;s++)u=s/e,o[s]=this.getTangentAt(u),o[s].normalize();i[0]=new t,c[0]=new t,s=Number.MAX_VALUE,u=Math.abs(o[0].x),h=Math.abs(o[0].y),f=Math.abs(o[0].z);for(u<=s&&(s=u,a.set(1,0,0)),h<=s&&(s=h,a.set(0,1,0)),f<=s&&a.set(0,0,1),d.crossVectors(o[0],a).normalize(),i[0].crossVectors(o[0],d),c[0].crossVectors(o[0],i[0]),s=1;s<=e;s++)i[s]=i[s-1].clone(),c[s]=c[s-1].clone(),d.crossVectors(o[s-1],o[s]),d.length()>Number.EPSILON&&(d.normalize(),a=Math.acos(l.clamp(o[s-1].dot(o[s]),-1,1)),i[s].applyMatrix4(m.makeRotationAxis(d,a))),c[s].crossVectors(o[s],i[s]);if(!0===n)for(a=Math.acos(l.clamp(i[0].dot(i[e]),-1,1)),a/=e,0<o[0].dot(d.crossVectors(i[0],i[e]))&&(a=-a),s=1;s<=e;s++)i[s].applyMatrix4(m.makeRotationAxis(o[s],a*s)),c[s].crossVectors(o[s],i[s]);return{tangents:o,normals:i,binormals:c}}},q.prototype=Object.create(k.prototype),q.prototype.constructor=q,q.prototype.isLineCurve=!0,q.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},q.prototype.getPointAt=function(e){return this.getPoint(e)},q.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},_t.prototype=Object.assign(Object.create(k.prototype),{constructor:_t,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new q(t,e))},getPoint:function(e){var n=e*this.getLength(),t=this.getCurveLengths();for(e=0;e<t.length;){if(t[e]>=n)return n=t[e]-n,t=(e=this.curves[e]).getLength(),e.getPointAt(0===t?0:1-n/t);e++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],n=0,e=0,s=this.curves.length;e<s;e++)n+=this.curves[e].getLength(),t.push(n);return this.cacheLengths=t},getSpacedPoints:function(e){isNaN(e)&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,s,o,i,n=[],a=0,r=this.curves;a<r.length;a++)for(t=(t=r[a]).getPoints(t&&t.isEllipseCurve?2*e:t&&t.isLineCurve?1:t&&t.isSplineCurve?e*t.points.length:e),s=0;s<t.length;s++)o=t[s],i&&i.equals(o)||(n.push(o),i=o);return this.autoClose&&1<n.length&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},createPointsGeometry:function(e){return e=this.getPoints(e),this.createGeometry(e)},createSpacedPointsGeometry:function(e){return e=this.getSpacedPoints(e),this.createGeometry(e)},createGeometry:function(e){for(var n,o=new c,s=0,i=e.length;s<i;s++)n=e[s],o.vertices.push(new t(n.x,n.y,n.z||0));return o}}),Q.prototype=Object.create(k.prototype),Q.prototype.constructor=Q,Q.prototype.isEllipseCurve=!0,Q.prototype.getPoint=function(e){for(var o,s=2*Math.PI,t=this.aEndAngle-this.aStartAngle,i=Math.abs(t)<Number.EPSILON;0>t;)t+=s;for(;t>s;)t-=s;return t<Number.EPSILON&&(t=i?0:s),!0!==this.aClockwise||i||(t=t===s?-s:t-s),s=this.aStartAngle+e*t,e=this.aX+this.xRadius*Math.cos(s),o=this.aY+this.yRadius*Math.sin(s),0!==this.aRotation&&(s=Math.cos(this.aRotation),t=Math.sin(this.aRotation),e=(i=e-this.aX)*s-(o-=this.aY)*t+this.aX,o=i*t+o*s+this.aY),new n(e,o)},Ae.prototype=Object.create(k.prototype),Ae.prototype.constructor=Ae,Ae.prototype.isSplineCurve=!0,Ae.prototype.getPoint=function(e){var s=(s=((t=this.points).length-1)*e)-(e=Math.floor(s)),o=t[0===e?e:e-1],i=t[e],a=t[e>t.length-2?t.length-1:e+1],t=t[e>t.length-3?t.length-1:e+2];return new n(Is(s,o.x,i.x,a.x,t.x),Is(s,o.y,i.y,a.y,t.y))},Ge.prototype=Object.create(k.prototype),Ge.prototype.constructor=Ge,Ge.prototype.getPoint=function(e){var t=this.v0,s=this.v1,o=this.v2,i=this.v3;return new n(ke(e,t.x,s.x,o.x,i.x),ke(e,t.y,s.y,o.y,i.y))},Ye.prototype=Object.create(k.prototype),Ye.prototype.constructor=Ye,Ye.prototype.getPoint=function(e){var t=this.v0,s=this.v1,o=this.v2;return new n(Ce(e,t.x,s.x,o.x),Ce(e,t.y,s.y,o.y))},zn=Object.assign(Object.create(_t.prototype),{fromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var s=new q(this.currentPoint.clone(),new n(e,t));this.curves.push(s),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,s,o){e=new Ye(this.currentPoint.clone(),new n(e,t),new n(s,o)),this.curves.push(e),this.currentPoint.set(s,o)},bezierCurveTo:function(e,t,s,o,i,a){e=new Ge(this.currentPoint.clone(),new n(e,t),new n(s,o),new n(i,a)),this.curves.push(e),this.currentPoint.set(i,a)},splineThru:function(e){var t=new Ae(t=[this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,s,o,i){this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,n,s,o,i)},absarc:function(e,t,n,s,o,i){this.absellipse(e,t,n,n,s,o,i)},ellipse:function(e,t,n,s,o,i,a,r){this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,n,s,o,i,a,r)},absellipse:function(e,t,n,s,o,i,a,r){e=new Q(e,t,n,s,o,i,a,r),0<this.curves.length&&((t=e.getPoint(0)).equals(this.currentPoint)||this.lineTo(t.x,t.y)),this.curves.push(e),e=e.getPoint(1),this.currentPoint.copy(e)}}),Nt.prototype=zn,zn.constructor=Nt,Se.prototype=Object.assign(Object.create(zn),{constructor:Se,getPointsHoles:function(e){for(var n=[],t=0,s=this.holes.length;t<s;t++)n[t]=this.holes[t].getPoints(e);return n},extractAllPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},extractPoints:function(e){return this.extractAllPoints(e)}}),is.prototype={moveTo:function(e,t){this.currentPath=new Nt,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,s){this.currentPath.quadraticCurveTo(e,t,n,s)},bezierCurveTo:function(e,t,n,s,o,i){this.currentPath.bezierCurveTo(e,t,n,s,o,i)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function p(e){for(var n,o,s=[],t=0,i=e.length;t<i;t++)o=e[t],n=new Se,n.curves=o.curves,s.push(n);return s}function g(e,t){for(var l=t.length,r=!1,o=l-1,a=0;a<l;o=a++){var n=t[o],s=t[a],c=s.x-n.x,i=s.y-n.y;if(Math.abs(i)>Number.EPSILON){if(0>i&&(n=t[a],c=-c,s=t[o],i=-i),!(e.y<n.y||e.y>s.y))if(e.y===n.y){if(e.x===n.x)return!0}else{if(0===(o=i*(e.x-n.x)-c*(e.y-n.y)))return!0;0>o||(r=!r)}}else if(e.y===n.y&&(s.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=s.x))return!0}return r}if(s=P.isClockWise,n=this.subPaths,0===n.length)return[];if(!0===t)return p(n);if(f=[],1===n.length)return c=n[0],(l=new Se).curves=c.curves,f.push(l),f;var n,s,i,c,d,u,h,f,r=!s(n[0].getPoints()),r=e?!r:r,l=[],a=[],m=[],o=0;a[o]=void 0,m[o]=[];for(i=0,u=n.length;i<u;i++)d=s(h=(c=n[i]).getPoints()),(d=e?!d:d)?(!r&&a[o]&&o++,a[o]={s:new Se,p:h},a[o].s.curves=c.curves,r&&o++,m[o]=[]):m[o].push({h:c,p:h[0]});if(!a[0])return p(n);if(1<a.length){for(i=!1,c=[],s=0,n=a.length;s<n;s++)l[s]=[];for(s=0,n=a.length;s<n;s++)for(d=m[s],r=0;r<d.length;r++){for(o=d[r],h=!0,u=0;u<a.length;u++)g(o.p,a[u].p)&&(s!==u&&c.push({froms:s,tos:u,hole:r}),h?(h=!1,l[u].push(o)):i=!0);h&&l[s].push(o)}0<c.length&&(i||(m=l))}for(i=0,s=a.length;i<s;i++)for(l=a[i].s,f.push(l),n=0,d=(c=m[i]).length;n<d;n++)l.holes.push(c[n].h);return f}},Object.assign(rs.prototype,{isFont:!0,generateShapes:function(e,t,n){void 0===t&&(t=100),void 0===n&&(n=4),a=this.data,e=String(e).split("");var s,a,r,c,l,d,u,h,m,f,p,g,v,b,j,y,_,w,C=t/a.resolution,k=(a.boundingBox.yMax-a.boundingBox.yMin+a.underlineThickness)*C,O=0,x=0;t=[];for(j=0;j<e.length;j++)if(d=e[j],`
`===d)O=0,x-=k;else{if(s=C,h=O,m=x,d=a.glyphs[d]||a.glyphs["?"]){if(f=new is,b=[],d.o)for(var i=d._cachedOutline||(d._cachedOutline=d.o.split(" ")),o=0,E=i.length;o<E;)switch(i[o++]){case"m":l=i[o++]*s+h,r=i[o++]*s+m,f.moveTo(l,r);break;case"l":l=i[o++]*s+h,r=i[o++]*s+m,f.lineTo(l,r);break;case"q":if(l=i[o++]*s+h,r=i[o++]*s+m,p=i[o++]*s+h,g=i[o++]*s+m,f.quadraticCurveTo(p,g,l,r),c=b[b.length-1]){y=c.x,c=c.y;for(u=1;u<=n;u++)v=u/n,Ce(v,y,p,l),Ce(v,c,g,r)}break;case"b":if(l=i[o++]*s+h,r=i[o++]*s+m,p=i[o++]*s+h,g=i[o++]*s+m,_=i[o++]*s+h,w=i[o++]*s+m,f.bezierCurveTo(p,g,_,w,l,r),c=b[b.length-1])for(y=c.x,c=c.y,u=1;u<=n;u++)ke(v=u/n,y,p,_,l),ke(v,c,g,w,r)}s={offsetX:d.ha*s,path:f}}else s=void 0;O+=s.offsetX,t.push(s.path)}for(n=[],a=0,e=t.length;a<e;a++)Array.prototype.push.apply(n,t[a].toShapes());return n}}),Object.assign(Ds.prototype,{load:function(e,t,n,s){var o=this;new $(this.manager).load(e,function(e){var n;try{n=JSON.parse(e)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}e=o.parse(n),t&&t(e)},n,s)},parse:function(e){return new rs(e)}}),gn={getContext:function(){return void 0===Tn&&(Tn=new(window.AudioContext||window.webkitAudioContext)),Tn},setContext:function(e){Tn=e}},Object.assign(ls.prototype,{load:function(e,t,n,s){var o=new $(this.manager);o.setResponseType("arraybuffer"),o.load(e,function(e){gn.getContext().decodeAudioData(e,function(e){t(e)})},n,s)}}),ds.prototype=Object.assign(Object.create(b.prototype),{constructor:ds,isRectAreaLight:!0,copy:function(e){return b.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this}}),Object.assign(zs.prototype,{update:function(){var e,t,n,s,o,i,a,c=new r,d=new r;return function(r){if(i!==this||n!==r.focus||s!==r.fov||e!==r.aspect*this.aspect||t!==r.near||a!==r.far||o!==r.zoom){i=this,n=r.focus,s=r.fov,e=r.aspect*this.aspect,t=r.near,a=r.far,o=r.zoom;var h,m=r.projectionMatrix.clone(),u=this.eyeSep/2,f=u*t/n,p=t*Math.tan(l.DEG2RAD*s*.5)/o;d.elements[12]=-u,c.elements[12]=u,u=-p*e+f,h=p*e+f,m.elements[0]=2*t/(h-u),m.elements[8]=(h+u)/(h-u),this.cameraL.projectionMatrix.copy(m),u=-p*e-f,h=p*e-f,m.elements[0]=2*t/(h-u),m.elements[8]=(h+u)/(h-u),this.cameraR.projectionMatrix.copy(m)}this.cameraL.matrixWorld.copy(r.matrixWorld).multiply(d),this.cameraR.matrixWorld.copy(r.matrixWorld).multiply(c)}}()}),Ln.prototype=Object.create(s.prototype),Ln.prototype.constructor=Ln,ms.prototype=Object.assign(Object.create(s.prototype),{constructor:ms,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new t,o=new y,i=new t,n=new t;return function(t){s.prototype.updateMatrixWorld.call(this,t),t=this.context.listener;var a=this.up;this.matrixWorld.decompose(e,o,i),n.set(0,0,-1).applyQuaternion(o),t.positionX?(t.positionX.setValueAtTime(e.x,this.context.currentTime),t.positionY.setValueAtTime(e.y,this.context.currentTime),t.positionZ.setValueAtTime(e.z,this.context.currentTime),t.forwardX.setValueAtTime(n.x,this.context.currentTime),t.forwardY.setValueAtTime(n.y,this.context.currentTime),t.forwardZ.setValueAtTime(n.z,this.context.currentTime),t.upX.setValueAtTime(a.x,this.context.currentTime),t.upY.setValueAtTime(a.y,this.context.currentTime),t.upZ.setValueAtTime(a.z,this.context.currentTime)):(t.setPosition(e.x,e.y,e.z),t.setOrientation(n.x,n.y,n.z,a.x,a.y,a.z))}}()}),qe.prototype=Object.assign(Object.create(s.prototype),{constructor:qe,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else{if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),e.start(0,this.startTime),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}},pause:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}}),ps.prototype=Object.assign(Object.create(qe.prototype),{constructor:ps,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new t;return function(t){s.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),Object.assign(gs.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var n=0,e=this.getFrequencyData(),t=0;t<e.length;t++)n+=e[t];return n/e.length}}),An.prototype={constructor:An,accumulate:function(e,t){var o=this.buffer,s=this.valueSize,i=e*s+s,n=this.cumulativeWeight;if(0===n){for(n=0;n!==s;++n)o[i+n]=o[n];n=t}else n+=t,this._mixBufferRegion(o,i,0,t/n,s);this.cumulativeWeight=n},apply:function(e){var n,o,i,t=this.valueSize,s=this.buffer;e=e*t+t,n=this.cumulativeWeight,o=this.binding,this.cumulativeWeight=0,1>n&&this._mixBufferRegion(s,e,3*t,1-n,t),n=t;for(i=t+t;n!==i;++n)if(s[n]!==s[n+t]){o.setValue(s,e);break}},saveOriginalState:function(){var e,t=this.buffer,n=this.valueSize,s=3*n;this.binding.getValue(t,s);for(e=n;e!==s;++e)t[e]=t[s+e%n];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(e,t,n,s,o){if(.5<=s)for(s=0;s!==o;++s)e[t+s]=e[n+s]},_slerp:function(e,t,n,s){y.slerpFlat(e,t,e,t,e,n,s)},_lerp:function(e,t,n,s,o){for(var a,r=1-s,i=0;i!==o;++i)a=t+i,e[a]=e[a]*r+e[n+i]*s}},v.prototype={constructor:v,getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var n,e=this.node,s=this.parsedPath,t=s.objectName,o=s.propertyName,i=s.propertyIndex;if(e||(this.node=e=v.findNode(this.rootNode,s.nodeName)||this.rootNode),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(t){switch(n=s.objectIndex,t){case"materials":if(!e.material)return void console.error("  can not bind to material as node does not have a material",this);if(!e.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);for(e=e.skeleton.bones,t=0;t<e.length;t++)if(e[t].name===n){n=t;break}break;default:if(void 0===e[t])return void console.error("  can not bind to objectName of node, undefined",this);e=e[t]}if(void 0!==n){if(void 0===e[n])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,e);e=e[n]}}if(void 0===(n=e[o]))console.error("  trying to update property for track: "+s.nodeName+"."+o+" but it wasn't found.",e);else{if(s=this.Versioning.None,void 0!==e.needsUpdate?(s=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e),t=this.BindingType.Direct,void 0!==i){if("morphTargetInfluences"===o){if(!e.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!e.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(t=0;t<this.node.geometry.morphTargets.length;t++)if(e.geometry.morphTargets[t].name===i){i=t;break}}t=this.BindingType.ArrayElement,this.resolvedProperty=n,this.propertyIndex=i}else void 0!==n.fromArray&&void 0!==n.toArray?(t=this.BindingType.HasFromToArray,this.resolvedProperty=n):void 0!==n.length?(t=this.BindingType.EntireArray,this.resolvedProperty=n):this.propertyName=o;this.getValue=this.GetterByBindingType[t],this.setValue=this.SetterByBindingTypeAndVersioning[t][s]}}else console.error("  trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(v.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:v.prototype.getValue,_setValue_unbound:v.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var s=this.resolvedProperty,n=0,o=s.length;n!==o;++n)e[t++]=s[n]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.node[this.propertyName]=e[t]},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var s=this.resolvedProperty,n=0,o=s.length;n!==o;++n)s[n]=e[t++]},function(e,t){for(var s=this.resolvedProperty,n=0,o=s.length;n!==o;++n)s[n]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var s=this.resolvedProperty,n=0,o=s.length;n!==o;++n)s[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),v.Composite=function(e,t,n){n=n||v.parseTrackName(t),this._targetGroup=e,this._bindings=e.subscribe_(t,n)},v.Composite.prototype={constructor:v.Composite,getValue:function(e,t){this.bind();var n=this._bindings[this._targetGroup.nCachedObjects_];void 0!==n&&n.getValue(e,t)},setValue:function(e,t){for(var s=this._bindings,n=this._targetGroup.nCachedObjects_,o=s.length;n!==o;++n)s[n].setValue(e,t)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},v.create=function(e,t,n){return e&&e.isAnimationObjectGroup?new v.Composite(e,t,n):new v(e,t,n)},v.parseTrackName=function(e){var t=/^((?:[\w-]+[/:])*)([\w-]+)?(?:\.([\w-]+)(?:\[(.+)\])?)?\.([\w-]+)(?:\[(.+)\])?$/.exec(e);if(!t)throw Error("cannot parse trackName at all: "+e);if(null===(t={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]}).propertyName||0===t.propertyName.length)throw Error("can not parse propertyName from trackName: "+e);return t},v.findNode=function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var s,n=function(e){for(var s,n=0;n<e.bones.length;n++)if(s=e.bones[n],s.name===t)return s;return null}(e.skeleton);if(n)return n}return e.children&&(s=function(e){for(var n,o=0;o<e.length;o++)if(n=e[o],n.name===t||n.uuid===t||(n=s(n.children)))return n;return null},n=s(e.children))?n:null},js.prototype={constructor:js,isAnimationObjectGroup:!0,add:function(){for(var t,n,s,o,i,r,c,a=this._objects,b=a.length,h=this.nCachedObjects_,l=this._indicesByUUID,p=this._paths,f=this._parsedPaths,u=this._bindings,m=u.length,d=0,g=arguments.length;d!==g;++d)if(s=arguments[d],n=l[t=s.uuid],void 0===n){n=b++,l[t]=n,a.push(s);for(t=0,i=m;t!==i;++t)u[t].push(new v(s,p[t],f[t]))}else if(n<h){o=--h;for(l[(i=a[o]).uuid]=n,a[n]=i,l[t]=o,a[o]=s,t=0,i=m;t!==i;++t)r=u[t],c=r[n],r[n]=r[o],void 0===c&&(c=new v(s,p[t],f[t])),r[o]=c}else void 0!==a[n]&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...");this.nCachedObjects_=h},remove:function(){for(var n,s,u,c=this._objects,a=this.nCachedObjects_,r=this._indicesByUUID,d=this._bindings,m=d.length,l=0,h=arguments.length;l!==h;++l){var o=arguments[l],i=o.uuid,t=r[i];if(void 0!==t&&t>=a){s=a++;for(r[(n=c[s]).uuid]=t,c[t]=n,r[i]=s,c[s]=o,o=0,i=m;o!==i;++o)u=(n=d[o])[t],n[t]=n[s],n[s]=u}}this.nCachedObjects_=a},uncache:function(){for(var n,s,f,o=this._objects,m=o.length,u=this.nCachedObjects_,r=this._indicesByUUID,d=this._bindings,h=d.length,l=0,p=arguments.length;l!==p;++l)if(n=r[a=arguments[l].uuid],void 0!==n)if(delete r[a],n<u){var a,t=o[a=--u],c=--m,i=o[c];for(r[t.uuid]=n,o[n]=t,r[i.uuid]=a,o[a]=i,o.pop(),t=0,i=h;t!==i;++t)s=d[t],f=s[c],s[n]=s[a],s[a]=f,s.pop()}else for(r[(i=o[c=--m]).uuid]=n,o[n]=i,o.pop(),t=0,i=h;t!==i;++t)(s=d[t])[n]=s[c],s.pop();this.nCachedObjects_=u},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,s=n[e],o=this._bindings;if(void 0!==s)return o[s];var r=this._paths,c=this._parsedPaths,i=this._objects,l=this.nCachedObjects_,a=Array(i.length),s=o.length;for(n[e]=s,r.push(e),c.push(t),o.push(a),n=l,s=i.length;n!==s;++n)a[n]=new v(i[n],e,t);return a},unsubscribe_:function(e){if(o=this._bindingsIndicesByPath,t=o[e],void 0!==t){var t,o,i=this._paths,a=this._parsedPaths,n=this._bindings,s=n.length-1,r=n[s];o[e[s]]=t,n[t]=r,n.pop(),a[t]=a[s],a.pop(),i[t]=i[s],i.pop()}}},ys.prototype={constructor:ys,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){n=this._clip.duration;var s=e._clip.duration,o=n/s;e.warp(1,s/n,t),this.warp(o,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var o=this._mixer,i=o.time,s=this._timeScaleInterpolant,a=this.timeScale;return null===s&&(this._timeScaleInterpolant=s=o._lendControlInterpolant()),o=s.parameterPositions,s=s.sampleValues,o[0]=i,o[1]=i+n,s[0]=e/a,s[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,s){if(null!==(i=this._startTime)){if(0>(t=(e-i)*n)||0===n)return;this._startTime=null,t*=n}if(t*=this._updateTimeScale(e),n=this._updateTime(t),0<(e=this._updateWeight(e))){t=this._interpolants;for(var i=this._propertyBindings,o=0,a=t.length;o!==a;++o)t[o].evaluate(n),i[o].accumulate(s,e)}},_updateWeight:function(e){var n,s,t=0;return this.enabled&&(t=this.weight,n=this._weightInterpolant,null!==n&&(s=n.evaluate(e)[0],t=t*s,e>n.parameterPositions[1]&&(this.stopFading(),0===s&&(this.enabled=!1)))),this._effectiveWeight=t},_updateTimeScale:function(e){var n,t=0;return this.paused||(t=this.timeScale,n=this._timeScaleInterpolant,null!==n&&(t=t*n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))),this._effectiveTimeScale=t},_updateTime:function(e){if(t=this.time+e,0===e)return t;var t,i,a,o=this._clip.duration,n=this.loop,s=this._loopCount;if(2200===n)t:{if(-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1)),t>=o)t=o;else{if(!(0>t))break t;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>e?-1:1})}else if((n=2202===n,-1===s&&(0<=e?(s=0,this._setEndings(!0,0===this.repetitions,n)):this._setEndings(0===this.repetitions,!0,n)),t>=o||0>t)&&(i=Math.floor(t/o),a=(t=t-o*i,s=s+Math.abs(i),this.repetitions-s),0>a?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=0<e?o:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<e?1:-1})):(0===a?(e=0>e,this._setEndings(e,!e,n)):this._setEndings(!1,!1,n),this._loopCount=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:i}))),n&&1==(1&s))return this.time=t,o-t;return this.time=t},_setEndings:function(e,t,n){var s=this._interpolantSettings;n?(s.endingStart=2401,s.endingEnd=2401):(s.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,s.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(e,t,n){var o=this._mixer,i=o.time,s=this._weightInterpolant;return null===s&&(this._weightInterpolant=s=o._lendControlInterpolant()),o=s.parameterPositions,s=s.sampleValues,o[0]=i,s[0]=t,o[1]=i+e,s[1]=n,this}},en.prototype={constructor:en,clipAction:function(e,t){var a=(o=t||this._root).uuid,n="string"==typeof e?L.findByName(o,e):e,o=null!==n?n.uuid:e,i=this._actionsByClip[o],s=null;if(void 0!==i){if(void 0!==(s=i.actionByRoot[a]))return s;s=i.knownActions[0],null===n&&(n=s._clip)}return null===n?null:(n=new ys(this,n,t),this._bindAction(n,s),this._addInactiveAction(n,o,a),n)},existingAction:function(e,t){var s=(n=t||this._root).uuid,n="string"==typeof e?L.findByName(n,e):e;return void 0!==(n=this._actionsByClip[n?n.uuid:e])&&n.actionByRoot[s]||null},stopAllAction:function(){for(var t=this._actions,n=this._nActiveActions,s=this._bindings,o=this._nActiveBindings,e=this._nActiveBindings=this._nActiveActions=0;e!==n;++e)t[e].reset();for(e=0;e!==o;++e)s[e].useCount=0;return this},update:function(e){e*=this.timeScale;for(var s,n=this._actions,i=this._nActiveActions,a=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1,t=0;t!==i;++t)s=n[t],s.enabled&&s._update(a,e,r,o);for(e=this._bindings,n=this._nActiveBindings,t=0;t!==n;++t)e[t].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){if(n=this._actions,e=e.uuid,o=this._actionsByClip,void 0!==(s=o[e])){for(var t,n,s,o,a,r,i=0,c=(s=s.knownActions).length;i!==c;++i)t=s[i],this._deactivateAction(t),a=t._cacheIndex,r=n[n.length-1],t._cacheIndex=null,t._byClipCacheIndex=null,r._cacheIndex=a,n[a]=r,n.pop(),this._removeInactiveBindingsForAction(t);delete o[e]}},uncacheRoot:function(e){e=e.uuid;var t,n,o,s=this._actionsByClip;for(t in s)n=s[t].actionByRoot[e],void 0!==n&&(this._deactivateAction(n),this._removeInactiveAction(n));if(void 0!==(t=this._bindingsByRootAndName[e]))for(o in t)(e=t[o]).restoreOriginalState(),this._removeInactiveBinding(e)},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}},Object.assign(en.prototype,{_bindAction:function(e,t){var c=e._localRoot||this._root,l=e._clip.tracks,u=l.length,d=e._propertyBindings,h=e._interpolants,o=c.uuid,n=this._bindingsByRootAndName,i=n[o];for(void 0===i&&(i={},n[o]=i),n=0;n!==u;++n){var r=l[n],a=r.name,s=i[a];if(void 0===s){if(void 0!==(s=d[n])){null===s._cacheIndex&&(++s.referenceCount,this._addInactiveBinding(s,o,a));continue}++(s=new An(v.create(c,a,t&&t._propertyBindings[n].binding.parsedPath),r.ValueTypeName,r.getValueSize())).referenceCount,this._addInactiveBinding(s,o,a)}d[n]=s,h[n].resultBuffer=s.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var s,o=(e._localRoot||this._root).uuid,t=e._clip.uuid,n=this._actionsByClip[t];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,t,o)}for(t=0,n=(o=e._propertyBindings).length;t!==n;++t)s=o[t],0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState());this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t,s=e._propertyBindings,n=0,o=s.length;n!==o;++n)t=s[n],0==--t.useCount&&(t.restoreOriginalState(),this._takeBackBinding(t));this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){return null!==(e=e._cacheIndex)&&e<this._nActiveActions},_addInactiveAction:function(e,t,n){var o=this._actions,i=this._actionsByClip,s=i[t];void 0===s?(s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=s):(t=s.knownActions,e._byClipCacheIndex=t.length,t.push(e)),e._cacheIndex=o.length,o.push(e),s.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],o=e._cacheIndex;n._cacheIndex=o,t[o]=n,t.pop(),e._cacheIndex=null;var n=e._clip.uuid,i=(o=this._actionsByClip)[n],s=i.knownActions,a=s[s.length-1],r=e._byClipCacheIndex;a._byClipCacheIndex=r,s[r]=a,s.pop(),e._byClipCacheIndex=null,delete i.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete o[n],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var n,t=0,s=(e=e._propertyBindings).length;t!==s;++t)n=e[t],0==--n.referenceCount&&this._removeInactiveBinding(n)},_lendAction:function(e){var t=this._actions,s=e._cacheIndex,n=this._nActiveActions++,o=t[n];e._cacheIndex=n,t[n]=e,o._cacheIndex=s,t[s]=o},_takeBackAction:function(e){var t=this._actions,s=e._cacheIndex,n=--this._nActiveActions,o=t[n];e._cacheIndex=n,t[n]=e,o._cacheIndex=s,t[s]=o},_addInactiveBinding:function(e,t,n){var o=this._bindingsByRootAndName,s=o[t],i=this._bindings;void 0===s&&(s={},o[t]=s),s[n]=e,e._cacheIndex=i.length,i.push(e)},_removeInactiveBinding:function(e){var r,t=this._bindings,s=(n=e.binding).rootNode.uuid,n=n.path,o=this._bindingsByRootAndName,i=o[s],a=t[t.length-1];e=e._cacheIndex,a._cacheIndex=e,t[e]=a,t.pop(),delete i[n];t:{for(r in i)break t;delete o[s]}},_lendBinding:function(e){var t=this._bindings,s=e._cacheIndex,n=this._nActiveBindings++,o=t[n];e._cacheIndex=n,t[n]=e,o._cacheIndex=s,t[s]=o},_takeBackBinding:function(e){var t=this._bindings,s=e._cacheIndex,n=--this._nActiveBindings,o=t[n];e._cacheIndex=n,t[n]=e,o._cacheIndex=s,t[s]=o},_lendControlInterpolant:function(){var n=this._controlInterpolants,t=this._nActiveControlInterpolants++,e=n[t];return void 0===e&&((e=new $t(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,n[t]=e),e},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,s=e.__cacheIndex,n=--this._nActiveControlInterpolants,o=t[n];e.__cacheIndex=n,t[n]=e,o.__cacheIndex=s,t[s]=o},_controlInterpolantsResultBuffer:new Float32Array(1)}),Object.assign(en.prototype,X.prototype),jn.prototype.clone=function(){return new jn(void 0===this.value.clone?this.value:this.value.clone())},Me.prototype=Object.create(i.prototype),Me.prototype.constructor=Me,Me.prototype.isInstancedBufferGeometry=!0,Me.prototype.addGroup=function(e,t,n){this.groups.push({start:e,count:t,materialIndex:n})},Me.prototype.copy=function(e){null!==(n=e.index)&&this.setIndex(n.clone());var t,s,n=e.attributes;for(t in n)this.addAttribute(t,n[t].clone());for(t=0,n=(e=e.groups).length;t<n;t++)s=e[t],this.addGroup(s.start,s.count,s.materialIndex);return this},xs.prototype={constructor:xs,isInterleavedBufferAttribute:!0,get count(){return this.data.count},get array(){return this.data.array},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,s){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=s,this},setXYZW:function(e,t,n,s,o){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=s,this.data.array[e+3]=o,this}},Ke.prototype={constructor:Ke,isInterleavedBuffer:!0,set needsUpdate(e){!0===e&&this.version++},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.stride:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var s=0,o=this.stride;s<o;s++)this.array[e+s]=t.array[n+s];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}},Ue.prototype=Object.create(Ke.prototype),Ue.prototype.constructor=Ue,Ue.prototype.isInstancedInterleavedBuffer=!0,Ue.prototype.copy=function(e){return Ke.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},We.prototype=Object.create(u.prototype),We.prototype.constructor=We,We.prototype.isInstancedBufferAttribute=!0,We.prototype.copy=function(e){return u.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},ws.prototype={constructor:ws,linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t){var n=[];return _s(e,this,n,t),n.sort(Ss),n},intersectObjects:function(e,t){if(n=[],!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var n,s=0,o=e.length;s<o;s++)_s(e[s],this,n,t);return n.sort(Ss),n}},bs.prototype={constructor:bs,start:function(){this.oldTime=this.startTime=(performance||Date).now(),this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t,e=0;return(this.autoStart&&!this.running&&this.start(),this.running)&&(t=(performance||Date).now(),e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e),e}},fs.prototype={constructor:fs,set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(l.clamp(e.y/this.radius,-1,1))),this}},us.prototype={constructor:us,set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}},w.prototype=Object.create(_.prototype),w.prototype.constructor=w,w.prototype.createAnimation=function(e,t,n,s){t={start:t,end:n,length:n-t+1,fps:s,duration:(n-t)/s,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1},this.animationsMap[e]=t,this.animationsList.push(t)},w.prototype.autoCreateAnimations=function(e){for(var t,n,i,r=/([a-z]+)_?(\d+)/i,o={},a=this.geometry,s=0,c=a.morphTargets.length;s<c;s++)t=a.morphTargets[s].name.match(r),t&&1<t.length&&(n=t[1],o[n]||(o[n]={start:1/0,end:-1/0}),s<(t=o[n]).start&&(t.start=s),s>t.end&&(t.end=s),i||(i=n));for(n in o)t=o[n],this.createAnimation(n,t.start,t.end,e);this.firstAnimation=i},w.prototype.setAnimationDirectionForward=function(e){(e=this.animationsMap[e])&&(e.direction=1,e.directionBackwards=!1)},w.prototype.setAnimationDirectionBackward=function(e){(e=this.animationsMap[e])&&(e.direction=-1,e.directionBackwards=!0)},w.prototype.setAnimationFPS=function(e,t){var n=this.animationsMap[e];n&&(n.fps=t,n.duration=(n.end-n.start)/n.fps)},w.prototype.setAnimationDuration=function(e,t){var n=this.animationsMap[e];n&&(n.duration=t,n.fps=(n.end-n.start)/n.duration)},w.prototype.setAnimationWeight=function(e,t){var n=this.animationsMap[e];n&&(n.weight=t)},w.prototype.setAnimationTime=function(e,t){var n=this.animationsMap[e];n&&(n.time=t)},w.prototype.getAnimationTime=function(e){var t=0;return(e=this.animationsMap[e])&&(t=e.time),t},w.prototype.getAnimationDuration=function(e){var t=-1;return(e=this.animationsMap[e])&&(t=e.duration),t},w.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("THREE.MorphBlendMesh: animation["+e+"] undefined in .playAnimation()")},w.prototype.stopAnimation=function(e){(e=this.animationsMap[e])&&(e.active=!1)},w.prototype.update=function(e){for(var t,n,s,o,i=0,a=this.animationsList.length;i<a;i++)t=this.animationsList[i],t.active&&(n=t.duration/t.length,t.time+=t.direction*e,t.mirroredLoop?(t.time>t.duration||0>t.time)&&(t.direction*=-1,t.time>t.duration&&(t.time=t.duration,t.directionBackwards=!0),0>t.time&&(t.time=0,t.directionBackwards=!1)):(t.time%=t.duration,0>t.time&&(t.time+=t.duration)),o=t.start+l.clamp(Math.floor(t.time/n),0,t.length-1),s=t.weight,o!==t.currentFrame&&(this.morphTargetInfluences[t.lastFrame]=0,this.morphTargetInfluences[t.currentFrame]=1*s,this.morphTargetInfluences[o]=0,t.lastFrame=t.currentFrame,t.currentFrame=o),n=t.time%n/n,t.directionBackwards&&(n=1-n),t.currentFrame!==t.lastFrame?(this.morphTargetInfluences[t.currentFrame]=n*s,this.morphTargetInfluences[t.lastFrame]=(1-n)*s):this.morphTargetInfluences[t.currentFrame]=s)},dn.prototype=Object.create(s.prototype),dn.prototype.constructor=dn,dn.prototype.isImmediateRenderObject=!0,hn.prototype=Object.create(g.prototype),hn.prototype.constructor=hn,hn.prototype.update=function(){var e=new t,n=new t,s=new B;return function(){i=["a","b","c"],this.object.updateMatrixWorld(!0),s.getNormalMatrix(this.object.matrixWorld);var u=this.object.matrixWorld,a=this.geometry.attributes.position,t=this.object.geometry;if(t&&t.isGeometry)for(var i,m,r=t.vertices,h=t.faces,c=t=0,f=h.length;c<f;c++)for(var l=h[c],o=0,d=l.vertexNormals.length;o<d;o++)m=l.vertexNormals[o],e.copy(r[l[i[o]]]).applyMatrix4(u),n.copy(m).applyMatrix3(s).normalize().multiplyScalar(this.size).add(e),a.setXYZ(t,e.x,e.y,e.z),t+=1,a.setXYZ(t,n.x,n.y,n.z),t+=1;else if(t&&t.isBufferGeometry)for(i=t.attributes.position,r=t.attributes.normal,o=t=0,d=i.count;o<d;o++)e.set(i.getX(o),i.getY(o),i.getZ(o)).applyMatrix4(u),n.set(r.getX(o),r.getY(o),r.getZ(o)),n.applyMatrix3(s).normalize().multiplyScalar(this.size).add(e),a.setXYZ(t,e.x,e.y,e.z),t+=1,a.setXYZ(t,n.x,n.y,n.z),t+=1;return a.needsUpdate=!0,this}}(),$e.prototype=Object.create(s.prototype),$e.prototype.constructor=$e,$e.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},$e.prototype.update=function(){var e=new t,n=new t;return function(){var t=this.light.distance?this.light.distance:1e3,s=t*Math.tan(this.light.angle);this.cone.scale.set(s,s,t),e.setFromMatrixPosition(this.light.matrixWorld),n.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(n.sub(e)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),Ve.prototype=Object.create(g.prototype),Ve.prototype.constructor=Ve,Ve.prototype.getBoneList=function(e){var n,t=[];e&&e.isBone&&t.push(e);for(n=0;n<e.children.length;n++)t.push.apply(t,this.getBoneList(e.children[n]));return t},Ve.prototype.update=function(){var e=new t,n=new r,s=new r;return function(){var t,o,i,a=this.geometry,r=a.getAttribute("position");s.getInverse(this.root.matrixWorld);for(o=0,i=0;o<this.bones.length;o++)t=this.bones[o],t.parent&&t.parent.isBone&&(n.multiplyMatrices(s,t.matrixWorld),e.setFromMatrixPosition(n),r.setXYZ(i,e.x,e.y,e.z),n.multiplyMatrices(s,t.parent.matrixWorld),e.setFromMatrixPosition(n),r.setXYZ(i+1,e.x,e.y,e.z),i+=2);a.getAttribute("position").needsUpdate=!0}}(),Be.prototype=Object.create(_.prototype),Be.prototype.constructor=Be,Be.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Be.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},Ie.prototype=Object.create(s.prototype),Ie.prototype.constructor=Ie,Ie.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose(),this.children[1].geometry.dispose(),this.children[1].material.dispose()},Ie.prototype.update=function(){var e=new t,n=new t;return function(){var t,s,i=this.children[0],o=this.children[1];this.light.target&&(e.setFromMatrixPosition(this.light.matrixWorld),n.setFromMatrixPosition(this.light.target.matrixWorld),s=n.clone().sub(e),i.lookAt(s),o.lookAt(s)),i.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),o.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),o=.5*this.light.width,s=.5*this.light.height,t=(i=i.geometry.getAttribute("position")).array,t[0]=o,t[1]=-s,t[2]=0,t[3]=o,t[4]=s,t[5]=0,t[6]=-o,t[7]=s,t[8]=0,t[9]=-o,t[10]=s,t[11]=0,t[12]=-o,t[13]=-s,t[14]=0,t[15]=o,t[16]=-s,t[17]=0,i.needsUpdate=!0}}(),He.prototype=Object.create(s.prototype),He.prototype.constructor=He,He.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},He.prototype.update=function(){var s=new t,e=new a,n=new a;return function(){var t,o,a,r=this.children[0],i=r.geometry.getAttribute("color");e.copy(this.light.color).multiplyScalar(this.light.intensity),n.copy(this.light.groundColor).multiplyScalar(this.light.intensity);for(t=0,a=i.count;t<a;t++)o=t<a/2?e:n,i.setXYZ(t,o.r,o.g,o.b);r.lookAt(s.setFromMatrixPosition(this.light.matrixWorld).negate()),i.needsUpdate=!0}}(),cn.prototype=Object.create(g.prototype),cn.prototype.constructor=cn,vn.prototype=Object.create(g.prototype),vn.prototype.constructor=vn,tn.prototype=Object.create(g.prototype),tn.prototype.constructor=tn,tn.prototype.update=function(){var e=new t,n=new t,s=new B;return function(){this.object.updateMatrixWorld(!0),s.getNormalMatrix(this.object.matrixWorld);for(var t,o,l,d=this.object.matrixWorld,a=this.geometry.attributes.position,r=(o=this.object.geometry).vertices,i=0,c=0,u=(o=o.faces).length;c<u;c++)t=o[c],l=t.normal,e.copy(r[t.a]).add(r[t.b]).add(r[t.c]).divideScalar(3).applyMatrix4(d),n.copy(l).applyMatrix3(s).normalize().multiplyScalar(this.size).add(e),a.setXYZ(i,e.x,e.y,e.z),i+=1,a.setXYZ(i,n.x,n.y,n.z),i+=1;return a.needsUpdate=!0,this}}(),Pe.prototype=Object.create(s.prototype),Pe.prototype.constructor=Pe,Pe.prototype.dispose=function(){var e=this.children[0],t=this.children[1];e.geometry.dispose(),e.material.dispose(),t.geometry.dispose(),t.material.dispose()},Pe.prototype.update=function(){var n=new t,s=new t,e=new t;return function(){n.setFromMatrixPosition(this.light.matrixWorld),s.setFromMatrixPosition(this.light.target.matrixWorld),e.subVectors(s,n);var t=this.children[0],o=this.children[1];t.lookAt(e),t.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),o.lookAt(e),o.scale.z=e.length()}}(),Pt.prototype=Object.create(g.prototype),Pt.prototype.constructor=Pt,Pt.prototype.update=function(){function e(e,t,a,r){if(n.set(t,a,r).unproject(i),void 0!==(e=o[e]))for(t=s.getAttribute("position"),a=0,r=e.length;a<r;a++)t.setXYZ(e[a],n.x,n.y,n.z)}var s,o,n=new t,i=new C;return function(){s=this.geometry,o=this.pointMap,i.projectionMatrix.copy(this.camera.projectionMatrix),e("c",0,0,-1),e("t",0,0,1),e("n1",-1,-1,-1),e("n2",1,-1,-1),e("n3",-1,1,-1),e("n4",1,1,-1),e("f1",-1,-1,1),e("f2",1,-1,1),e("f3",-1,1,1),e("f4",1,1,1),e("u1",.7,1.1,-1),e("u2",-.7,1.1,-1),e("u3",0,2,-1),e("cf1",-1,0,1),e("cf2",1,0,1),e("cf3",0,-1,1),e("cf4",0,1,1),e("cn1",-1,0,-1),e("cn2",1,0,-1),e("cn3",0,-1,-1),e("cn4",0,1,-1),s.getAttribute("position").needsUpdate=!0}}(),Re.prototype=Object.create(g.prototype),Re.prototype.constructor=Re,Re.prototype.update=function(){var e=new K;return function(t){if(t&&t.isBox3?e.copy(t):e.setFromObject(t),!e.isEmpty()){t=e.min;var s=e.max,o=this.geometry.attributes.position,n=o.array;n[0]=s.x,n[1]=s.y,n[2]=s.z,n[3]=t.x,n[4]=s.y,n[5]=s.z,n[6]=t.x,n[7]=t.y,n[8]=s.z,n[9]=s.x,n[10]=t.y,n[11]=s.z,n[12]=s.x,n[13]=s.y,n[14]=t.z,n[15]=t.x,n[16]=s.y,n[17]=t.z,n[18]=t.x,n[19]=t.y,n[20]=t.z,n[21]=s.x,n[22]=t.y,n[23]=t.z,o.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),re.prototype=Object.create(s.prototype),re.prototype.constructor=re,re.prototype.setDirection=function(){var e,n=new t;return function(t){.99999<t.y?this.quaternion.set(0,0,0,1):-.99999>t.y?this.quaternion.set(1,0,0,0):(n.set(t.z,0,-t.x).normalize(),e=Math.acos(t.y),this.quaternion.setFromAxisAngle(n,e))}}(),re.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},re.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},Bn.prototype=Object.create(g.prototype),Bn.prototype.constructor=Bn;var Mn=new t,es=new Qn,Xn=new Qn,Gn=new Qn;W.prototype=Object.create(k.prototype),W.prototype.constructor=W,W.prototype.getPoint=function(e){if(n=this.points,2>(s=n.length)&&console.log("duh, you need at least 2 points"),e*=s-(this.closed?0:1),e-=o=Math.floor(e),this.closed?o+=0<o?0:(Math.floor(Math.abs(o)/n.length)+1)*n.length:0===e&&o===s-1&&(o=s-2,e=1),this.closed||0<o?i=n[(o-1)%s]:(Mn.subVectors(n[0],n[1]).add(n[0]),i=Mn),a=n[o%s],r=n[(o+1)%s],this.closed||o+2<s?n=n[(o+2)%s]:(Mn.subVectors(n[s-1],n[s-2]).add(n[s-1]),n=Mn),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var n,o,i,a,r,c="chordal"===this.type?.5:.25,s=Math.pow(i.distanceToSquared(a),c);1e-4>(o=Math.pow(a.distanceToSquared(r),c))&&(o=1),1e-4>s&&(s=o),1e-4>(c=Math.pow(r.distanceToSquared(n),c))&&(c=o),es.initNonuniformCatmullRom(i.x,a.x,r.x,n.x,s,o,c),Xn.initNonuniformCatmullRom(i.y,a.y,r.y,n.y,s,o,c),Gn.initNonuniformCatmullRom(i.z,a.z,r.z,n.z,s,o,c)}else"catmullrom"===this.type&&(s=void 0!==this.tension?this.tension:.5,es.initCatmullRom(i.x,a.x,r.x,n.x,s),Xn.initCatmullRom(i.y,a.y,r.y,n.y,s),Gn.initCatmullRom(i.z,a.z,r.z,n.z,s));return new t(es.calc(e),Xn.calc(e),Gn.calc(e))},zt.prototype=Object.create(k.prototype),zt.prototype.constructor=zt,zt.prototype.getPoint=function(e){var n=this.v0,s=this.v1,o=this.v2,i=this.v3;return new t(ke(e,n.x,s.x,o.x,i.x),ke(e,n.y,s.y,o.y,i.y),ke(e,n.z,s.z,o.z,i.z))},Ft.prototype=Object.create(k.prototype),Ft.prototype.constructor=Ft,Ft.prototype.getPoint=function(e){var n=this.v0,s=this.v1,o=this.v2;return new t(Ce(e,n.x,s.x,o.x),Ce(e,n.y,s.y,o.y),Ce(e,n.z,s.z,o.z))},kt.prototype=Object.create(k.prototype),kt.prototype.constructor=kt,kt.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var n=new t;return n.subVectors(this.v2,this.v1),n.multiplyScalar(e),n.add(this.v1),n},_n.prototype=Object.create(Q.prototype),_n.prototype.constructor=_n,k.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(k.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Qs.prototype=Object.create(W.prototype),Ys.prototype=Object.create(W.prototype),Jn.prototype=Object.create(W.prototype),Object.assign(Jn.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),cn.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Object.assign(un.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(K.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),ce.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},l.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},Object.assign(B.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(r.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new t),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,s,o,i){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,s,n,o,i)}}),z.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},y.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(ie.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(Se.prototype,{extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new I(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ot(this,e)}}),Object.assign(n.prototype,{fromAttribute:function(e,t,n){return console.error("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)}}),Object.assign(t.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.error("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)}}),Object.assign(f.prototype,{fromAttribute:function(e,t,n){return console.error("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)}}),c.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign(s.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)}}),Object.defineProperties(s.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Ut.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),x.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(b.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(u.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(i.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(i.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(jn.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(h.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new a}}}),Object.defineProperties(U.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(E.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(ns.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(ns.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=e}}}),Object.defineProperties(Vs.prototype,{cullFace:{get:function(){return this.renderReverseSided?2:1},set:function(e){e=1!==e,console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+e+"."),this.renderReverseSided=e}}}),Object.defineProperties(oe.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),qe.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new ls).load(e,function(e){t.setBuffer(e)}),this},gs.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},e.WebGLRenderTargetCube=Ne,e.WebGLRenderTarget=oe,e.WebGLRenderer=ns,e.ShaderLib=Z,e.UniformsLib=d,e.UniformsUtils=A,e.ShaderChunk=m,e.FogExp2=Je,e.Fog=et,e.Scene=Fe,e.LensFlare=Kn,e.Sprite=Kt,e.LOD=Ut,e.SkinnedMesh=In,e.Skeleton=yn,e.Bone=Nn,e.Mesh=_,e.LineSegments=g,e.Line=ee,e.Points=mt,e.Group=Ct,e.VideoTexture=$n,e.DataTexture=be,e.CompressedTexture=gt,e.CubeTexture=se,e.CanvasTexture=Un,e.DepthTexture=Ot,e.Texture=p,e.CompressedTextureLoader=Ns,e.DataTextureLoader=cs,e.CubeTextureLoader=Os,e.TextureLoader=bn,e.ObjectLoader=eo,e.MaterialLoader=Vn,e.BufferGeometryLoader=ts,e.DefaultLoadingManager=T,e.LoadingManager=os,e.JSONLoader=Zn,e.ImageLoader=an,e.FontLoader=Ds,e.FileLoader=$,e.Loader=Oe,e.Cache=Dt,e.AudioLoader=ls,e.SpotLightShadow=wn,e.SpotLight=On,e.PointLight=xn,e.RectAreaLight=ds,e.HemisphereLight=fn,e.DirectionalLightShadow=Cn,e.DirectionalLight=Fn,e.AmbientLight=kn,e.LightShadow=ye,e.Light=b,e.StereoCamera=zs,e.PerspectiveCamera=x,e.OrthographicCamera=ut,e.CubeCamera=Ln,e.Camera=C,e.AudioListener=ms,e.PositionalAudio=ps,e.AudioContext=gn,e.AudioAnalyser=gs,e.Audio=qe,e.VectorKeyframeTrack=Qe,e.StringKeyframeTrack=Rn,e.QuaternionKeyframeTrack=Rt,e.NumberKeyframeTrack=Xe,e.ColorKeyframeTrack=Hn,e.BooleanKeyframeTrack=Pn,e.PropertyMixer=An,e.PropertyBinding=v,e.KeyframeTrack=we,e.AnimationUtils=O,e.AnimationObjectGroup=js,e.AnimationMixer=en,e.AnimationClip=L,e.Uniform=jn,e.InstancedBufferGeometry=Me,e.BufferGeometry=i,e.GeometryIdCount=function(){return Sn++},e.Geometry=c,e.InterleavedBufferAttribute=xs,e.InstancedInterleavedBuffer=Ue,e.InterleavedBuffer=Ke,e.InstancedBufferAttribute=We,e.Face3=N,e.Object3D=s,e.Raycaster=ws,e.Layers=pn,e.EventDispatcher=X,e.Clock=bs,e.QuaternionLinearInterpolant=Dn,e.LinearInterpolant=$t,e.DiscreteInterpolant=En,e.CubicInterpolant=mn,e.Interpolant=F,e.Triangle=R,e.Math=l,e.Spherical=fs,e.Cylindrical=us,e.Plane=z,e.Frustum=ln,e.Sphere=D,e.Ray=ie,e.Matrix4=r,e.Matrix3=B,e.Box3=K,e.Box2=un,e.Line3=ce,e.Euler=ne,e.Vector4=f,e.Vector3=t,e.Vector2=n,e.Quaternion=y,e.Color=a,e.MorphBlendMesh=w,e.ImmediateRenderObject=dn,e.VertexNormalsHelper=hn,e.SpotLightHelper=$e,e.SkeletonHelper=Ve,e.PointLightHelper=Be,e.RectAreaLightHelper=Ie,e.HemisphereLightHelper=He,e.GridHelper=cn,e.PolarGridHelper=vn,e.FaceNormalsHelper=tn,e.DirectionalLightHelper=Pe,e.CameraHelper=Pt,e.BoxHelper=Re,e.ArrowHelper=re,e.AxisHelper=Bn,e.CatmullRomCurve3=W,e.CubicBezierCurve3=zt,e.QuadraticBezierCurve3=Ft,e.LineCurve3=kt,e.ArcCurve=_n,e.EllipseCurve=Q,e.SplineCurve=Ae,e.CubicBezierCurve=Ge,e.QuadraticBezierCurve=Ye,e.LineCurve=q,e.Shape=Se,e.Path=Nt,e.ShapePath=is,e.Font=rs,e.CurvePath=_t,e.Curve=k,e.ShapeUtils=P,e.SceneUtils={createMultiMaterialObject:function(e,t){for(var s=new Ct,n=0,o=t.length;n<o;n++)s.add(new _(e,t[n]));return s},detach:function(e,t,n){e.applyMatrix(t.matrixWorld),t.remove(e),n.add(e)},attach:function(e,t,n){var s=new r;s.getInverse(n.matrixWorld),e.applyMatrix(s),t.remove(e),n.add(e)}},e.WireframeGeometry=De,e.ParametricGeometry=yt,e.ParametricBufferGeometry=vt,e.TetrahedronGeometry=xt,e.TetrahedronBufferGeometry=ft,e.OctahedronGeometry=Et,e.OctahedronBufferGeometry=je,e.IcosahedronGeometry=At,e.IcosahedronBufferGeometry=ht,e.DodecahedronGeometry=Mt,e.DodecahedronBufferGeometry=dt,e.PolyhedronGeometry=wt,e.PolyhedronBufferGeometry=S,e.TubeGeometry=Tt,e.TubeBufferGeometry=lt,e.TorusKnotGeometry=bt,e.TorusKnotBufferGeometry=ct,e.TorusGeometry=Lt,e.TorusBufferGeometry=rt,e.TextGeometry=Ht,e.SphereGeometry=It,e.SphereBufferGeometry=ve,e.RingGeometry=Vt,e.RingBufferGeometry=at,e.PlaneGeometry=St,e.PlaneBufferGeometry=Ee,e.LatheGeometry=Wt,e.LatheBufferGeometry=it,e.ShapeGeometry=ot,e.ShapeBufferGeometry=ze,e.ExtrudeGeometry=I,e.EdgesGeometry=st,e.ConeGeometry=Qt,e.ConeBufferGeometry=Zt,e.CylinderGeometry=he,e.CylinderBufferGeometry=J,e.CircleGeometry=Jt,e.CircleBufferGeometry=nt,e.BoxGeometry=pt,e.BoxBufferGeometry=xe,e.ShadowMaterial=tt,e.SpriteMaterial=Te,e.RawShaderMaterial=Ze,e.ShaderMaterial=E,e.PointsMaterial=V,e.MultiMaterial=sn,e.MeshPhysicalMaterial=le,e.MeshStandardMaterial=Y,e.MeshPhongMaterial=U,e.MeshToonMaterial=de,e.MeshNormalMaterial=ue,e.MeshLambertMaterial=fe,e.MeshDepthMaterial=te,e.MeshBasicMaterial=M,e.LineDashedMaterial=ge,e.LineBasicMaterial=j,e.Material=h,e.Float64BufferAttribute=Bt,e.Float32BufferAttribute=o,e.Uint32BufferAttribute=pe,e.Int32BufferAttribute=qt,e.Uint16BufferAttribute=me,e.Int16BufferAttribute=Gt,e.Uint8ClampedBufferAttribute=Xt,e.Uint8BufferAttribute=on,e.Int8BufferAttribute=jt,e.BufferAttribute=u,e.REVISION="84",e.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},e.CullFaceNone=0,e.CullFaceBack=1,e.CullFaceFront=2,e.CullFaceFrontBack=3,e.FrontFaceDirectionCW=0,e.FrontFaceDirectionCCW=1,e.BasicShadowMap=0,e.PCFShadowMap=1,e.PCFSoftShadowMap=2,e.FrontSide=0,e.BackSide=1,e.DoubleSide=2,e.FlatShading=1,e.SmoothShading=2,e.NoColors=0,e.FaceColors=1,e.VertexColors=2,e.NoBlending=0,e.NormalBlending=1,e.AdditiveBlending=2,e.SubtractiveBlending=3,e.MultiplyBlending=4,e.CustomBlending=5,e.AddEquation=100,e.SubtractEquation=101,e.ReverseSubtractEquation=102,e.MinEquation=103,e.MaxEquation=104,e.ZeroFactor=200,e.OneFactor=201,e.SrcColorFactor=202,e.OneMinusSrcColorFactor=203,e.SrcAlphaFactor=204,e.OneMinusSrcAlphaFactor=205,e.DstAlphaFactor=206,e.OneMinusDstAlphaFactor=207,e.DstColorFactor=208,e.OneMinusDstColorFactor=209,e.SrcAlphaSaturateFactor=210,e.NeverDepth=0,e.AlwaysDepth=1,e.LessDepth=2,e.LessEqualDepth=3,e.EqualDepth=4,e.GreaterEqualDepth=5,e.GreaterDepth=6,e.NotEqualDepth=7,e.MultiplyOperation=0,e.MixOperation=1,e.AddOperation=2,e.NoToneMapping=0,e.LinearToneMapping=1,e.ReinhardToneMapping=2,e.Uncharted2ToneMapping=3,e.CineonToneMapping=4,e.UVMapping=300,e.CubeReflectionMapping=301,e.CubeRefractionMapping=302,e.EquirectangularReflectionMapping=303,e.EquirectangularRefractionMapping=304,e.SphericalReflectionMapping=305,e.CubeUVReflectionMapping=306,e.CubeUVRefractionMapping=307,e.RepeatWrapping=1e3,e.ClampToEdgeWrapping=1001,e.MirroredRepeatWrapping=1002,e.NearestFilter=1003,e.NearestMipMapNearestFilter=1004,e.NearestMipMapLinearFilter=1005,e.LinearFilter=1006,e.LinearMipMapNearestFilter=1007,e.LinearMipMapLinearFilter=1008,e.UnsignedByteType=1009,e.ByteType=1010,e.ShortType=1011,e.UnsignedShortType=1012,e.IntType=1013,e.UnsignedIntType=1014,e.FloatType=1015,e.HalfFloatType=1016,e.UnsignedShort4444Type=1017,e.UnsignedShort5551Type=1018,e.UnsignedShort565Type=1019,e.UnsignedInt248Type=1020,e.AlphaFormat=1021,e.RGBFormat=1022,e.RGBAFormat=1023,e.LuminanceFormat=1024,e.LuminanceAlphaFormat=1025,e.RGBEFormat=1023,e.DepthFormat=1026,e.DepthStencilFormat=1027,e.RGB_S3TC_DXT1_Format=2001,e.RGBA_S3TC_DXT1_Format=2002,e.RGBA_S3TC_DXT3_Format=2003,e.RGBA_S3TC_DXT5_Format=2004,e.RGB_PVRTC_4BPPV1_Format=2100,e.RGB_PVRTC_2BPPV1_Format=2101,e.RGBA_PVRTC_4BPPV1_Format=2102,e.RGBA_PVRTC_2BPPV1_Format=2103,e.RGB_ETC1_Format=2151,e.LoopOnce=2200,e.LoopRepeat=2201,e.LoopPingPong=2202,e.InterpolateDiscrete=2300,e.InterpolateLinear=2301,e.InterpolateSmooth=2302,e.ZeroCurvatureEnding=2400,e.ZeroSlopeEnding=2401,e.WrapAroundEnding=2402,e.TrianglesDrawMode=0,e.TriangleStripDrawMode=1,e.TriangleFanDrawMode=2,e.LinearEncoding=3e3,e.sRGBEncoding=3001,e.GammaEncoding=3007,e.RGBEEncoding=3002,e.LogLuvEncoding=3003,e.RGBM7Encoding=3004,e.RGBM16Encoding=3005,e.RGBDEncoding=3006,e.BasicDepthPacking=3200,e.RGBADepthPacking=3201,e.CubeGeometry=pt,e.Face4=function(e,t,n,s,o,i,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new N(e,t,n,o,i,a)},e.LineStrip=0,e.LinePieces=1,e.MeshFaceMaterial=function(e){return console.warn("THREE.MeshFaceMaterial has been renamed to THREE.MultiMaterial."),new sn(e)},e.PointCloud=function(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new mt(e,t)},e.Particle=function(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Kt(e)},e.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new mt(e,t)},e.PointCloudMaterial=function(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new V(e)},e.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new V(e)},e.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new V(e)},e.Vertex=function(e,n,s){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new t(e,n,s)},e.DynamicBufferAttribute=function(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new u(e,t).setDynamic(!0)},e.Int8Attribute=function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new jt(e,t)},e.Uint8Attribute=function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new on(e,t)},e.Uint8ClampedAttribute=function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Xt(e,t)},e.Int16Attribute=function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Gt(e,t)},e.Uint16Attribute=function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new me(e,t)},e.Int32Attribute=function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new qt(e,t)},e.Uint32Attribute=function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new pe(e,t)},e.Float32Attribute=function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new o(e,t)},e.Float64Attribute=function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Bt(e,t)},e.ClosedSplineCurve3=Qs,e.SplineCurve3=Ys,e.Spline=Jn,e.BoundingBoxHelper=function(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Re(e,t)},e.EdgesHelper=function(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new g(new st(e.geometry),new j({color:void 0!==t?t:16777215}))},e.WireframeHelper=function(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new g(new De(e.geometry),new j({color:void 0!==t?t:16777215}))},e.XHRLoader=function(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new $(e)},e.BinaryTextureLoader=function(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new cs(e)},e.GeometryUtils={merge:function(e,t,n){var s;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),s=t.matrix,t=t.geometry),e.merge(t,s,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},e.ImageUtils={crossOrigin:void 0,loadTexture:function(e,t,n,s){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var o=new bn;return o.setCrossOrigin(this.crossOrigin),e=o.load(e,n,void 0,s),t&&(e.mapping=t),e},loadTextureCube:function(e,t,n,s){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var o=new Os;return o.setCrossOrigin(this.crossOrigin),e=o.load(e,n,void 0,s),t&&(e.mapping=t),e},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},e.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},e.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},Object.defineProperty(e,"__esModule",{value:!0})});var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";var e,t,n,s,o,i,a,r,c,l,d,u,h,m,f,p;_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,n){var r,l,d,c=function(e){var t,n=[],s=e.length;for(t=0;t!==s;n.push(e[t++]));return n},u=function(e,t,n){var s,o,i=e.cycle;for(o in i)s=i[o],e[o]="function"==typeof s?s(n,t[n]):s[n%s.length];delete e.cycle},s=function(e,t,o){n.call(this,e,t,o),this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=s.prototype.render},i=1e-10,a=n._internals,h=a.isSelector,m=a.isArray,o=s.prototype=n.to({},.1,{}),f=[];return s.version="1.19.1",o.constructor=s,o.kill()._gc=!1,s.killTweensOf=s.killDelayedCallsTo=n.killTweensOf,s.getTweensOf=n.getTweensOf,s.lagSmoothing=n.lagSmoothing,s.ticker=n.ticker,s.render=n.render,o.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),n.prototype.invalidate.call(this)},o.updateTo=function(e,t){var s,o,a,r,c,l=this.ratio,i=this.vars.immediateRender||e.immediateRender;for(o in t&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay)),e)this.vars[o]=e[o];if(this._initted||i)if(t)this._initted=!1,i&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&n._onPluginEvent("_onDisable",this),this._time/this._duration>.998)a=this._totalTime,this.render(0,!0,!1),this._initted=!1,this.render(a,!0,!1);else if(this._initted=!1,this._init(),this._time>0||i)for(c=1/(1-l),s=this._firstPT;s;)r=s.s+s.c,s.c*=c,s.s=r-s.c,s=s._next;return this},o.render=function(e,t,n){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var s,r,c,u,h,m,f,v,b=this._dirty?this.totalDuration():this._totalDuration,p=this._time,d=this._totalTime,g=this._cycle,o=this._duration,l=this._rawPrevTime;if(e>=b-1e-7&&e>=0?(this._totalTime=b,this._cycle=this._repeat,this._yoyo&&0!=(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=o,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(h=!0,c="onComplete",n=n||this._timeline.autoRemoveChildren),0===o&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(e=0),(0>l||0>=e&&e>=-1e-7||l===i&&"isPause"!==this.data)&&l!==e&&(n=!0,l>i&&(c="onReverseComplete")),this._rawPrevTime=v=!t||e||l===e?e:i)):1e-7>e?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==d||0===o&&l>0)&&(c="onReverseComplete",h=this._reversed),0>e&&(this._active=!1,0===o&&(this._initted||!this.vars.lazy||n)&&(l>=0&&(n=!0),this._rawPrevTime=v=!t||e||l===e?e:i)),this._initted||(n=!0)):(this._totalTime=this._time=e,0!==this._repeat&&(f=o+this._repeatDelay,this._cycle=this._totalTime/f>>0,0!==this._cycle&&this._cycle===this._totalTime/f&&e>=d&&this._cycle--,this._time=this._totalTime-this._cycle*f,this._yoyo&&0!=(1&this._cycle)&&(this._time=o-this._time),this._time>o?this._time=o:this._time<0&&(this._time=0)),this._easeType?(s=this._time/o,(1===(u=this._easeType)||3===u&&s>=.5)&&(s=1-s),3===u&&(s*=2),1===(m=this._easePower)?s*=s:2===m?s*=s*s:3===m?s*=s*s*s:4===m&&(s*=s*s*s*s),1===u?this.ratio=1-s:2===u?this.ratio=s:this._time/o<.5?this.ratio=s/2:this.ratio=1-s/2):this.ratio=this._ease.getRatio(this._time/o)),p!==this._time||n||g!==this._cycle){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!n&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=p,this._totalTime=d,this._rawPrevTime=l,this._cycle=g,a.lazyTweens.push(this),void(this._lazy=[e,t]);this._time&&!h?this.ratio=this._ease.getRatio(this._time/o):h&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==p&&e>=0&&(this._active=!0),0===d&&(2===this._initted&&e>0&&this._init(),this._startAt&&(e>=0?this._startAt.render(e,t,n):c||(c="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===o)&&(t||this._callback("onStart"))),r=this._firstPT;r;)r.f?r.t[r.p](r.c*this.ratio+r.s):r.t[r.p]=r.c*this.ratio+r.s,r=r._next;this._onUpdate&&(0>e&&this._startAt&&this._startTime&&this._startAt.render(e,t,n),t||(this._totalTime!==d||c)&&this._callback("onUpdate")),this._cycle!==g&&(t||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),c&&(!this._gc||n)&&(0>e&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(e,t,n),h&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[c]&&this._callback(c),0===o&&this._rawPrevTime===i&&v!==i&&(this._rawPrevTime=0))}else d!==this._totalTime&&this._onUpdate&&(t||this._callback("onUpdate"))},s.to=function(e,t,n){return new s(e,t,n)},s.from=function(e,t,n){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,new s(e,t,n)},s.fromTo=function(e,t,n,o){return o.startAt=n,o.immediateRender=0!=o.immediateRender&&0!=n.immediateRender,new s(e,t,o)},s.staggerTo=s.allTo=function(e,t,o,i,a,r,l){i=i||0;var d,p,g,v,j=0,y=[],_=function(){o.onComplete&&o.onComplete.apply(o.onCompleteScope||this,arguments),a.apply(l||o.callbackScope||this,r||f)},w=o.cycle,b=o.startAt&&o.startAt.cycle;for(m(e)||("string"==typeof e&&(e=n.selector(e)||e),h(e)&&(e=c(e))),e=e||[],0>i&&((e=c(e)).reverse(),i*=-1),v=e.length-1,p=0;v>=p;p++){for(g in d={},o)d[g]=o[g];if(w&&(u(d,e,p),null!=d.duration&&(t=d.duration,delete d.duration)),b){for(g in b=d.startAt={},o.startAt)b[g]=o.startAt[g];u(d.startAt,e,p)}d.delay=j+(d.delay||0),p===v&&a&&(d.onComplete=_),y[p]=new s(e[p],t,d),j+=i}return y},s.staggerFrom=s.allFrom=function(e,t,n,o,i,a,r){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,s.staggerTo(e,t,n,o,i,a,r)},s.staggerFromTo=s.allFromTo=function(e,t,n,o,i,a,r,c){return o.startAt=n,o.immediateRender=0!=o.immediateRender&&0!=n.immediateRender,s.staggerTo(e,t,o,i,a,r,c)},s.delayedCall=function(e,t,n,o,i){return new s(t,0,{delay:e,onComplete:t,onCompleteParams:n,callbackScope:o,onReverseComplete:t,onReverseCompleteParams:n,immediateRender:!1,useFrames:i,overwrite:0})},s.set=function(e,t){return new s(e,0,t)},s.isTweening=function(e){return n.getTweensOf(e,!0).length>0},r=function(e,t){for(var o=[],i=0,s=e._first;s;)s instanceof n?o[i++]=s:(t&&(o[i++]=s),i=(o=o.concat(r(s,t))).length),s=s._next;return o},l=s.getAllTweens=function(t){return r(e._rootTimeline,t).concat(r(e._rootFramesTimeline,t))},s.killAll=function(e,n,s,o){n==null&&(n=!0),s==null&&(s=!0);var i,a,r,c=l(0!=o),d=c.length,u=n&&s&&o;for(a=0;d>a;a++)i=c[a],(u||i instanceof t||(r=i.target===i.vars.onComplete)&&s||n&&!r)&&(e?i.totalTime(i._reversed?0:i.totalDuration()):i._enabled(!1,!1))},s.killChildTweensOf=function(e,t){if(e!=null){var o,i,r,l,u,d=a.tweenLookup;if("string"==typeof e&&(e=n.selector(e)||e),h(e)&&(e=c(e)),m(e))for(o=e.length;--o>-1;)s.killChildTweensOf(e[o],t);else{for(l in i=[],d)for(r=d[l].target.parentNode;r;)r===e&&(i=i.concat(d[l].tweens)),r=r.parentNode;for(u=i.length,o=0;u>o;o++)t&&i[o].totalTime(i[o].totalDuration()),i[o]._enabled(!1,!1)}}},d=function(e,n,s,o){n=!1!==n,s=!1!==s;for(var i,a,r=l(o=!1!==o),d=n&&s&&o,c=r.length;--c>-1;)i=r[c],(d||i instanceof t||(a=i.target===i.vars.onComplete)&&s||n&&!a)&&i.paused(e)},s.pauseAll=function(e,t,n){d(!0,e,t,n)},s.resumeAll=function(e,t,n){d(!1,e,t,n)},s.globalTimeScale=function(t){var s=e._rootTimeline,o=n.ticker.time;return arguments.length?(t=t||i,s._startTime=o-(o-s._startTime)*s._timeScale/t,s=e._rootFramesTimeline,o=n.ticker.frame,s._startTime=o-(o-s._startTime)*s._timeScale/t,s._timeScale=e._rootTimeline._timeScale=t,t):s._timeScale},o.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()},o.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()},o.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&0!=(1&this._cycle)?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},o.duration=function(t){return arguments.length?e.prototype.duration.call(this,t):this._duration},o.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},o.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},o.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},o.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},s},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,n){var o=function(e){t.call(this,e),this._labels={},this.autoRemoveChildren=!0===this.vars.autoRemoveChildren,this.smoothChildTiming=!0===this.vars.smoothChildTiming,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var s,o,n=this.vars;for(o in n)s=n[o],i(s)&&-1!==s.join("").indexOf("{self}")&&(n[o]=this._swapSelfInParams(s));i(n.tweens)&&this.add(n.tweens,0,n.align,n.stagger)},a=1e-10,r=n._internals,g=o._internals={},f=r.isSelector,i=r.isArray,u=r.lazyTweens,d=r.lazyRender,c=_gsScope._gsDefine.globals,l=function(e){var t,n={};for(t in e)n[t]=e[t];return n},h=function(e,t,n){var s,o,i=e.cycle;for(o in i)s=i[o],e[o]="function"==typeof s?s(n,t[n]):s[n%s.length];delete e.cycle},p=g.pauseCallback=function(){},m=function(e){var t,n=[],s=e.length;for(t=0;t!==s;n.push(e[t++]));return n},s=o.prototype=new t;return o.version="1.19.1",s.constructor=o,s.kill()._gc=s._forcingPlayhead=s._hasPause=!1,s.to=function(e,t,s,o){var i=s.repeat&&c.TweenMax||n;return t?this.add(new i(e,t,s),o):this.set(e,s,o)},s.from=function(e,t,s,o){return this.add((s.repeat&&c.TweenMax||n).from(e,t,s),o)},s.fromTo=function(e,t,s,o,i){var a=o.repeat&&c.TweenMax||n;return t?this.add(a.fromTo(e,t,s,o),i):this.set(e,o,i)},s.staggerTo=function(e,t,s,i,a,r,c,d){var u,p,g=new o({onComplete:r,onCompleteParams:c,callbackScope:d,smoothChildTiming:this.smoothChildTiming}),v=s.cycle;for("string"==typeof e&&(e=n.selector(e)||e),f(e=e||[])&&(e=m(e)),0>(i=i||0)&&((e=m(e)).reverse(),i*=-1),p=0;p<e.length;p++)(u=l(s)).startAt&&(u.startAt=l(u.startAt),u.startAt.cycle&&h(u.startAt,e,p)),v&&(h(u,e,p),null!=u.duration&&(t=u.duration,delete u.duration)),g.to(e[p],t,u,p*i);return this.add(g,a)},s.staggerFrom=function(e,t,n,s,o,i,a,r){return n.immediateRender=0!=n.immediateRender,n.runBackwards=!0,this.staggerTo(e,t,n,s,o,i,a,r)},s.staggerFromTo=function(e,t,n,s,o,i,a,r,c){return s.startAt=n,s.immediateRender=0!=s.immediateRender&&0!=n.immediateRender,this.staggerTo(e,t,s,o,i,a,r,c)},s.call=function(e,t,s,o){return this.add(n.delayedCall(0,e,t,s),o)},s.set=function(e,t,s){return s=this._parseTimeOrLabel(s,0,!0),null==t.immediateRender&&(t.immediateRender=s===this._time&&!this._paused),this.add(new n(e,0,t),s)},o.exportRoot=function(e,t){null==(e=e||{}).smoothChildTiming&&(e.smoothChildTiming=!0);var s,r,i=new o(e),a=i._timeline;for(t==null&&(t=!0),a._remove(i,!0),i._startTime=0,i._rawPrevTime=i._time=i._totalTime=a._time,s=a._first;s;)r=s._next,t&&s instanceof n&&s.target===s.vars.onComplete||i.add(s,s._startTime-s._delay),s=r;return a.add(i,0),i},s.add=function(s,a,r,c){var l,d,u,h,m,f;if("number"!=typeof a&&(a=this._parseTimeOrLabel(a,0,!0,s)),!(s instanceof e)){if(s instanceof Array||s&&s.push&&i(s)){for(r=r||"normal",c=c||0,u=a,m=s.length,h=0;m>h;h++)i(l=s[h])&&(l=new o({tweens:l})),this.add(l,u),"string"!=typeof l&&"function"!=typeof l&&("sequence"===r?u=l._startTime+l.totalDuration()/l._timeScale:"start"===r&&(l._startTime-=l.delay())),u+=c;return this._uncache(!0)}if("string"==typeof s)return this.addLabel(s,a);if("function"!=typeof s)throw"Cannot add "+s+" into the timeline; it is not a tween, timeline, function, or string.";s=n.delayedCall(0,s)}if(t.prototype.add.call(this,s,a),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(f=(d=this).rawTime()>s._startTime;d._timeline;)f&&d._timeline.smoothChildTiming?d.totalTime(d._totalTime,!0):d._gc&&d._enabled(!0,!1),d=d._timeline;return this},s.remove=function(t){if(t instanceof e){this._remove(t,!1);var n,s=t._timeline=t.vars.useFrames?e._rootFramesTimeline:e._rootTimeline;return t._startTime=(t._paused?t._pauseTime:s._time)-(t._reversed?t.totalDuration()-t._totalTime:t._totalTime)/t._timeScale,this}if(t instanceof Array||t&&t.push&&i(t)){for(n=t.length;--n>-1;)this.remove(t[n]);return this}return"string"==typeof t?this.removeLabel(t):this.kill(null,t)},s._remove=function(e,n){return t.prototype._remove.call(this,e,n),this._last?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},s.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,!0,e))},s.insert=s.insertMultiple=function(e,t,n,s){return this.add(e,t||0,n,s)},s.appendMultiple=function(e,t,n,s){return this.add(e,this._parseTimeOrLabel(null,t,!0,e),n,s)},s.addLabel=function(e,t){return this._labels[e]=this._parseTimeOrLabel(t),this},s.addPause=function(e,t,s,o){var i=n.delayedCall(0,p,s,o||this);return i.vars.onComplete=i.vars.onReverseComplete=t,i.data="isPause",this._hasPause=!0,this.add(i,e)},s.removeLabel=function(e){return delete this._labels[e],this},s.getLabelTime=function(e){return null!=this._labels[e]?this._labels[e]:-1},s._parseTimeOrLabel=function(t,n,s,o){var a;if(o instanceof e&&o.timeline===this)this.remove(o);else if(o&&(o instanceof Array||o.push&&i(o)))for(a=o.length;--a>-1;)o[a]instanceof e&&o[a].timeline===this&&this.remove(o[a]);if("string"==typeof n)return this._parseTimeOrLabel(n,s&&"number"==typeof t&&null==this._labels[n]?t-this.duration():0,s);if(n=n||0,"string"!=typeof t||!isNaN(t)&&null==this._labels[t])t==null&&(t=this.duration());else{if(-1===(a=t.indexOf("=")))return null==this._labels[t]?s?this._labels[t]=this.duration()+n:n:this._labels[t]+n;n=parseInt(t.charAt(a-1)+"1",10)*Number(t.substr(a+1)),t=a>1?this._parseTimeOrLabel(t.substr(0,a-1),0,s):this.duration()}return Number(t)+n},s.seek=function(e,t){return this.totalTime("number"==typeof e?e:this._parseTimeOrLabel(e),!1!==t)},s.stop=function(){return this.paused(!0)},s.gotoAndPlay=function(e,t){return this.play(e,t)},s.gotoAndStop=function(e,t){return this.pause(e,t)},s.render=function(e,t,n){this._gc&&this._enabled(!0,!1);var s,o,i,c,l,h,m,f=this._dirty?this.totalDuration():this._totalDuration,r=this._time,g=this._startTime,v=this._timeScale,p=this._paused;if(e>=f-1e-7&&e>=0)this._totalTime=this._time=f,this._reversed||this._hasPausedChild()||(c=!0,i="onComplete",l=!!this._timeline.autoRemoveChildren,0===this._duration&&(0>=e&&e>=-1e-7||this._rawPrevTime<0||this._rawPrevTime===a)&&this._rawPrevTime!==e&&this._first&&(l=!0,this._rawPrevTime>a&&(i="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:a,e=f+1e-4;else if(1e-7>e)if(this._totalTime=this._time=0,(0!==r||0===this._duration&&this._rawPrevTime!==a&&(this._rawPrevTime>0||0>e&&this._rawPrevTime>=0))&&(i="onReverseComplete",c=this._reversed),0>e)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(l=c=!0,i="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(l=!0),this._rawPrevTime=e;else{if(this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:a,0===e&&c)for(s=this._first;s&&0===s._startTime;)s._duration||(c=!1),s=s._next;e=0,this._initted||(l=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!t){if(e>=r)for(s=this._first;s&&s._startTime<=e&&!o;)s._duration||"isPause"!==s.data||s.ratio||0===s._startTime&&0===this._rawPrevTime||(o=s),s=s._next;else for(s=this._last;s&&s._startTime>=e&&!o;)s._duration||"isPause"===s.data&&s._rawPrevTime>0&&(o=s),s=s._prev;o&&(this._time=e=o._startTime,this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=e}if(this._time!==r&&this._first||n||l||o){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==r&&e>0&&(this._active=!0),0===r&&this.vars.onStart&&(0===this._time&&this._duration||t||this._callback("onStart")),(m=this._time)>=r)for(s=this._first;s&&(h=s._next,m===this._time&&(!this._paused||p));)(s._active||s._startTime<=m&&!s._paused&&!s._gc)&&(o===s&&this.pause(),s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(e-s._startTime)*s._timeScale,t,n):s.render((e-s._startTime)*s._timeScale,t,n)),s=h;else for(s=this._last;s&&(h=s._prev,m===this._time&&(!this._paused||p));){if(s._active||s._startTime<=r&&!s._paused&&!s._gc){if(o===s){for(o=s._prev;o&&o.endTime()>this._time;)o.render(o._reversed?o.totalDuration()-(e-o._startTime)*o._timeScale:(e-o._startTime)*o._timeScale,t,n),o=o._prev;o=null,this.pause()}s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(e-s._startTime)*s._timeScale,t,n):s.render((e-s._startTime)*s._timeScale,t,n)}s=h}this._onUpdate&&(t||(u.length&&d(),this._callback("onUpdate"))),i&&(this._gc||(g===this._startTime||v!==this._timeScale)&&(0===this._time||f>=this.totalDuration())&&(c&&(u.length&&d(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[i]&&this._callback(i)))}},s._hasPausedChild=function(){for(var e=this._first;e;){if(e._paused||e instanceof o&&e._hasPausedChild())return!0;e=e._next}return!1},s.getChildren=function(e,t,s,o){o=o||-9999999999;for(var a=[],i=this._first,r=0;i;)i._startTime<o||(i instanceof n?!1!==t&&(a[r++]=i):(!1!==s&&(a[r++]=i),!1!==e&&(r=(a=a.concat(i.getChildren(!0,t,s))).length))),i=i._next;return a},s.getTweensOf=function(e,t){var s,o,i=this._gc,a=[],r=0;for(i&&this._enabled(!0,!0),s=(o=n.getTweensOf(e)).length;--s>-1;)(o[s].timeline===this||t&&this._contains(o[s]))&&(a[r++]=o[s]);return i&&this._enabled(!1,!0),a},s.recent=function(){return this._recent},s._contains=function(e){for(var t=e.timeline;t;){if(t===this)return!0;t=t.timeline}return!1},s.shiftChildren=function(e,t,n){n=n||0;for(var o,s=this._first,i=this._labels;s;)s._startTime>=n&&(s._startTime+=e),s=s._next;if(t)for(o in i)i[o]>=n&&(i[o]+=e);return this._uncache(!0)},s._kill=function(e,t){if(!e&&!t)return this._enabled(!1,!1);for(var n=t?this.getTweensOf(t):this.getChildren(!0,!0,!1),s=n.length,o=!1;--s>-1;)n[s]._kill(e,t)&&(o=!0);return o},s.clear=function(e){var t=this.getChildren(!1,!0,!0),n=t.length;for(this._time=this._totalTime=0;--n>-1;)t[n]._enabled(!1,!1);return!1!==e&&(this._labels={}),this._uncache(!0)},s.invalidate=function(){for(var t=this._first;t;)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},s._enabled=function(e,n){if(e===this._gc)for(var s=this._first;s;)s._enabled(e,!0),s=s._next;return t.prototype._enabled.call(this,e,n)},s.totalTime=function(){this._forcingPlayhead=!0;var o=e.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,o},s.duration=function(e){return arguments.length?(0!==this.duration()&&0!==e&&this.timeScale(this._duration/e),this):(this._dirty&&this.totalDuration(),this._duration)},s.totalDuration=function(e){if(!arguments.length){if(this._dirty){for(var o,i,n=0,t=this._last,s=999999999999;t;)o=t._prev,t._dirty&&t.totalDuration(),t._startTime>s&&this._sortChildren&&!t._paused?this.add(t,t._startTime-t._delay):s=t._startTime,t._startTime<0&&!t._paused&&(n-=t._startTime,this._timeline.smoothChildTiming&&(this._startTime+=t._startTime/this._timeScale),this.shiftChildren(-t._startTime,!1,-9999999999),s=0),(i=t._startTime+t._totalDuration/t._timeScale)>n&&(n=i),t=o;this._duration=this._totalDuration=n,this._dirty=!1}return this._totalDuration}return e&&this.totalDuration()?this.timeScale(this._totalDuration/e):this},s.paused=function(t){if(!t)for(var n=this._first,s=this._time;n;)n._startTime===s&&"isPause"===n.data&&(n._rawPrevTime=0),n=n._next;return e.prototype.paused.apply(this,arguments)},s.usesFrames=function(){for(var t=this._timeline;t._timeline;)t=t._timeline;return t===e._rootFramesTimeline},s.rawTime=function(e){return e&&(this._paused||this._repeat&&this.time()>0&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(e)-this._startTime)*this._timeScale},o},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(e,t,n){var i=function(t){e.call(this,t),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._dirty=!0},o=1e-10,a=t._internals,r=a.lazyTweens,c=a.lazyRender,l=_gsScope._gsDefine.globals,d=new n(null,null,1,0),s=i.prototype=new e;return s.constructor=i,s.kill()._gc=!1,i.version="1.19.1",s.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),e.prototype.invalidate.call(this)},s.addCallback=function(e,n,s,o){return this.add(t.delayedCall(0,e,s,o),n)},s.removeCallback=function(e,t){if(e)if(t==null)this._kill(null,e);else for(var n=this.getTweensOf(e,!1),s=n.length,o=this._parseTimeOrLabel(t);--s>-1;)n[s]._startTime===o&&n[s]._enabled(!1,!1);return this},s.removePause=function(t){return this.removeCallback(e._internals.pauseCallback,t)},s.tweenTo=function(e,n){n=n||{};var s,i,a,o={ease:d,useFrames:this.usesFrames(),immediateRender:!1},r=n.repeat&&l.TweenMax||t;for(a in n)o[a]=n[a];return o.time=this._parseTimeOrLabel(e),i=Math.abs(Number(o.time)-this._time)/this._timeScale||.001,s=new r(this,i,o),o.onStart=function(){s.target.paused(!0),s.vars.time!==s.target.time()&&i===s.duration()&&s.duration(Math.abs(s.vars.time-s.target.time())/s.target._timeScale),n.onStart&&n.onStart.apply(n.onStartScope||n.callbackScope||s,n.onStartParams||[])},s},s.tweenFromTo=function(e,t,n){n=n||{},e=this._parseTimeOrLabel(e),n.startAt={onComplete:this.seek,onCompleteParams:[e],callbackScope:this},n.immediateRender=!1!==n.immediateRender;var s=this.tweenTo(t,n);return s.duration(Math.abs(s.vars.time-e)/this._timeScale||.001)},s.render=function(e,t,n){this._gc&&this._enabled(!0,!1);var s,i,u,h,f,g,b,_,j=this._dirty?this.totalDuration():this._totalDuration,a=this._duration,l=this._time,v=this._totalTime,O=this._startTime,x=this._timeScale,d=this._rawPrevTime,y=this._paused,m=this._cycle;if(e>=j-1e-7&&e>=0)this._locked||(this._totalTime=j,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(f=!0,u="onComplete",h=!!this._timeline.autoRemoveChildren,0===this._duration&&(0>=e&&e>=-1e-7||0>d||d===o)&&d!==e&&this._first&&(h=!0,d>o&&(u="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:o,this._yoyo&&0!=(1&this._cycle)?this._time=e=0:(this._time=a,e=a+1e-4);else if(1e-7>e)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==l||0===a&&d!==o&&(d>0||0>e&&d>=0)&&!this._locked)&&(u="onReverseComplete",f=this._reversed),0>e)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(h=f=!0,u="onReverseComplete"):d>=0&&this._first&&(h=!0),this._rawPrevTime=e;else{if(this._rawPrevTime=a||!t||e||this._rawPrevTime===e?e:o,0===e&&f)for(s=this._first;s&&0===s._startTime;)s._duration||(f=!1),s=s._next;e=0,this._initted||(h=!0)}else if(0===a&&0>d&&(h=!0),this._time=this._rawPrevTime=e,this._locked||(this._totalTime=e,0!==this._repeat&&(g=a+this._repeatDelay,this._cycle=this._totalTime/g>>0,0!==this._cycle&&this._cycle===this._totalTime/g&&e>=v&&this._cycle--,this._time=this._totalTime-this._cycle*g,this._yoyo&&0!=(1&this._cycle)&&(this._time=a-this._time),this._time>a?(this._time=a,e=a+1e-4):this._time<0?this._time=e=0:e=this._time)),this._hasPause&&!this._forcingPlayhead&&!t&&a>e){if((e=this._time)>=l||this._repeat&&m!==this._cycle)for(s=this._first;s&&s._startTime<=e&&!i;)s._duration||"isPause"!==s.data||s.ratio||0===s._startTime&&0===this._rawPrevTime||(i=s),s=s._next;else for(s=this._last;s&&s._startTime>=e&&!i;)s._duration||"isPause"===s.data&&s._rawPrevTime>0&&(i=s),s=s._prev;i&&(this._time=e=i._startTime,this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay))}if(this._cycle!==m&&!this._locked){var p=this._yoyo&&0!=(1&m),C=p===(this._yoyo&&0!=(1&this._cycle)),E=this._totalTime,w=this._cycle,k=this._rawPrevTime,A=this._time;if(this._totalTime=m*a,this._cycle<m?p=!p:this._totalTime+=a,this._time=l,this._rawPrevTime=0===a?d-1e-4:d,this._cycle=m,this._locked=!0,l=p?0:a,this.render(l,t,0===a),t||this._gc||this.vars.onRepeat&&(this._cycle=w,this._locked=!1,this._callback("onRepeat")),l!==this._time)return;if(C&&(this._cycle=m,this._locked=!0,l=p?a+1e-4:-1e-4,this.render(l,!0,!1)),this._locked=!1,this._paused&&!y)return;this._time=A,this._totalTime=E,this._cycle=w,this._rawPrevTime=k}if(this._time!==l&&this._first||n||h||i){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==v&&e>0&&(this._active=!0),0===v&&this.vars.onStart&&(0===this._totalTime&&this._totalDuration||t||this._callback("onStart")),(_=this._time)>=l)for(s=this._first;s&&(b=s._next,_===this._time&&(!this._paused||y));)(s._active||s._startTime<=this._time&&!s._paused&&!s._gc)&&(i===s&&this.pause(),s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(e-s._startTime)*s._timeScale,t,n):s.render((e-s._startTime)*s._timeScale,t,n)),s=b;else for(s=this._last;s&&(b=s._prev,_===this._time&&(!this._paused||y));){if(s._active||s._startTime<=l&&!s._paused&&!s._gc){if(i===s){for(i=s._prev;i&&i.endTime()>this._time;)i.render(i._reversed?i.totalDuration()-(e-i._startTime)*i._timeScale:(e-i._startTime)*i._timeScale,t,n),i=i._prev;i=null,this.pause()}s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(e-s._startTime)*s._timeScale,t,n):s.render((e-s._startTime)*s._timeScale,t,n)}s=b}this._onUpdate&&(t||(r.length&&c(),this._callback("onUpdate"))),u&&(this._locked||this._gc||(O===this._startTime||x!==this._timeScale)&&(0===this._time||j>=this.totalDuration())&&(f&&(r.length&&c(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[u]&&this._callback(u)))}else v!==this._totalTime&&this._onUpdate&&(t||this._callback("onUpdate"))},s.getActive=function(e,t,n){e==null&&(e=!0),t==null&&(t=!0),n==null&&(n=!1);var s,o,i=[],a=this.getChildren(e,t,n),r=0,c=a.length;for(s=0;c>s;s++)(o=a[s]).isActive()&&(i[r++]=o);return i},s.getLabelAfter=function(e){e||0!==e&&(e=this._time);var t,n=this.getLabelsArray(),s=n.length;for(t=0;s>t;t++)if(n[t].time>e)return n[t].name;return null},s.getLabelBefore=function(e){e==null&&(e=this._time);for(var t=this.getLabelsArray(),n=t.length;--n>-1;)if(t[n].time<e)return t[n].name;return null},s.getLabelsArray=function(){var e,t=[],n=0;for(e in this._labels)t[n++]={time:this._labels[e],name:e};return t.sort(function(e,t){return e.time-t.time}),t},s.invalidate=function(){return this._locked=!1,e.prototype.invalidate.call(this)},s.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()},s.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()},s.totalDuration=function(t){return arguments.length?-1!==this._repeat&&t?this.timeScale(this.totalDuration()/t):this:(this._dirty&&(e.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},s.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&0!=(1&this._cycle)?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},s.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},s.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},s.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},s.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.getLabelBefore(this._time+1e-8)},i},!0),f=180/Math.PI,e=[],t=[],n=[],i={},p=_gsScope._gsDefine.globals,o=function(e,t,n,s){n===s&&(n=s-(s-t)/1e6),e===t&&(t=e+(n-e)/1e6),this.a=e,this.b=t,this.c=n,this.d=s,this.da=s-e,this.ca=n-e,this.ba=t-e},a=function(e,t,n,s){var a={a:e},o={},i={},r={c:s},c=(e+t)/2,h=(t+n)/2,l=(n+s)/2,d=(c+h)/2,u=(h+l)/2,m=(u-d)/8;return a.b=c+(e-c)/4,o.b=d+m,a.c=o.a=(a.b+o.b)/2,o.c=i.a=(d+u)/2,i.b=u-m,r.b=l+(s-l)/4,i.c=r.a=(i.b+r.b)/2,[a,o,i,r]},l=function(s,o,i,r,c){var l,d,h,f,p,g,v,b,j,y,_,w,O,x=s.length-1,m=0,u=s[0].a;for(p=0;x>p;p++)f=(l=s[m]).a,d=l.d,O=s[m+1].d,c?(g=e[p],w=((y=t[p])+g)*o*.25/(r?.5:n[p]||.5),j=d-((v=d-(d-f)*(r?.5*o:0!==g?w/g:0))+(((b=d+(O-d)*(r?.5*o:0!==y?w/y:0))-v)*(3*g/(g+y)+.5)/4||0))):j=d-((v=d-(d-f)*o*.5)+(b=d+(O-d)*o*.5))/2,v+=j,b+=j,l.c=_=v,l.b=0!==p?u:u=l.a+.6*(l.c-l.a),l.da=d-f,l.ca=_-f,l.ba=u-f,i?(h=a(f,u,_,d),s.splice(m,1,h[0],h[1],h[2],h[3]),m+=4):m++,u=b;(l=s[m]).b=u,l.c=u+.4*(l.d-u),l.da=l.d-l.a,l.ca=l.c-l.a,l.ba=u-l.a,i&&(h=a(l.a,u,l.c,l.d),s.splice(m,1,h[0],h[1],h[2],h[3]))},d=function(n,s,i,a){var r,c,d,u,h,m,l=[];if(a)for(r=(n=[a].concat(n)).length;--r>-1;)"string"==typeof(u=n[r][s])&&"="===u.charAt(1)&&(n[r][s]=a[s]+Number(u.charAt(0)+u.substr(2)));if(0>(h=n.length-2))return l[0]=new o(n[0][s],0,0,n[-1>h?0:1][s]),l;for(r=0;h>r;r++)d=n[r][s],c=n[r+1][s],l[r]=new o(d,0,0,c),i&&(m=n[r+2][s],e[r]=(e[r]||0)+(c-d)*(c-d),t[r]=(t[r]||0)+(m-c)*(m-c));return l[r]=new o(n[r][s],0,0,n[r+1][s]),l},r=function(s,o,a,r,c,u){var h,m,f,g,v,j,y,_,b={},p=[],w=u||s[0];for(m in c="string"==typeof c?","+c+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",o==null&&(o=1),s[0])p.push(m);if(s.length>1){for(_=s[s.length-1],v=!0,h=p.length;--h>-1;)if(m=p[h],Math.abs(w[m]-_[m])>.05){v=!1;break}v&&(s=s.concat(),u&&s.unshift(u),s.push(s[1]),u=s[s.length-3])}for(e.length=t.length=n.length=0,h=p.length;--h>-1;)m=p[h],i[m]=-1!==c.indexOf(","+m+","),b[m]=d(s,m,i[m],u);for(h=e.length;--h>-1;)e[h]=Math.sqrt(e[h]),t[h]=Math.sqrt(t[h]);if(!r){for(h=p.length;--h>-1;)if(i[m])for(y=(g=b[p[h]]).length-1,f=0;y>f;f++)j=g[f+1].da/t[f]+g[f].da/e[f]||0,n[f]=(n[f]||0)+j*j;for(h=n.length;--h>-1;)n[h]=Math.sqrt(n[h])}for(h=p.length,f=a?4:1;--h>-1;)g=b[m=p[h]],l(g,o,a,r,i[m]),v&&(g.splice(0,f),g.splice(g.length-f,f));return b},u=function(e,t,n){var s,i,a,r,c,l,d,h,m,f,g,v={},u="cubic"===(t=t||"soft")?3:2,b="soft"===t,p=[];if(b&&n&&(e=[n].concat(e)),e==null||e.length<u+1)throw"invalid Bezier data";for(c in e[0])p.push(c);for(f=p.length;--f>-1;){for(v[c=p[f]]=i=[],a=0,d=e.length,s=0;d>s;s++)r=n==null?e[s][c]:"string"==typeof(l=e[s][c])&&"="===l.charAt(1)?n[c]+Number(l.charAt(0)+l.substr(2)):Number(l),b&&s>1&&d-1>s&&(i[a++]=(r+i[a-2])/2),i[a++]=r;for(d=a-u+1,a=0,s=0;d>s;s+=u)r=i[s],m=i[s+1],h=i[s+2],g=2===u?0:i[s+3],i[a++]=l=3===u?new o(r,m,h,g):new o(r,(2*m+r)/3,(2*m+h)/3,h);i.length=a}return v},h=function(e,t,n){for(var s,o,i,a,r,c,d,u,h,m,f,p=1/n,l=e.length;--l>-1;)for(a=(i=e[l]).a,d=i.d-a,u=i.c-a,h=i.b-a,r=c=0,o=1;n>=o;o++)r=c-(c=((s=p*o)*s*d+3*(m=1-s)*(s*u+m*h))*s),t[f=l*n+o-1]=(t[f]||0)+r*r},m=function(e,t){var n,s,c,l,i=[],d=[],o=0,a=0,m=(t=t>>0||6)-1,u=[],r=[];for(c in e)h(e[c],i,t);for(l=i.length,n=0;l>n;n++)o+=Math.sqrt(i[n]),r[s=n%t]=o,s===m&&(a+=o,u[s=n/t>>0]=r,d[s]=a,o=0,r=[]);return{length:a,lengths:d,segments:u}},s=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.7",API:2,global:!0,init:function(e,t,n){this._target=e,t instanceof Array&&(t={values:t}),this._func={},this._mod={},this._props=[],this._timeRes=null==t.timeResolution?6:parseInt(t.timeResolution,10);var s,i,a,d,h,f,c=t.values||[],l={},p=c[0],o=t.autoRotate||n.vars.orientToBezier;for(s in this._autoRotate=o?o instanceof Array?o:[["x","y","rotation",!0===o?0:Number(o)||0]]:null,p)this._props.push(s);for(i=this._props.length;--i>-1;)s=this._props[i],this._overwriteProps.push(s),f=this._func[s]="function"==typeof e[s],l[s]=f?e[s.indexOf("set")||"function"!=typeof e["get"+s.substr(3)]?s:"get"+s.substr(3)]():parseFloat(e[s]),h||l[s]!==c[0][s]&&(h=l);if((this._beziers="cubic"!==t.type&&"quadratic"!==t.type&&"soft"!==t.type?r(c,isNaN(t.curviness)?1:t.curviness,!1,"thruBasic"===t.type,t.correlate,h):u(c,t.type,l),this._segCount=this._beziers[s].length,this._timeRes)&&(d=m(this._beziers,this._timeRes),this._length=d.length,this._lengths=d.lengths,this._segments=d.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length),o=this._autoRotate)for(this._initialRotations=[],o[0]instanceof Array||(this._autoRotate=o=[o]),i=o.length;--i>-1;){for(a=0;3>a;a++)s=o[i][a],this._func[s]="function"==typeof e[s]&&e[s.indexOf("set")||"function"!=typeof e["get"+s.substr(3)]?s:"get"+s.substr(3)];s=o[i][2],this._initialRotations[i]=(this._func[s]?this._func[s].call(this._target):this._target[s])||0,this._overwriteProps.push(s)}return this._startRatio=n.vars.runBackwards?1:0,!0},set:function(e){var t,n,s,o,i,a,r,c,u,h,m,p,g,v,b,j,_,w,l=this._segCount,y=this._func,d=this._target,O=e!==this._startRatio;if(this._timeRes){if(h=this._lengths,o=this._curSeg,e*=this._length,t=this._li,e>this._l2&&l-1>t){for(p=l-1;p>t&&(this._l2=h[++t])<=e;);this._l1=h[t-1],this._li=t,this._curSeg=o=this._segments[t],this._s2=o[this._s1=this._si=0]}else if(e<this._l1&&t>0){for(;t>0&&(this._l1=h[--t])>=e;);0===t&&e<this._l1?this._l1=0:t++,this._l2=h[t],this._li=t,this._curSeg=o=this._segments[t],this._s1=o[(this._si=o.length-1)-1]||0,this._s2=o[this._si]}if(u=t,e-=this._l1,t=this._si,e>this._s2&&t<o.length-1){for(p=o.length-1;p>t&&(this._s2=o[++t])<=e;);this._s1=o[t-1],this._si=t}else if(e<this._s1&&t>0){for(;t>0&&(this._s1=o[--t])>=e;);0===t&&e<this._s1?this._s1=0:t++,this._s2=o[t],this._si=t}s=(t+(e-this._s1)/(this._s2-this._s1))*this._prec||0}else s=(e-(u=0>e?0:e>=1?l-1:l*e>>0)*(1/l))*l;for(j=1-s,t=this._props.length;--t>-1;)i=this._props[t],r=(s*s*(n=this._beziers[i][u]).da+3*j*(s*n.ca+j*n.ba))*s+n.a,this._mod[i]&&(r=this._mod[i](r,d)),y[i]?d[i](r):d[i]=r;if(this._autoRotate){c=this._autoRotate;for(t=c.length;--t>-1;)i=c[t][2],_=c[t][3]||0,w=!0===c[t][4]?1:f,n=this._beziers[c[t][0]],a=this._beziers[c[t][1]],n&&a&&(n=n[u],a=a[u],m=n.a+(n.b-n.a)*s,m+=((v=n.b+(n.c-n.b)*s)-m)*s,v+=(n.c+(n.d-n.c)*s-v)*s,g=a.a+(a.b-a.a)*s,g+=((b=a.b+(a.c-a.b)*s)-g)*s,b+=(a.c+(a.d-a.c)*s-b)*s,r=O?Math.atan2(b-g,v-m)*w+_:this._initialRotations[t],this._mod[i]&&(r=this._mod[i](r,d)),y[i]?d[i](r):d[i]=r)}}}),c=s.prototype,s.bezierThrough=r,s.cubicToQuadratic=a,s._autoCSS=!0,s.quadraticToCubic=function(e,t,n){return new o(e,(2*t+e)/3,(2*t+n)/3,n)},s._cssRegister=function(){if(t=p.CSSPlugin,t){var t,e=t._internals,n=e._parseToProxy,o=e._setPluginRatio,i=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(e,t,a,r,c,l){t instanceof Array&&(t={values:t}),l=new s;var u,h,m,p=t.values,f=p.length-1,g=[],d={};if(0>f)return c;for(h=0;f>=h;h++)u=n(e,p[h],r,c,l,f!==h),g[h]=u.end;for(m in t)d[m]=t[m];return d.values=g,(c=new i(e,"bezier",0,0,u.pt,2)).data=u,c.plugin=l,c.setRatio=o,0===d.autoRotate&&(d.autoRotate=!0),!d.autoRotate||d.autoRotate instanceof Array||(h=!0===d.autoRotate?0:Number(d.autoRotate),d.autoRotate=null!=u.end.left?[["left","top","rotation",h,!1]]:null!=u.end.x&&[["x","y","rotation",h,!1]]),d.autoRotate&&(r._transform||r._enableTransforms(!1),u.autoRotate=r._target._gsTransform,u.proxy.rotation=u.autoRotate.rotation||0,r._overwriteProps.push("rotation")),l._onInitTween(u.proxy,d,r._tween),c}})}},c._mod=function(e){for(var t,n=this._overwriteProps,s=n.length;--s>-1;)(t=e[n[s]])&&"function"==typeof t&&(this._mod[n[s]]=t)},c._kill=function(e){var t,s,n=this._props;for(s in this._beziers)if(s in e)for(delete this._beziers[s],delete this._func[s],t=n.length;--t>-1;)n[t]===s&&n.splice(t,1);if(n=this._autoRotate)for(t=n.length;--t>-1;)e[n[t][2]]&&n.splice(t,1);return this._super._kill.call(this,e)},_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(e,t){var a,I,$,oe,s=function(){e.call(this,"css"),this._overwriteProps.length=0,this.setRatio=s.prototype.setRatio},Be=_gsScope._gsDefine.globals,f={},n=s.prototype=new e("css");n.constructor=s,s.version="1.19.1",s.API=2,s.defaultTransformPerspective=0,s.defaultSkewType="compensated",s.defaultSmoothOrigin=!0,n="px",s.suffixMap={top:n,right:n,bottom:n,left:n,width:n,height:n,fontSize:n,padding:n,margin:n,perspective:n,lineHeight:""};var w,E,A,M,V,ie,we,ce,ne,be,T=/(?:-|\.|\b)(\d|\.|e-)+/g,J=/(?:\d|-\d|\.\d|-\.\d|\+=\d|-=\d|\+=.\d|-=\.\d)+/g,ae=/(?:\+=|-=|-|\b)[\d\-.]+[a-zA-Z0-9]*(?:%|\b)/gi,Z=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,L=/(?:\d|-|\+|=|#|\.)*/g,re=/opacity *= *([^)]*)/i,Re=/opacity:([^;]*)/i,Xe=/alpha\(opacity *=.+?\)/i,Ke=/^(rgb|hsl)/,Ce=/([A-Z])/g,fe=/-([a-z])/gi,Pe=/(^(?:url\("|url\())|(?:("\))$|\)$)/gi,_e=function(e,t){return t.toUpperCase()},Ge=/(?:Left|Right|Width)/i,Ye=/(M11|M12|M21|M22)=[\d\-.e]+/gi,qe=/progid:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,b=/,(?=[^)]*(?:\(|$))/gi,He=/[\s,(]/i,h=Math.PI/180,k=180/Math.PI,q={},Ne={style:{}},m=_gsScope.document||{createElement:function(){return Ne}},W=function(e,t){return m.createElementNS?m.createElementNS(t||"http://www.w3.org/1999/xhtml",e):m.createElement(e)},y=W("div"),me=W("img"),v=s._internals={_specialProps:f},j=(_gsScope.navigator||{}).userAgent||"",C=function(){var t=j.indexOf("Android"),e=W("a");return ce=-1!==j.indexOf("Safari")&&-1===j.indexOf("Chrome")&&(-1===t||parseFloat(j.substr(t+8,2))>3),be=ce&&parseFloat(j.substr(j.indexOf("Version/")+8,2))<6,ne=-1!==j.indexOf("Firefox"),(/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(j)||/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(j))&&(M=parseFloat(RegExp.$1)),!!e&&(e.style.cssText="top:1px;opacity:.55;",/^0.55/.test(e.style.opacity))}(),Ee=function(e){return re.test("string"==typeof e?e:(e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100:1},Ae=function(e){_gsScope.console&&console.log(e)},Se="",Fe="",B=function(e,t){var n,s,o=(t=t||y).style;if(void 0!==o[e])return e;for(e=e.charAt(0).toUpperCase()+e.substr(1),s=["O","Moz","ms","Ms","Webkit"],n=5;--n>-1&&void 0===o[s[n]+e];);return n>=0?(Se="-"+(Fe=3===n?"ms":s[n]).toLowerCase()+"-",Fe+e):null},O=m.defaultView?m.defaultView.getComputedStyle:function(){},o=s.getStyle=function(e,t,n,s,o){var i;return C||"opacity"!==t?(!s&&e.style[t]?i=e.style[t]:(n=n||O(e))?i=n[t]||n.getPropertyValue(t)||n.getPropertyValue(t.replace(Ce,"-$1").toLowerCase()):e.currentStyle&&(i=e.currentStyle[t]),o==null||i&&"none"!==i&&"auto"!==i&&"auto auto"!==i?i:o):Ee(e)},p=v.convertToPixels=function(e,n,i,a,r){if("px"===a||!a)return i;if("auto"===a||!i)return 0;var c,l,h,d=Ge.test(n),u=e,f=y.style,g=0>i,v=1===i;if(g&&(i=-i),v&&(i*=100),"%"===a&&-1!==n.indexOf("border"))c=i/100*(d?e.clientWidth:e.clientHeight);else{if(f.cssText="border:0 solid red;position:"+o(e,"position")+";line-height:0;","%"!==a&&u.appendChild&&"v"!==a.charAt(0)&&"rem"!==a)f[d?"borderLeftWidth":"borderTopWidth"]=i+a;else{if(l=(u=e.parentNode||m.body)._gsCache,h=t.ticker.frame,l&&d&&l.time===h)return l.width*i/100;f[d?"width":"height"]=i+a}u.appendChild(y),c=parseFloat(y[d?"offsetWidth":"offsetHeight"]),u.removeChild(y),d&&"%"===a&&!1!==s.cacheWidths&&((l=u._gsCache=u._gsCache||{}).time=h,l.width=c/i*100),0!==c||r||(c=p(e,n,i,a,!0))}return v&&(c/=100),g?-c:c},Te=v.calculateOffset=function(e,t,n){if("absolute"!==o(e,"position",n))return 0;var s="left"===t?"Left":"Top",i=o(e,"margin"+s,n);return e["offset"+s]-(p(e,t,parseFloat(i),i.replace(L,""))||0)},N=function(e,t){var s,o,i,n={};if(t=t||O(e,null))if(s=t.length)for(;--s>-1;)(-1===(i=t[s]).indexOf("-transform")||Y===i)&&(n[i.replace(fe,_e)]=t.getPropertyValue(i));else for(s in t)(-1===s.indexOf("Transform")||l===s)&&(n[s]=t[s]);else if(t=e.currentStyle||e.style)for(s in t)"string"==typeof s&&void 0===n[s]&&(n[s.replace(fe,_e)]=t[s]);return C||(n.opacity=Ee(e)),o=H(e,t,!1),n.rotation=o.rotation,n.skewX=o.skewX,n.scaleX=o.scaleX,n.scaleY=o.scaleY,n.x=o.x,n.y=o.y,g&&(n.z=o.z,n.rotationX=o.rotationX,n.rotationY=o.rotationY,n.scaleZ=o.scaleZ),n.filters&&delete n.filters,n},G=function(e,t,n,s,o){var i,a,r,c={},l=e.style;for(i in n)"cssText"!==i&&"length"!==i&&isNaN(i)&&(t[i]!==(a=n[i])||o&&o[i])&&-1===i.indexOf("Origin")&&("number"==typeof a||"string"==typeof a)&&(c[i]="auto"!==a||"left"!==i&&"top"!==i?""!==a&&"auto"!==a&&"none"!==a||"string"!=typeof t[i]||""===t[i].replace(Z,"")?a:0:Te(e,i),void 0!==l[i]&&(r=new le(l,i,l[i],r)));if(s)for(i in s)"className"!==i&&(c[i]=s[i]);return{difs:c,firstMPT:r}},Ie={width:["Left","Right"],height:["Top","Bottom"]},ze=["marginLeft","marginRight","marginTop","marginBottom"],Ue=function(e,t,n){if("svg"===(e.nodeName+"").toLowerCase())return(n||O(e))[t]||0;if(e.getCTM&&se(e))return e.getBBox()[t]||0;var s=parseFloat("width"===t?e.offsetWidth:e.offsetHeight),i=Ie[t],a=i.length;for(n=n||O(e,null);--a>-1;)s-=parseFloat(o(e,"padding"+i[a],n,!0))||0,s-=parseFloat(o(e,"border"+i[a]+"Width",n,!0))||0;return s},x=function(e,t){if("contain"===e||"auto"===e||"auto auto"===e)return e+" ";(e==null||""===e)&&(e="0 0");var i,s=e.split(" "),n=-1!==e.indexOf("left")?"0%":-1!==e.indexOf("right")?"100%":s[0],o=-1!==e.indexOf("top")?"0%":-1!==e.indexOf("bottom")?"100%":s[1];if(s.length>3&&!t){for(s=e.split(", ").join(",").split(","),e=[],i=0;i<s.length;i++)e.push(x(s[i]));return e.join(",")}return o==null?o="center"===n?"50%":"0":"center"===o&&(o="50%"),("center"===n||isNaN(parseFloat(n))&&-1===(n+"").indexOf("="))&&(n="50%"),e=n+" "+o+(s.length>2?" "+s[2]:""),t&&(t.oxp=-1!==n.indexOf("%"),t.oyp=-1!==o.indexOf("%"),t.oxr="="===n.charAt(1),t.oyr="="===o.charAt(1),t.ox=parseFloat(n.replace(Z,"")),t.oy=parseFloat(o.replace(Z,"")),t.v=e),t||e},z=function(e,t){return"function"==typeof e&&(e=e(w,E)),"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(t)||0},d=function(e,t){return"function"==typeof e&&(e=e(w,E)),e==null?t:"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2))+t:parseFloat(e)||0},F=function(e,t,n,s){var o,i,a,r,c,l=1e-6;return"function"==typeof e&&(e=e(w,E)),e==null?a=t:"number"==typeof e?a=e:(i=360,r=e.split("_"),o=((c="="===e.charAt(1))?parseInt(e.charAt(0)+"1",10)*parseFloat(r[0].substr(2)):parseFloat(r[0]))*(-1===e.indexOf("rad")?1:k)-(c?0:t),r.length&&(s&&(s[n]=t+o),-1!==e.indexOf("short")&&(o%=i)!==o%180&&(o=0>o?o+i:o-i),-1!==e.indexOf("_cw")&&0>o?o=(o+9999999999*i)%i-(o/i|0)*i:-1!==e.indexOf("ccw")&&o>0&&(o=(o-9999999999*i)%i-(o/i|0)*i)),a=t+o),l>a&&a>-l&&(a=0),a},D={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},he=function(e,t,n){return 255*(1>6*(e=0>e?e+1:e>1?e-1:e)?t+(n-t)*e*6:.5>e?n:2>3*e?t+(n-t)*(2/3-e)*6:t)+.5|0},U=s.parseColor=function(e,t){var n,s,o,i,a,r,c,l,d,u,h;if(e)if("number"==typeof e)n=[e>>16,e>>8&255,255&e];else{if(","===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),D[e])n=D[e];else if("#"===e.charAt(0))4===e.length&&(o=e.charAt(1),s=e.charAt(2),i=e.charAt(3),e="#"+o+o+s+s+i+i),n=[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e];else if("hsl"===e.substr(0,3))if(n=h=e.match(T),t){if(-1!==e.indexOf("="))return e.match(J)}else a=Number(n[0])%360/360,c=Number(n[1])/100,o=2*(r=Number(n[2])/100)-(s=.5>=r?r*(c+1):r+c-r*c),n.length>3&&(n[3]=Number(e[3])),n[0]=he(a+1/3,o,s),n[1]=he(a,o,s),n[2]=he(a-1/3,o,s);else n=e.match(T)||D.transparent;n[0]=Number(n[0]),n[1]=Number(n[1]),n[2]=Number(n[2]),n.length>3&&(n[3]=Number(n[3]))}else n=D.black;return t&&!h&&(o=n[0]/255,s=n[1]/255,i=n[2]/255,r=((l=Math.max(o,s,i))+(u=Math.min(o,s,i)))/2,l===u?a=c=0:(d=l-u,c=r>.5?d/(2-l-u):d/(l+u),a=l===o?(s-i)/d+(i>s?6:0):l===s?(i-o)/d+2:(o-s)/d+4,a*=60),n[0]=a+.5|0,n[1]=100*c+.5|0,n[2]=100*r+.5|0),n},xe=function(e,t){var n,o,a,i=e.match(u)||[],s=0,r=i.length?"":e;for(o=0;o<i.length;o++)n=i[o],s+=(a=e.substr(s,e.indexOf(n,s)-s)).length+n.length,3===(n=U(n,t)).length&&n.push(1),r+=a+(t?"hsla("+n[0]+","+n[1]+"%,"+n[2]+"%,"+n[3]:"rgba("+n.join(","))+")";return r+e.substr(s)},u="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b",ye,je,ve,ge;for(n in D)u+="|"+n+"\\b";u=new RegExp(u+")","gi"),s.colorStringFilter=function(e){var t,n=e[0]+e[1];u.test(n)&&(t=-1!==n.indexOf("hsl(")||-1!==n.indexOf("hsla("),e[0]=xe(e[0],t),e[1]=xe(e[1],t)),u.lastIndex=0},t.defaultStringFilter||(t.defaultStringFilter=s.colorStringFilter);var ue=function(e,t,n,s){if(e==null)return function(e){return e};var a,c=t?(e.match(u)||[""])[0]:"",i=e.split(c).join("").match(ae)||[],l=e.substr(0,e.indexOf(i[0])),d=")"===e.charAt(e.length-1)?")":"",r=-1!==e.indexOf(" ")?" ":",",o=i.length,h=o>0?i[0].replace(T,""):"";return o?a=t?function(e){if("number"==typeof e)e+=h;else if(s&&b.test(e)){for(m=e.replace(b,"|").split("|"),t=0;t<m.length;t++)m[t]=a(m[t]);return m.join(",")}if(p=(e.match(u)||[c])[0],t=(f=e.split(p).join("").match(ae)||[]).length,o>t--)for(var t,m,f,p;++t<o;)f[t]=n?f[(t-1)/2|0]:i[t];return l+f.join(r)+r+p+d+(-1!==e.indexOf("inset")?" inset":"")}:function(e){if("number"==typeof e)e+=h;else if(s&&b.test(e)){for(c=e.replace(b,"|").split("|"),t=0;t<c.length;t++)c[t]=a(c[t]);return c.join(",")}if(t=(u=e.match(ae)||[]).length,o>t--)for(var t,c,u;++t<o;)u[t]=n?u[(t-1)/2|0]:i[t];return l+u.join(r)+d}:function(e){return e}},de=function(e){return e=e.split(","),function(t,n,s,o,i,a,r){var c,l=(n+"").split(" ");for(r={},c=0;4>c;c++)r[e[c]]=l[c]=l[c]||l[(c-1)/2>>0];return o.parse(t,r,i,a)}},le=(v._setPluginRatio=function(e){this.plugin.setRatio(e);for(var t,s,i,a,r,o=this.data,c=o.proxy,n=o.firstMPT,l=1e-6;n;)s=c[n.v],n.r?s=Math.round(s):l>s&&s>-l&&(s=0),n.t[n.p]=s,n=n._next;if(o.autoRotate&&(o.autoRotate.rotation=o.mod?o.mod(c.rotation,this.t):c.rotation),1===e||0===e)for(n=o.firstMPT,r=1===e?"e":"b";n;){if((t=n.t).type){if(1===t.type){for(a=t.xs0+t.s+t.xs1,i=1;i<t.l;i++)a+=t["xn"+i]+t["xs"+(i+1)];t[r]=a}}else t[r]=t.s+t.xs0;n=n._next}},function(e,t,n,s,o){this.t=e,this.p=t,this.v=n,this.r=o,s&&(s._prev=this,this._next=s)}),r=(v._parseToProxy=function(e,t,n,s,o,i){var a,r,c,d,m,l=s,u={},h={},f=n._transform,p=q;for(n._transform=null,q=t,s=m=n.parse(e,t,s,o),q=p,i&&(n._transform=f,l&&(l._prev=null,l._prev&&(l._prev._next=null)));s&&s!==l;){if(s.type<=1&&(h[a=s.p]=s.s+s.c,u[a]=s.s,i||(c=new le(s,"s",a,c,s.r),s.c=0),1===s.type))for(d=s.l;--d>0;)r="xn"+d,h[a=s.p+"_"+r]=s.data[r],u[a]=s[r],i||(c=new le(s,r,a,c,s.rxp[r]));s=s._next}return{proxy:u,end:h,firstMPT:c,pt:m}},v.CSSPropTween=function(e,t,n,s,o,i,a,c,l,d,u){this.t=e,this.p=t,this.s=n,this.c=s,this.n=a||t,e instanceof r||oe.push(this.n),this.r=c,this.type=i||0,l&&(this.pr=l,I=!0),this.b=void 0===d?n:d,this.e=void 0===u?n+s:u,o&&(this._next=o,o._prev=this)}),K=function(e,t,n,s,o,i){var a=new r(e,t,n,s-n,o,-1,i);return a.b=n,a.e=a.xs0=s,a},R=s.parseComplex=function(e,t,n,o,i,a,c,l,d,h){n=n||a||"","function"==typeof o&&(o=o(w,E)),c=new r(e,t,0,0,c,h?2:1,null,!1,l,n,o),o+="",i&&u.test(o+n)&&(o=[n,o],s.colorStringFilter(o),n=o[0],o=o[1]);var m,f,p,g,v,j,y,_,k,A,S,M,D,O=n.split(", ").join(",").split(" "),x=o.split(", ").join(",").split(" "),F=O.length,N=!1!==ie;for((-1!==o.indexOf(",")||-1!==n.indexOf(","))&&(O=O.join(" ").replace(b,", ").split(" "),x=x.join(" ").replace(b,", ").split(" "),F=O.length),F!==x.length&&(F=(O=(a||"").split(" ")).length),c.plugin=d,c.setRatio=h,u.lastIndex=0,p=0;F>p;p++)if(m=O[p],f=x[p],(A=parseFloat(m))||0===A)c.appendXtra("",A,z(f,A),f.replace(J,""),N&&-1!==f.indexOf("px"),!0);else if(i&&u.test(m))g=")"+((g=f.indexOf(")")+1)?f.substr(g):""),M=-1!==f.indexOf("hsl")&&C,m=U(m,M),f=U(f,M),(v=m.length+f.length>6)&&!C&&0===f[3]?(c["xs"+c.l]+=c.l?" transparent":"transparent",c.e=c.e.split(x[p]).join("transparent")):(C||(v=!1),M?c.appendXtra(v?"hsla(":"hsl(",m[0],z(f[0],m[0]),",",!1,!0).appendXtra("",m[1],z(f[1],m[1]),"%,",!1).appendXtra("",m[2],z(f[2],m[2]),v?"%,":"%"+g,!1):c.appendXtra(v?"rgba(":"rgb(",m[0],f[0]-m[0],",",!0,!0).appendXtra("",m[1],f[1]-m[1],",",!0).appendXtra("",m[2],f[2]-m[2],v?",":g,!0),v&&(m=m.length<4?1:m[3],c.appendXtra("",m,(f.length<4?1:f[3])-m,g,!1))),u.lastIndex=0;else if(k=m.match(T)){if(!(D=f.match(J))||D.length!==k.length)return c;for(j=0,_=0;_<k.length;_++)y=k[_],S=m.indexOf(y,j),c.appendXtra(m.substr(j,S-j),Number(y),z(D[_],y),"",N&&"px"===m.substr(S+y.length,2),0===_),j=S+y.length;c["xs"+c.l]+=m.substr(j)}else c["xs"+c.l]+=c.l||c["xs"+c.l]?" "+f:f;if(-1!==o.indexOf("=")&&c.data){for(g=c.xs0+c.data.s,p=1;p<c.l;p++)g+=c["xs"+p]+c.data["xn"+p];c.e=g+c["xs"+p]}return c.l||(c.type=-1,c.xs0=c.e),c.xfirst||c},c=9;for((n=r.prototype).l=n.pr=0;--c>0;)n["xn"+c]=0,n["xs"+c]="";n.xs0="",n._next=n._prev=n.xfirst=n.data=n.plugin=n.setRatio=n.rxp=null,n.appendXtra=function(e,t,n,s,o,i){var a=this,c=a.l;return a["xs"+c]+=i&&(c||a["xs"+c])?" "+e:e||"",n||0===c||a.plugin?(a.l++,a.type=a.setRatio?2:1,a["xs"+a.l]=s||"",c>0?(a.data["xn"+c]=t+n,a.rxp["xn"+c]=o,a["xn"+c]=t,a.plugin||(a.xfirst=new r(a,"xn"+c,t,n,a.xfirst||a,0,a.n,o,a.pr),a.xfirst.xs0=0),a):(a.data={s:t+n},a.rxp={},a.s=t,a.c=n,a.r=o,a)):(a["xs"+c]+=t+(s||""),a)};var pe=function(e,t){t=t||{},this.p=t.prefix&&B(e)||e,f[e]=f[this.p]=this,this.format=t.formatter||ue(t.defaultValue,t.color,t.collapsible,t.multi),t.parser&&(this.parse=t.parser),this.clrs=t.color,this.multi=t.multi,this.keyword=t.keyword,this.dflt=t.defaultValue,this.pr=t.priority||0},i=v._registerComplexSpecialProp=function(e,t,n){"object"!=typeof t&&(t={parser:n});var s,o=e.split(","),i=t.defaultValue;for(n=n||[i],s=0;s<o.length;s++)t.prefix=0===s&&t.prefix,t.defaultValue=n[s]||i,new pe(o[s],t)},Ve=v._registerPluginProp=function(e){if(!f[e]){var t=e.charAt(0).toUpperCase()+e.substr(1)+"Plugin";i(e,{parser:function(e,n,s,o,i,a,r){var c=Be.com.greensock.plugins[t];return c?(c._cssRegister(),f[s].parse(e,n,s,o,i,a,r)):(Ae("Error: "+t+" js file not loaded."),i)}})}};(n=pe.prototype).parseComplex=function(e,t,n,s,o,i){var a,r,c,d,u,h,l=this.keyword;if(this.multi&&(b.test(n)||b.test(t)?(r=t.replace(b,"|").split("|"),c=n.replace(b,"|").split("|")):l&&(r=[t],c=[n])),c){for(d=c.length>r.length?c.length:r.length,a=0;d>a;a++)t=r[a]=r[a]||this.dflt,n=c[a]=c[a]||this.dflt,l&&(u=t.indexOf(l))!==(h=n.indexOf(l))&&(-1===h?r[a]=r[a].split(l).join(""):-1===u&&(r[a]+=" "+l));t=r.join(", "),n=c.join(", ")}return R(e,this.p,t,n,this.clrs,this.dflt,s,this.pr,o,i)},n.parse=function(e,t,n,s,i,r){return this.parseComplex(e.style,this.format(o(e,this.p,a,!1,this.dflt)),this.format(t),i,r)},s.registerSpecialProp=function(e,t,n){i(e,{parser:function(e,s,o,i,a,c){var d=new r(e,o,0,0,a,2,o,!1,n);return d.plugin=c,d.setRatio=t(e,s,i._tween,o),d},priority:n})},s.useSVGTransformAttr=!0;var _,ke="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),l=B("transform"),Y=Se+"transform",P=B("transformOrigin"),g=null!==B("perspective"),te=v.Transform=function(){this.perspective=parseFloat(s.defaultTransformPerspective)||0,this.force3D=!1!==s.defaultForce3D&&!!g&&(s.defaultForce3D||"auto")},De=_gsScope.SVGElement,Oe=function(e,t,n){var s,o=m.createElementNS("http://www.w3.org/2000/svg",e),i=/([a-z])([A-Z])/g;for(s in n)o.setAttributeNS(null,s.replace(i,"$1-$2").toLowerCase(),n[s]);return t.appendChild(o),o},S=m.documentElement||{},Le=function(){var e,t,s,n=M||/Android/i.test(j)&&!_gsScope.chrome;return m.createElementNS&&!n&&(t=Oe("svg",S),s=(e=Oe("rect",t,{width:100,height:50,x:100})).getBoundingClientRect().width,e.style[P]="50% 50%",e.style[l]="scaleX(0.5)",n=s===e.getBoundingClientRect().width&&!(ne&&g),S.removeChild(t)),n}(),X=function(e,t,n,o,i,a){var r,d,u,h,m,f,p,g,v,b,j,y,_,w,l=e._gsTransform,c=ee(e,!0);l&&(_=l.xOrigin,w=l.yOrigin),(!o||(u=o.split(" ")).length<2)&&(0===(r=e.getBBox()).x&&0===r.y&&r.width+r.height===0&&(r={x:parseFloat(e.hasAttribute("x")?e.getAttribute("x"):e.hasAttribute("cx")?e.getAttribute("cx"):0)||0,y:parseFloat(e.hasAttribute("y")?e.getAttribute("y"):e.hasAttribute("cy")?e.getAttribute("cy"):0)||0,width:0,height:0}),u=[(-1!==(t=x(t).split(" "))[0].indexOf("%")?parseFloat(t[0])/100*r.width:parseFloat(t[0]))+r.x,(-1!==t[1].indexOf("%")?parseFloat(t[1])/100*r.height:parseFloat(t[1]))+r.y]),n.xOrigin=f=parseFloat(u[0]),n.yOrigin=p=parseFloat(u[1]),o&&c!==Q&&(b=c[0],r=c[1],v=c[2],g=c[3],y=c[4],j=c[5],(d=b*g-r*v)&&(h=f*(g/d)+p*(-v/d)+(v*j-g*y)/d,m=f*(-r/d)+p*(b/d)-(b*j-r*y)/d,f=n.xOrigin=u[0]=h,p=n.yOrigin=u[1]=m)),l&&(a&&(n.xOffset=l.xOffset,n.yOffset=l.yOffset,l=n),i||!1!==i&&!1!==s.defaultSmoothOrigin?(h=f-_,m=p-w,l.xOffset+=h*c[0]+m*c[2]-h,l.yOffset+=h*c[1]+m*c[3]-m):l.xOffset=l.yOffset=0),a||e.setAttribute("data-svg-origin",u.join(" "))},Me=function(e){var t,n=W("svg",this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),s=this.parentNode,o=this.nextSibling,i=this.style.cssText;if(S.appendChild(n),n.appendChild(this),this.style.display="block",e)try{t=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=Me}catch{}else this._originalGetBBox&&(t=this._originalGetBBox());return o?s.insertBefore(this,o):s.appendChild(this),S.removeChild(n),this.style.cssText=i,t},se=function(e){return!(!(De&&e.getCTM&&function(e){try{return e.getBBox()}catch{return Me.call(e,!0)}}(e))||e.parentNode&&!e.ownerSVGElement)},Q=[1,0,0,1,0,0],ee=function(e,t){var n,s,i,a,d,u,h=e._gsTransform||new te,m=1e5,r=e.style;if(l?n=o(e,Y,null,!0):e.currentStyle&&(n=(n=e.currentStyle.filter.match(Ye))&&4===n.length?[n[0].substr(4),Number(n[2].substr(4)),Number(n[1].substr(4)),n[3].substr(4),h.x||0,h.y||0].join(","):""),(i=!n||"none"===n||"matrix(1, 0, 0, 1, 0, 0)"===n)&&l&&((u="none"===O(e).display)||!e.parentNode)&&(u&&(a=r.display,r.display="block"),e.parentNode||(d=1,S.appendChild(e)),i=!(n=o(e,Y,null,!0))||"none"===n||"matrix(1, 0, 0, 1, 0, 0)"===n,a?r.display=a:u&&A(r,"display"),d&&S.removeChild(e)),(h.svg||e.getCTM&&se(e))&&(i&&-1!==(r[l]+"").indexOf("matrix")&&(n=r[l],i=0),s=e.getAttribute("transform"),i&&s&&(-1!==s.indexOf("matrix")?(n=s,i=0):-1!==s.indexOf("translate")&&(n="matrix(1,0,0,1,"+s.match(/(?:-|\b)[\d\-.e]+\b/gi).join(",")+")",i=0))),i)return Q;for(s=(n||"").match(T)||[],c=s.length;--c>-1;)a=Number(s[c]),s[c]=(d=a-(a|=0))?(d*m+(0>d?-.5:.5)|0)/m+a:a;return t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s},H=v.getTransform=function(e,n,i,a){if(e._gsTransform&&i&&!a)return e._gsTransform;var c,w,E,L,H,B,r=i&&e._gsTransform||new te,V=r.scaleX<0,K=2e-5,C=1e5,Z=g&&(parseFloat(o(e,P,n,!1,"0 0 0").split(" ")[2])||r.zOrigin)||0,G=parseFloat(s.defaultTransformPerspective)||0;if(r.svg=!!e.getCTM&&!!se(e),r.svg&&(X(e,o(e,P,n,!1,"50% 50%")+"",r,e.getAttribute("data-svg-origin")),_=s.useSVGTransformAttr||Le),(c=ee(e))!==Q){if(16===c.length){var d,u,x,R,I,y=c[0],p=c[1],F=c[2],Y=c[3],O=c[4],f=c[5],j=c[6],q=c[7],D=c[8],v=c[9],m=c[10],W=c[12],$=c[13],M=c[14],b=c[11],h=Math.atan2(j,m);r.zOrigin&&(W=D*(M=-r.zOrigin)-c[12],$=v*M-c[13],M=m*M+r.zOrigin-c[14]),r.rotationX=h*k,h&&(I=O*(d=Math.cos(-h))+D*(u=Math.sin(-h)),x=f*d+v*u,R=j*d+m*u,D=O*-u+D*d,v=f*-u+v*d,m=j*-u+m*d,b=q*-u+b*d,O=I,f=x,j=R),h=Math.atan2(-F,m),r.rotationY=h*k,h&&(x=p*(d=Math.cos(-h))-v*(u=Math.sin(-h)),R=F*d-m*u,v=p*u+v*d,m=F*u+m*d,b=Y*u+b*d,y=I=y*d-D*u,p=x,F=R),h=Math.atan2(p,y),r.rotation=h*k,h&&(y=y*(d=Math.cos(-h))+O*(u=Math.sin(-h)),x=p*d+f*u,f=p*-u+f*d,j=F*-u+j*d,p=x),r.rotationX&&Math.abs(r.rotationX)+Math.abs(r.rotation)>359.9&&(r.rotationX=r.rotation=0,r.rotationY=180-r.rotationY),r.scaleX=(Math.sqrt(y*y+p*p)*C+.5|0)/C,r.scaleY=(Math.sqrt(f*f+v*v)*C+.5|0)/C,r.scaleZ=(Math.sqrt(j*j+m*m)*C+.5|0)/C,r.rotationX||r.rotationY?r.skewX=0:(r.skewX=O||f?Math.atan2(O,f)*k+r.rotation:r.skewX||0,Math.abs(r.skewX)>90&&Math.abs(r.skewX)<270&&(V?(r.scaleX*=-1,r.skewX+=r.rotation<=0?180:-180,r.rotation+=r.rotation<=0?180:-180):(r.scaleY*=-1,r.skewX+=r.skewX<=0?180:-180))),r.perspective=b?1/(0>b?-b:b):0,r.x=W,r.y=$,r.z=M,r.svg&&(r.x-=r.xOrigin-(r.xOrigin*y-r.yOrigin*O),r.y-=r.yOrigin-(r.yOrigin*p-r.xOrigin*f))}else if(!g||a||!c.length||r.x!==c[4]||r.y!==c[5]||!r.rotationX&&!r.rotationY){var U=c.length>=6,T=U?c[0]:1,S=c[1]||0,N=c[2]||0,z=U?c[3]:1;r.x=c[4]||0,r.y=c[5]||0,B=Math.sqrt(T*T+S*S),H=Math.sqrt(z*z+N*N),E=T||S?Math.atan2(S,T)*k:r.rotation||0,w=N||z?Math.atan2(N,z)*k+E:r.skewX||0,Math.abs(w)>90&&Math.abs(w)<270&&(V?(B*=-1,w+=0>=E?180:-180,E+=0>=E?180:-180):(H*=-1,w+=0>=w?180:-180)),r.scaleX=B,r.scaleY=H,r.rotation=E,r.skewX=w,g&&(r.rotationX=r.rotationY=r.z=0,r.perspective=G,r.scaleZ=1),r.svg&&(r.x-=r.xOrigin-(r.xOrigin*T+r.yOrigin*N),r.y-=r.yOrigin-(r.xOrigin*S+r.yOrigin*z))}for(L in r.zOrigin=Z,r)r[L]<K&&r[L]>-K&&(r[L]=0)}return i&&(e._gsTransform=r,r.svg&&(_&&e.style[l]?t.delayedCall(.001,function(){A(e.style,l)}):!_&&e.getAttribute("transform")&&t.delayedCall(.001,function(){e.removeAttribute("transform")}))),r},$e=function(e){var u,f,j,y,E,k,t=this.data,w=-t.rotation*h,C=w+t.skewX*h,a=1e5,r=(Math.cos(w)*t.scaleX*a|0)/a,n=(Math.sin(w)*t.scaleX*a|0)/a,s=(Math.sin(C)*-t.scaleY*a|0)/a,d=(Math.cos(C)*t.scaleY*a|0)/a,g=this.t.style,b=this.t.currentStyle;if(b){j=n,n=-s,s=-j,u=b.filter,g.filter="";var o,i,l=this.t.offsetWidth,m=this.t.offsetHeight,_="absolute"!==b.position,v="progid:DXImageTransform.Microsoft.Matrix(M11="+r+", M12="+n+", M21="+s+", M22="+d,O=t.x+l*t.xPercent/100,x=t.y+m*t.yPercent/100;if(null!=t.ox&&(O+=(i=(t.oxp?l*t.ox*.01:t.ox)-l/2)-(i*r+(o=(t.oyp?m*t.oy*.01:t.oy)-m/2)*n),x+=o-(i*s+o*d)),_?v+=", Dx="+((i=l/2)-(i*r+(o=m/2)*n)+O)+", Dy="+(o-(i*s+o*d)+x)+")":v+=", sizingMethod='auto expand')",-1!==u.indexOf("DXImageTransform.Microsoft.Matrix(")?g.filter=u.replace(qe,v):g.filter=v+" "+u,(0===e||1===e)&&1===r&&0===n&&0===s&&1===d&&(_&&-1===v.indexOf("Dx=0, Dy=0")||re.test(u)&&100!==parseFloat(RegExp.$1)||-1===u.indexOf(u.indexOf("Alpha"))&&g.removeAttribute("filter")),!_){k=8>M?1:-1;for(i=t.ieOffsetX||0,o=t.ieOffsetY||0,t.ieOffsetX=Math.round((l-((0>r?-r:r)*l+(0>n?-n:n)*m))/2+O),t.ieOffsetY=Math.round((m-((0>d?-d:d)*m+(0>s?-s:s)*l))/2+x),c=0;4>c;c++)E=(j=-1!==(y=b[f=ze[c]]).indexOf("px")?parseFloat(y):p(this.t,f,parseFloat(y),y.replace(L,""))||0)!==t[f]?2>c?-t.ieOffsetX:-t.ieOffsetY:2>c?i-t.ieOffsetX:o-t.ieOffsetY,g[f]=(t[f]=Math.round(j-E*(0===c||2===c?1:k)))+"px"}}},We=v.set3DTransformRatio=v.setTransformRatio=function(e){var n,s,i,a,r,c,m,f,p,v,y,O,x,C,E,k,F,D,N,L,R,P,$,t=this.data,B=this.t.style,o=t.rotation,I=t.rotationX,H=t.rotationY,j=t.scaleX,b=t.scaleY,w=t.scaleZ,d=t.x,u=t.y,M=t.z,T=t.svg,S=t.perspective,V=t.force3D,A=t.skewY,z=t.skewX;if(A&&(z+=A,o+=A),!((1!==e&&0!==e||"auto"!==V||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&V||M||S||H||I||1!==w)||_&&T||!g)o||z||T?(o*=h,P=z*h,k=1e5,v=Math.cos(o)*j,m=Math.sin(o)*j,p=Math.sin(o-P)*-b,c=Math.cos(o-P)*b,P&&"simple"===t.skewType&&(s=Math.tan(P-A*h),p*=s=Math.sqrt(1+s*s),c*=s,A&&(s=Math.tan(A*h),v*=s=Math.sqrt(1+s*s),m*=s)),T&&(d+=t.xOrigin-(t.xOrigin*v+t.yOrigin*p)+t.xOffset,u+=t.yOrigin-(t.xOrigin*m+t.yOrigin*c)+t.yOffset,_&&(t.xPercent||t.yPercent)&&(n=this.t.getBBox(),d+=.01*t.xPercent*n.width,u+=.01*t.yPercent*n.height),(n=1e-6)>d&&d>-n&&(d=0),n>u&&u>-n&&(u=0)),y=(v*k|0)/k+","+(m*k|0)/k+","+(p*k|0)/k+","+(c*k|0)/k+","+d+","+u+")",T&&_?this.t.setAttribute("transform","matrix("+y):B[l]=(t.xPercent||t.yPercent?"translate("+t.xPercent+"%,"+t.yPercent+"%) matrix(":"matrix(")+y):B[l]=(t.xPercent||t.yPercent?"translate("+t.xPercent+"%,"+t.yPercent+"%) matrix(":"matrix(")+j+",0,0,"+b+","+d+","+u+")";else{if(ne&&((n=1e-4)>j&&j>-n&&(j=w=2e-5),n>b&&b>-n&&(b=w=2e-5),!S||t.z||t.rotationX||t.rotationY||(S=0)),o||z)o*=h,a=v=Math.cos(o),f=m=Math.sin(o),z&&(o-=z*h,a=Math.cos(o),f=Math.sin(o),"simple"===t.skewType&&(s=Math.tan((z-A)*h),a*=s=Math.sqrt(1+s*s),f*=s,t.skewY&&(s=Math.tan(A*h),v*=s=Math.sqrt(1+s*s),m*=s))),p=-f,c=a;else{if(!(H||I||1!==w||S||T))return void(B[l]=(t.xPercent||t.yPercent?"translate("+t.xPercent+"%,"+t.yPercent+"%) translate3d(":"translate3d(")+d+"px,"+u+"px,"+M+"px)"+(1!==j||1!==b?" scale("+j+","+b+")":""));v=c=1,p=m=0}C=1,x=O=R=L=N=D=0,E=S?-1/S:0,F=t.zOrigin,n=1e-6,i=",",r="0",(o=H*h)&&(a=Math.cos(o),R=-(f=Math.sin(o)),N=E*-f,x=v*f,O=m*f,C=a,E*=a,v*=a,m*=a),(o=I*h)&&(s=p*(a=Math.cos(o))+x*(f=Math.sin(o)),$=c*a+O*f,L=C*f,D=E*f,x=p*-f+x*a,O=c*-f+O*a,C*=a,E*=a,p=s,c=$),1!==w&&(x*=w,O*=w,C*=w,E*=w),1!==b&&(p*=b,c*=b,L*=b,D*=b),1!==j&&(v*=j,m*=j,R*=j,N*=j),(F||T)&&(F&&(d+=x*-F,u+=O*-F,M+=C*-F+F),T&&(d+=t.xOrigin-(t.xOrigin*v+t.yOrigin*p)+t.xOffset,u+=t.yOrigin-(t.xOrigin*m+t.yOrigin*c)+t.yOffset),n>d&&d>-n&&(d=r),n>u&&u>-n&&(u=r),n>M&&M>-n&&(M=0)),y=t.xPercent||t.yPercent?"translate("+t.xPercent+"%,"+t.yPercent+"%) matrix3d(":"matrix3d(",y+=(n>v&&v>-n?r:v)+i+(n>m&&m>-n?r:m)+i+(n>R&&R>-n?r:R),y+=i+(n>N&&N>-n?r:N)+i+(n>p&&p>-n?r:p)+i+(n>c&&c>-n?r:c),I||H||1!==w?(y+=i+(n>L&&L>-n?r:L)+i+(n>D&&D>-n?r:D)+i+(n>x&&x>-n?r:x),y+=i+(n>O&&O>-n?r:O)+i+(n>C&&C>-n?r:C)+i+(n>E&&E>-n?r:E)+i):y+=",0,0,0,0,1,0,",y+=d+i+u+i+M+i+(S?1+-M/S:1)+")",B[l]=y}};(n=te.prototype).x=n.y=n.z=n.skewX=n.skewY=n.rotation=n.rotationX=n.rotationY=n.zOrigin=n.xPercent=n.yPercent=n.xOffset=n.yOffset=0,n.scaleX=n.scaleY=n.scaleZ=1,i("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(e,t,n,i,c,u,h){if(i._lastParsedTransform===h)return c;i._lastParsedTransform=h,T=h.scale&&"function"==typeof h.scale?h.scale:0,"function"==typeof h[n]&&(R=h[n],h[n]=t),T&&(h.scale=T(w,e));var v,j,O,C,k,S,M,T,N,L,R,D=e._gsTransform,V=e.style,B=1e-6,I=ke.length,f=h,A={},z="transformOrigin",p=H(e,a,!0,f.parseTransform),b=f.transform&&("function"==typeof f.transform?f.transform(w,E):f.transform);if(i._transform=p,b&&"string"==typeof b&&l)(O=y.style)[l]=b,O.display="block",O.position="absolute",m.body.appendChild(y),v=H(y,null,!1),p.svg&&(C=p.xOrigin,k=p.yOrigin,v.x-=p.xOffset,v.y-=p.yOffset,(f.transformOrigin||f.svgOrigin)&&(b={},X(e,x(f.transformOrigin),b,f.svgOrigin,f.smoothOrigin,!0),C=b.xOrigin,k=b.yOrigin,v.x-=b.xOffset-p.xOffset,v.y-=b.yOffset-p.yOffset),(C||k)&&(M=ee(y,!0),v.x-=C-(C*M[0]+k*M[2]),v.y-=k-(C*M[1]+k*M[3]))),m.body.removeChild(y),v.perspective||(v.perspective=p.perspective),null!=f.xPercent&&(v.xPercent=d(f.xPercent,p.xPercent)),null!=f.yPercent&&(v.yPercent=d(f.yPercent,p.yPercent));else if("object"==typeof f){if(v={scaleX:d(null!=f.scaleX?f.scaleX:f.scale,p.scaleX),scaleY:d(null!=f.scaleY?f.scaleY:f.scale,p.scaleY),scaleZ:d(f.scaleZ,p.scaleZ),x:d(f.x,p.x),y:d(f.y,p.y),z:d(f.z,p.z),xPercent:d(f.xPercent,p.xPercent),yPercent:d(f.yPercent,p.yPercent),perspective:d(f.transformPerspective,p.perspective)},null!=(S=f.directionalRotation))if("object"==typeof S)for(O in S)f[O]=S[O];else f.rotation=S;"string"==typeof f.x&&-1!==f.x.indexOf("%")&&(v.x=0,v.xPercent=d(f.x,p.xPercent)),"string"==typeof f.y&&-1!==f.y.indexOf("%")&&(v.y=0,v.yPercent=d(f.y,p.yPercent)),v.rotation=F("rotation"in f?f.rotation:"shortRotation"in f?f.shortRotation+"_short":"rotationZ"in f?f.rotationZ:p.rotation,p.rotation,"rotation",A),g&&(v.rotationX=F("rotationX"in f?f.rotationX:"shortRotationX"in f?f.shortRotationX+"_short":p.rotationX||0,p.rotationX,"rotationX",A),v.rotationY=F("rotationY"in f?f.rotationY:"shortRotationY"in f?f.shortRotationY+"_short":p.rotationY||0,p.rotationY,"rotationY",A)),v.skewX=F(f.skewX,p.skewX),v.skewY=F(f.skewY,p.skewY)}for(g&&null!=f.force3D&&(p.force3D=f.force3D,N=!0),p.skewType=f.skewType||p.skewType||s.defaultSkewType,(L=p.force3D||p.z||p.rotationX||p.rotationY||v.z||v.rotationX||v.rotationY||v.perspective)||null==f.scale||(v.scaleZ=1);--I>-1;)((b=v[j=ke[I]]-p[j])>B||-B>b||null!=f[j]||null!=q[j])&&(N=!0,c=new r(p,j,p[j],b,c),j in A&&(c.e=A[j]),c.xs0=0,c.plugin=u,i._overwriteProps.push(c.n));return b=f.transformOrigin,p.svg&&(b||f.svgOrigin)&&(C=p.xOffset,k=p.yOffset,X(e,x(b),v,f.svgOrigin,f.smoothOrigin),c=K(p,"xOrigin",(D?p:v).xOrigin,v.xOrigin,c,z),c=K(p,"yOrigin",(D?p:v).yOrigin,v.yOrigin,c,z),(C!==p.xOffset||k!==p.yOffset)&&(c=K(p,"xOffset",D?C:p.xOffset,p.xOffset,c,z),c=K(p,"yOffset",D?k:p.yOffset,p.yOffset,c,z)),b="0px 0px"),(b||g&&L&&p.zOrigin)&&(l?(N=!0,j=P,b=(b||o(e,j,a,!1,"50% 50%"))+"",(c=new r(V,j,0,0,c,-1,z)).b=V[j],c.plugin=u,g?(O=p.zOrigin,b=b.split(" "),p.zOrigin=(b.length>2&&(0===O||"0px"!==b[2])?parseFloat(b[2]):O)||0,c.xs0=c.e=b[0]+" "+(b[1]||"50%")+" 0px",(c=new r(p,"zOrigin",0,0,c,-1,c.n)).b=O,c.xs0=c.e=p.zOrigin):c.xs0=c.e=b):x(b+"",p)),N&&(i._transformType=p.svg&&_||!L&&3!==this._transformType?2:3),R&&(h[n]=R),T&&(h.scale=T),c},prefix:!0}),i("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),i("borderRadius",{defaultValue:"0px",parser:function(e,t,n,s,i){t=this.format(t);var c,l,d,u,h,m,g,v,b,j,y,_,w,O,x,C,f=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],E=e.style;for(_=parseFloat(e.offsetWidth),O=parseFloat(e.offsetHeight),C=t.split(" "),h=0;h<f.length;h++)this.p.indexOf("border")&&(f[h]=B(f[h])),-1!==(d=l=o(e,f[h],a,!1,"0px")).indexOf(" ")&&(l=d.split(" "),d=l[0],l=l[1]),c=y=C[h],b=parseFloat(d),g=d.substr((b+"").length),(w="="===c.charAt(1))?(m=parseInt(c.charAt(0)+"1",10),c=c.substr(2),m*=parseFloat(c),u=c.substr((m+"").length-(0>m?1:0))||""):(m=parseFloat(c),u=c.substr((m+"").length)),""===u&&(u=$[n]||g),u!==g&&(v=p(e,"borderLeft",b,g),j=p(e,"borderTop",b,g),"%"===u?(d=v/_*100+"%",l=j/O*100+"%"):"em"===u?(d=v/(x=p(e,"borderLeft",1,"em"))+"em",l=j/x+"em"):(d=v+"px",l=j+"px"),w&&(c=parseFloat(d)+m+u,y=parseFloat(l)+m+u)),i=R(E,f[h],d+" "+l,c+" "+y,!1,"0px",i);return i},prefix:!0,formatter:ue("0px 0px 0px 0px",!1,!0)}),i("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(e,t,n,s,i){return R(e.style,n,this.format(o(e,n,a,!1,"0px 0px")),this.format(t),!1,"0px",i)},prefix:!0,formatter:ue("0px 0px",!1,!0)}),i("backgroundPosition",{defaultValue:"0 0",parser:function(e,t,n,s,i,r){var l,d,m,f,g,v,p="background-position",u=a||O(e,null),c=this.format((u?M?u.getPropertyValue(p+"-x")+" "+u.getPropertyValue(p+"-y"):u.getPropertyValue(p):e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY)||"0 0"),h=this.format(t);if(-1!==c.indexOf("%")!=(-1!==h.indexOf("%"))&&h.split(",").length<2&&(f=o(e,"backgroundImage").replace(Pe,""))&&"none"!==f){for(d=c.split(" "),g=h.split(" "),me.setAttribute("src",f),l=2;--l>-1;)(v=-1!==(c=d[l]).indexOf("%"))!==(-1!==g[l].indexOf("%"))&&(m=0===l?e.offsetWidth-me.width:e.offsetHeight-me.height,d[l]=v?parseFloat(c)/100*m+"px":parseFloat(c)/m*100+"%");c=d.join(" ")}return this.parseComplex(e.style,c,h,i,r)},formatter:x}),i("backgroundSize",{defaultValue:"0 0",formatter:function(e){return x(-1===(e+="").indexOf(" ")?e+" "+e:e)}}),i("perspective",{defaultValue:"0px",prefix:!0}),i("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),i("transformStyle",{prefix:!0}),i("backfaceVisibility",{prefix:!0}),i("userSelect",{prefix:!0}),i("margin",{parser:de("marginTop,marginRight,marginBottom,marginLeft")}),i("padding",{parser:de("paddingTop,paddingRight,paddingBottom,paddingLeft")}),i("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(e,t,n,s,i,r){var c,l,d;return 9>M?(c=e.currentStyle,l=8>M?" ":",",d="rect("+c.clipTop+l+c.clipRight+l+c.clipBottom+l+c.clipLeft+")",t=this.format(t).split(",").join(l)):(d=this.format(o(e,this.p,a,!1,this.dflt)),t=this.format(t)),this.parseComplex(e.style,d,t,i,r)}}),i("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),i("autoRound,strictUnits",{parser:function(e,t,n,s,o){return o}}),i("border",{defaultValue:"0px solid #000",parser:function(e,t,n,s,i,r){var c=o(e,"borderTopWidth",a,!1,"0px"),d=this.format(t).split(" "),l=d[0].replace(L,"");return"px"!==l&&(c=parseFloat(c)/p(e,"borderTopWidth",1,l)+l),this.parseComplex(e.style,this.format(c+" "+o(e,"borderTopStyle",a,!1,"solid")+" "+o(e,"borderTopColor",a,!1,"#000")),d.join(" "),i,r)},color:!0,formatter:function(e){var t=e.split(" ");return t[0]+" "+(t[1]||"solid")+" "+(e.match(u)||["#000"])[0]}}),i("borderWidth",{parser:de("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),i("float,cssFloat,styleFloat",{parser:function(e,t,n,s,o){var a=e.style,c="cssFloat"in a?"cssFloat":"styleFloat";return new r(a,c,0,0,o,-1,n,!1,0,a[c],t)}}),ye=function(e){var i,n=this.t,t=n.filter||o(this.data,"filter")||"",s=this.s+this.c*e|0;100===s&&(-1===t.indexOf("atrix(")&&-1===t.indexOf("radient(")&&-1===t.indexOf("oader(")?(n.removeAttribute("filter"),i=!o(this.data,"filter")):(n.filter=t.replace(Xe,""),i=!0)),i||(this.xn1&&(n.filter=t=t||"alpha(opacity="+s+")"),-1===t.indexOf("pacity")?0===s&&this.xn1||(n.filter=t+" alpha(opacity="+s+")"):n.filter=t.replace(re,"opacity="+s))},i("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(e,t,n,s,i,c){var l=parseFloat(o(e,"opacity",a,!1,"1")),d=e.style,u="autoAlpha"===n;return"string"==typeof t&&"="===t.charAt(1)&&(t=("-"===t.charAt(0)?-1:1)*parseFloat(t.substr(2))+l),u&&1===l&&"hidden"===o(e,"visibility",a)&&0!==t&&(l=0),C?i=new r(d,"opacity",l,t-l,i):((i=new r(d,"opacity",100*l,100*(t-l),i)).xn1=u?1:0,d.zoom=1,i.type=2,i.b="alpha(opacity="+i.s+")",i.e="alpha(opacity="+(i.s+i.c)+")",i.data=e,i.plugin=c,i.setRatio=ye),u&&((i=new r(d,"visibility",0,0,i,-1,null,!1,0,0!==l?"inherit":"hidden",0===t?"hidden":"inherit")).xs0="inherit",s._overwriteProps.push(i.n),s._overwriteProps.push(n)),i}}),A=function(e,t){t&&(e.removeProperty?(("ms"===t.substr(0,2)||"webkit"===t.substr(0,6))&&(t="-"+t),e.removeProperty(t.replace(Ce,"-$1").toLowerCase())):e.removeAttribute(t))},je=function(e){if(this.t._gsClassPT=this,1===e||0===e){this.t.setAttribute("class",0===e?this.b:this.e);for(var t=this.data,n=this.t.style;t;)t.v?n[t.p]=t.v:A(n,t.p),t=t._next;1===e&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)},i("className",{parser:function(e,t,n,s,o,i,c){var l,d,u,h,f,m=e.getAttribute("class")||"",p=e.style.cssText;if((o=s._classNamePT=new r(e,n,0,0,o,2)).setRatio=je,o.pr=-11,I=!0,o.b=m,f=N(e,a),u=e._gsClassPT){for(h={},l=u.data;l;)h[l.p]=1,l=l._next;u.setRatio(1)}return e._gsClassPT=o,o.e="="!==t.charAt(1)?t:m.replace(new RegExp("(?:\\s|^)"+t.substr(2)+"(?![\\w-])"),"")+("+"===t.charAt(0)?" "+t.substr(2):""),e.setAttribute("class",o.e),d=G(e,f,N(e),c,h),e.setAttribute("class",m),o.data=d.firstMPT,e.style.cssText=p,o.xfirst=s.parse(e,d.difs,o,i)}}),ve=function(e){if((1===e||0===e)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var t,n,s,i,a,o=this.t.style,r=f.transform.parse;if("all"===this.e)o.cssText="",s=!0;else for(n=(i=this.e.split(" ").join("").split(",")).length;--n>-1;)t=i[n],f[t]&&(f[t].parse===r?s=!0:t="transformOrigin"===t?P:f[t].p),A(o,t);s&&(A(o,l),(a=this.t._gsTransform)&&(a.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(i("clearProps",{parser:function(e,t,n,s,o){return(o=new r(e,n,0,0,o,2)).setRatio=ve,o.e=t,o.pr=-10,o.data=s._tween,I=!0,o}}),n="bezier,throwProps,physicsProps,physics2D".split(","),c=n.length;c--;)Ve(n[c]);return(n=s.prototype)._firstPT=n._lastParsedTransform=n._transform=null,n._onInitTween=function(e,t,n,i){if(!e.nodeType)return!1;this._target=E=e,this._tween=n,this._vars=t,w=i,ie=t.autoRound,I=!1,$=t.suffixMap||s.suffixMap,a=O(e,""),oe=this._overwriteProps;var c,d,h,m,p,g,v,b,j,u=e.style;if(we&&""===u.zIndex&&("auto"===(h=o(e,"zIndex",a))||""===h)&&this._addLazySet(u,"zIndex",0),"string"==typeof t&&(m=u.cssText,h=N(e,a),u.cssText=m+";"+t,h=G(e,h,N(e)).difs,!C&&Re.test(t)&&(h.opacity=parseFloat(RegExp.$1)),t=h,u.cssText=m),t.className?this._firstPT=d=f.className.parse(e,t.className,"className",this,null,null,t):this._firstPT=d=this.parse(e,t,null),this._transformType){for(j=3===this._transformType,l?ce&&(we=!0,""===u.zIndex&&("auto"===(b=o(e,"zIndex",a))||""===b)&&this._addLazySet(u,"zIndex",0),be&&this._addLazySet(u,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(j?"visible":"hidden"))):u.zoom=1,c=d;c&&c._next;)c=c._next;p=new r(e,"transform",0,0,null,2),this._linkCSSP(p,null,c),p.setRatio=l?We:$e,p.data=this._transform||H(e,a,!0),p.tween=n,p.pr=-1,oe.pop()}if(I){for(;d;){for(v=d._next,c=m;c&&c.pr>d.pr;)c=c._next;(d._prev=c?c._prev:g)?d._prev._next=d:m=d,(d._next=c)?c._prev=d:g=d,d=v}this._firstPT=m}return!0},n.parse=function(e,t,n,s){var i,c,l,d,u,h,m,g,b,j,v=e.style;for(i in t)"function"==typeof(c=t[i])&&(c=c(w,E)),(j=f[i])?n=j.parse(e,c,i,this,n,s,t):(h=o(e,i,a)+"",g="string"==typeof c,"color"===i||"fill"===i||"stroke"===i||-1!==i.indexOf("Color")||g&&Ke.test(c)?(g||(c=((c=U(c)).length>3?"rgba(":"rgb(")+c.join(",")+")"),n=R(v,i,h,c,!0,"transparent",n,0,s)):g&&He.test(c)?n=R(v,i,h,c,!0,null,n,0,s):(m=(l=parseFloat(h))||0===l?h.substr((l+"").length):"",(""===h||"auto"===h)&&("width"===i||"height"===i?(l=Ue(e,i,a),m="px"):"left"===i||"top"===i?(l=Te(e,i,a),m="px"):(l="opacity"!==i?0:1,m="")),(b=g&&"="===c.charAt(1))?(d=parseInt(c.charAt(0)+"1",10),c=c.substr(2),d*=parseFloat(c),u=c.replace(L,"")):(d=parseFloat(c),u=g?c.replace(L,""):""),""===u&&(u=i in $?$[i]:m),c=d||0===d?(b?d+l:d)+u:t[i],m!==u&&""!==u&&(d||0===d)&&l&&(l=p(e,i,l,m),"%"===u?(l/=p(e,i,100,"%")/100,!0!==t.strictUnits&&(h=l+"%")):"em"===u||"rem"===u||"vw"===u||"vh"===u?l/=p(e,i,1,u):"px"!==u&&(d=p(e,i,d,u),u="px"),b&&(d||0===d)&&(c=d+l+u)),b&&(d+=l),!l&&0!==l||!d&&0!==d?void 0!==v[i]&&(c||c+""!="NaN"&&c!=null)?(n=new r(v,i,d||l||0,0,n,-1,i,!1,0,h,c)).xs0="none"!==c||"display"!==i&&-1===i.indexOf("Style")?c:h:Ae("invalid "+i+" tween value: "+t[i]):(n=new r(v,i,l,d-l,n,0,i,!1!==ie&&("px"===u||"zIndex"===i),0,h,c)).xs0=u)),s&&n&&!n.plugin&&(n.plugin=s);return n},n.setRatio=function(e){var n,s,o,t=this._firstPT,i=1e-6;if(1!==e||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(e||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;t;){if(n=t.c*e+t.s,t.r?n=Math.round(n):i>n&&n>-i&&(n=0),t.type)if(1===t.type)if(2===(s=t.l))t.t[t.p]=t.xs0+n+t.xs1+t.xn1+t.xs2;else if(3===s)t.t[t.p]=t.xs0+n+t.xs1+t.xn1+t.xs2+t.xn2+t.xs3;else if(4===s)t.t[t.p]=t.xs0+n+t.xs1+t.xn1+t.xs2+t.xn2+t.xs3+t.xn3+t.xs4;else if(5===s)t.t[t.p]=t.xs0+n+t.xs1+t.xn1+t.xs2+t.xn2+t.xs3+t.xn3+t.xs4+t.xn4+t.xs5;else{for(o=t.xs0+n+t.xs1,s=1;s<t.l;s++)o+=t["xn"+s]+t["xs"+(s+1)];t.t[t.p]=o}else-1===t.type?t.t[t.p]=t.xs0:t.setRatio&&t.setRatio(e);else t.t[t.p]=n+t.xs0;t=t._next}else for(;t;)2!==t.type?t.t[t.p]=t.b:t.setRatio(e),t=t._next;else for(;t;){if(2!==t.type)if(t.r&&-1!==t.type)if(n=Math.round(t.s+t.c),t.type){if(1===t.type){for(s=t.l,o=t.xs0+n+t.xs1,s=1;s<t.l;s++)o+=t["xn"+s]+t["xs"+(s+1)];t.t[t.p]=o}}else t.t[t.p]=n+t.xs0;else t.t[t.p]=t.e;else t.setRatio(e);t=t._next}},n._enableTransforms=function(e){this._transform=this._transform||H(this._target,a,!0),this._transformType=this._transform.svg&&_||!e&&3!==this._transformType?2:3},ge=function(){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)},n._addLazySet=function(e,t,n){var s=this._firstPT=new r(e,t,0,0,this._firstPT,2);s.e=n,s.setRatio=ge,s.data=this},n._linkCSSP=function(e,t,n,s){return e&&(t&&(t._prev=e),e._next&&(e._next._prev=e._prev),e._prev?e._prev._next=e._next:this._firstPT===e&&(this._firstPT=e._next,s=!0),n?n._next=e:s||null!==this._firstPT||(this._firstPT=e),e._next=t,e._prev=n),e},n._mod=function(e){for(var t=this._firstPT;t;)"function"==typeof e[t.p]&&e[t.p]===Math.round&&(t.r=1),t=t._next},n._kill=function(t){var n,s,i,o=t;if(t.autoAlpha||t.alpha){for(i in o={},t)o[i]=t[i];o.opacity=1,o.autoAlpha&&(o.visibility=1)}for(t.className&&(n=this._classNamePT)&&((s=n.xfirst)&&s._prev?this._linkCSSP(s._prev,n._next,s._prev._prev):s===this._firstPT&&(this._firstPT=n._next),n._next&&this._linkCSSP(n._next,n._next._next,s._prev),this._classNamePT=null),n=this._firstPT;n;)n.plugin&&n.plugin!==i&&n.plugin._kill&&(n.plugin._kill(t),i=n.plugin),n=n._next;return e.prototype._kill.call(this,o)},V=function(e,t,n){var s,o,i,a;if(e.slice)for(s=e.length;--s>-1;)V(e[s],t,n);else for(s=(a=e.childNodes).length;--s>-1;)i=(o=a[s]).type,o.style&&(t.push(N(o)),n&&n.push(o)),1!==i&&9!==i&&11!==i||!o.childNodes.length||V(o,t,n)},s.cascadeTo=function(e,n,s){var o,i,a,l,r=t.to(e,n,s),u=[r],d=[],h=[],c=[],m=t._internals.reservedProps;for(e=r._targets||r.target,V(e,d,c),r.render(n,!0,!0),V(e,h),r.render(0,!0,!0),r._enabled(!0),o=c.length;--o>-1;)if((a=G(c[o],d[o],h[o])).firstMPT){for(i in a=a.difs,s)m[i]&&(a[i]=s[i]);for(i in l={},a)l[i]=d[o][i];u.push(t.fromTo(c[o],n,l,a))}return u},e.activate([s]),s},!0),function(){var t=_gsScope._gsDefine.plugin({propName:"roundProps",version:"1.6.0",priority:-1,API:2,init:function(e,t,n){return this._tween=n,!0}}),n=function(e){for(;e;)e.f||e.blob||(e.m=Math.round),e=e._next},e=t.prototype;e._onInitAllProps=function(){for(var e,s,i,t=this._tween,a=t.vars.roundProps.join?t.vars.roundProps:t.vars.roundProps.split(","),o=a.length,r={},c=t._propLookup.roundProps;--o>-1;)r[a[o]]=Math.round;for(o=a.length;--o>-1;)for(i=a[o],e=t._firstPT;e;)s=e._next,e.pg?e.t._mod(r):e.n===i&&(2===e.f&&e.t?n(e.t._firstPT):(this._add(e.t,i,e.s,e.c),s&&(s._prev=e._prev),e._prev?e._prev._next=s:t._firstPT===e&&(t._firstPT=s),e._next=e._prev=null,t._propLookup[i]=c)),e=s;return!1},e._add=function(e,t,n,s){this._addTween(e,t,n,n+s,t,Math.round),this._overwriteProps.push(t)}}(),_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.6.0",init:function(e,t,n,s){var o,i;if("function"!=typeof e.setAttribute)return!1;for(o in t)"function"==typeof(i=t[o])&&(i=i(s,e)),this._addTween(e,"setAttribute",e.getAttribute(o)+"",i+"",o,!1,o),this._overwriteProps.push(o);return!0}}),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.3.0",API:2,init:function(e,t,n,s){"object"!=typeof t&&(t={rotation:t}),this.finals={};var o,i,r,c,l,d,a=!0===t.useRadians?2*Math.PI:360,u=1e-6;for(i in t)"useRadians"!==i&&("function"==typeof(l=t[i])&&(l=l(s,e)),r=(d=(l+"").split("_"))[0],c=parseFloat("function"!=typeof e[i]?e[i]:e[i.indexOf("set")||"function"!=typeof e["get"+i.substr(3)]?i:"get"+i.substr(3)]()),o=(l=this.finals[i]="string"==typeof r&&"="===r.charAt(1)?c+parseInt(r.charAt(0)+"1",10)*Number(r.substr(2)):Number(r)||0)-c,d.length&&(-1!==(r=d.join("_")).indexOf("short")&&(o%=a)!==o%(a/2)&&(o=0>o?o+a:o-a),-1!==r.indexOf("_cw")&&0>o?o=(o+9999999999*a)%a-(o/a|0)*a:-1!==r.indexOf("ccw")&&o>0&&(o=(o-9999999999*a)%a-(o/a|0)*a)),(o>u||-u>o)&&(this._addTween(e,i,c,c+o,i),this._overwriteProps.push(i)));return!0},set:function(e){var t;if(1!==e)this._super.setRatio.call(this,e);else for(t=this._firstPT;t;)t.f?t.t[t.p](this.finals[t.p]):t.t[t.p]=this.finals[t.p],t=t._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(e){var o,a,l,f=_gsScope.GreenSockGlobals||_gsScope,g=f.com.greensock,m=2*Math.PI,h=Math.PI/2,s=g._class,t=function(t,n){var o=s("easing."+t,function(){},!0),i=o.prototype=new e;return i.constructor=o,i.getRatio=n,o},c=e.register||function(){},r=function(e,t,n,o){var a=s("easing."+e,{easeOut:new t,easeIn:new n,easeInOut:new o},!0);return c(a,e),a},u=function(e,t,n){this.t=e,this.v=t,n&&(this.next=n,n.prev=this,this.c=n.v-t,this.gap=n.t-e)},d=function(t,n){var o=s("easing."+t,function(e){this._p1=e||0===e?e:1.70158,this._p2=1.525*this._p1},!0),i=o.prototype=new e;return i.constructor=o,i.getRatio=n,i.config=function(e){return new o(e)},o},p=r("Back",d("BackOut",function(e){return(e-=1)*e*((this._p1+1)*e+this._p1)+1}),d("BackIn",function(e){return e*e*((this._p1+1)*e-this._p1)}),d("BackInOut",function(e){return(e*=2)<1?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)})),i=s("easing.SlowMo",function(e,t,n){t=t||0===t?t:.7,e==null?e=.7:e>1&&(e=1),this._p=1!==e?t:0,this._p1=(1-e)/2,this._p2=e,this._p3=this._p1+this._p2,this._calcEnd=!0===n},!0),n=i.prototype=new e;return n.constructor=i,n.getRatio=function(e){var t=e+(.5-e)*this._p;return e<this._p1?this._calcEnd?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t:e>this._p3?this._calcEnd?1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e:this._calcEnd?1:t},i.ease=new i(.7,.7),n.config=i.config=function(e,t,n){return new i(e,t,n)},a=s("easing.SteppedEase",function(e){e=e||1,this._p1=1/e,this._p2=e+1},!0),(n=a.prototype=new e).constructor=a,n.getRatio=function(e){return 0>e?e=0:e>=1&&(e=.999999999),(this._p2*e>>0)*this._p1},n.config=a.config=function(e){return new a(e)},o=s("easing.RoughEase",function(t){for(var n,s,o,a,r,m,l=(t=t||{}).taper||"none",h=[],g=0,d=0|(t.points||20),i=d,f=!1!==t.randomize,v=!0===t.clamp,p=t.template instanceof e?t.template:null,c="number"==typeof t.strength?.4*t.strength:.4;--i>-1;)n=f?Math.random():1/d*i,s=p?p.getRatio(n):n,"none"===l?o=c:"out"===l?o=(a=1-n)*a*c:"in"===l?o=n*n*c:.5>n?o=(a=2*n)*a*.5*c:o=(a=2*(1-n))*a*.5*c,f?s+=Math.random()*o-.5*o:i%2?s+=.5*o:s-=.5*o,v&&(s>1?s=1:0>s&&(s=0)),h[g++]={x:n,y:s};for(h.sort(function(e,t){return e.x-t.x}),r=new u(1,1,null),i=d;--i>-1;)m=h[i],r=new u(m.x,m.y,r);this._prev=new u(0,0,0!==r.t?r:r.next)},!0),(n=o.prototype=new e).constructor=o,n.getRatio=function(e){var t=this._prev;if(e>t.t){for(;t.next&&e>=t.t;)t=t.next;t=t.prev}else for(;t.prev&&e<=t.t;)t=t.prev;return this._prev=t,t.v+(e-t.t)/t.gap*t.c},n.config=function(e){return new o(e)},o.ease=new o,r("Bounce",t("BounceOut",function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}),t("BounceIn",function(e){return(e=1-e)<1/2.75?1-7.5625*e*e:2/2.75>e?1-(7.5625*(e-=1.5/2.75)*e+.75):2.5/2.75>e?1-(7.5625*(e-=2.25/2.75)*e+.9375):1-(7.5625*(e-=2.625/2.75)*e+.984375)}),t("BounceInOut",function(e){var t=.5>e;return e=1/2.75>(e=t?1-2*e:2*e-1)?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,t?.5*(1-e):.5*e+.5})),r("Circ",t("CircOut",function(e){return Math.sqrt(1-(e-=1)*e)}),t("CircIn",function(e){return-(Math.sqrt(1-e*e)-1)}),t("CircInOut",function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)})),l=function(t,n,o){var i=s("easing."+t,function(e,t){this._p1=e>=1?e:1,this._p2=(t||o)/(1>e?e:1),this._p3=this._p2/m*(Math.asin(1/this._p1)||0),this._p2=m/this._p2},!0),a=i.prototype=new e;return a.constructor=i,a.getRatio=n,a.config=function(e,t){return new i(e,t)},i},r("Elastic",l("ElasticOut",function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*this._p2)+1},.3),l("ElasticIn",function(e){return-this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)},.3),l("ElasticInOut",function(e){return(e*=2)<1?this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)*-.5:this._p1*Math.pow(2,-10*(e-=1))*Math.sin((e-this._p3)*this._p2)*.5+1},.45)),r("Expo",t("ExpoOut",function(e){return 1-Math.pow(2,-10*e)}),t("ExpoIn",function(e){return Math.pow(2,10*(e-1))-.001}),t("ExpoInOut",function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))})),r("Sine",t("SineOut",function(e){return Math.sin(e*h)}),t("SineIn",function(e){return 1-Math.cos(e*h)}),t("SineInOut",function(e){return-.5*(Math.cos(Math.PI*e)-1)})),s("easing.EaseLookup",{find:function(t){return e.map[t]}},!0),c(f.SlowMo,"SlowMo","ease,"),c(o,"RoughEase","ease,"),c(a,"SteppedEase","ease,"),p},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(e,t){"use strict";var x={},A=e.document,F=e.GreenSockGlobals=e.GreenSockGlobals||e;if(!F.TweenLite){var n,o,i,c,d,$=function(e){var t,s=e.split("."),n=F;for(t=0;t<s.length;t++)n[s[t]]=n=n[s[t]]||{};return n},f=$("com.greensock"),a=1e-10,V=function(e){var t,n=[],s=e.length;for(t=0;t!==s;n.push(e[t++]));return n},Y=function(){},_=function(){var e=Object.prototype.toString,t=e.call([]);return function(n){return n!=null&&(n instanceof Array||"object"==typeof n&&!!n.push&&e.call(n)===t)}}(),O={},Z=function(n,s,o,i){this.sc=O[n]?O[n].sc:[],O[n]=this,this.gsClass=null,this.func=o;var a=[];this.check=function(r){for(var l,d,u,h,m,c=s.length,f=c;--c>-1;)(u=O[s[c]]||new Z(s[c],[])).gsClass?(a[c]=u.gsClass,f--):r&&u.sc.push(this);if(0===f&&o){if(d=(h=("com.greensock."+n).split(".")).pop(),l=$(h.join("."))[d]=this.gsClass=o.apply(o,a),i)if(F[d]=x[d]=l,!(m="undefined"!=typeof module&&module.exports)&&"function"==typeof define&&define.amd)define((e.GreenSockAMDPath?e.GreenSockAMDPath+"/":"")+n.split(".").pop(),[],function(){return l});else if(m)if(n===t)for(c in module.exports=x[t]=l,x)l[c]=x[c];else x[t]&&(x[t][d]=l);for(c=0;c<this.sc.length;c++)this.sc[c].check()}},this.check(!0)},D=e._gsDefine=function(e,t,n,s){return new Z(e,t,n,s)},h=f._class=function(e,t,n){return t=t||function(){},D(e,[],function(){return t},n),t};D.globals=F;var X=[0,0,1,1],m=h("easing.Ease",function(e,t,n,s){this._func=e,this._type=n||0,this._power=s||0,this._params=t?X.concat(t):X},!0),C=m.map={},L=m.register=function(e,t,n,s){for(var o,i,a,r,c=t.split(","),l=c.length,d=(n||"easeIn,easeOut,easeInOut").split(",");--l>-1;)for(o=c[l],r=s?h("easing."+o,null,!0):f.easing[o]||{},a=d.length;--a>-1;)i=d[a],C[o+"."+i]=C[i+o]=r[i]=e.getRatio?e:e[i]||new e};for((n=m.prototype)._calcEnd=!1,n.getRatio=function(e){if(this._func)return this._params[0]=e,this._func.apply(null,this._params);var n=this._type,s=this._power,t=1===n?1-e:2===n?e:.5>e?2*e:2*(1-e);return 1===s?t*=t:2===s?t*=t*t:3===s?t*=t*t*t:4===s&&(t*=t*t*t*t),1===n?1-t:2===n?t:.5>e?t/2:1-t/2},i=(d=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;--i>-1;)n=d[i]+",Power"+i,L(new m(null,null,1,i),n,"easeOut",!0),L(new m(null,null,2,i),n,"easeIn"+(0===i?",easeNone":"")),L(new m(null,null,3,i),n,"easeInOut");C.linear=f.easing.Linear.easeIn,C.swing=f.easing.Quad.easeInOut,R=h("events.EventDispatcher",function(e){this._listeners={},this._eventTarget=e||this}),(n=R.prototype).addEventListener=function(e,t,n,s,i){i=i||0;var r,l,a=this._listeners[e],d=0;for(this!==o||c||o.wake(),a==null&&(this._listeners[e]=a=[]),r=a.length;--r>-1;)(l=a[r]).c===t&&l.s===n?a.splice(r,1):0===d&&l.pr<i&&(d=r+1);a.splice(d,0,{c:t,s:n,up:s,pr:i})},n.removeEventListener=function(e,t){var n,s=this._listeners[e];if(s)for(n=s.length;--n>-1;)if(s[n].c===t)return void s.splice(n,1)},n.dispatchEvent=function(e){var t,s,o,n=this._listeners[e];if(n)for((o=n.length)>1&&(n=n.slice(0)),s=this._eventTarget;--o>-1;)(t=n[o])&&(t.up?t.c.call(t.s||s,{type:e,target:s}):t.c.call(t.s||s))};var E=e.requestAnimationFrame,P=e.cancelAnimationFrame,w=Date.now||function(){return(new Date).getTime()},j=w();for(i=(d=["ms","moz","webkit","o"]).length;--i>-1&&!E;)E=e[d[i]+"RequestAnimationFrame"],P=e[d[i]+"CancelAnimationFrame"]||e[d[i]+"CancelRequestAnimationFrame"];h("Ticker",function(e,t){var s,i,l,d,h,n=this,m=w(),r=!1!==t&&!!E&&"auto",u=500,p=33,f=function(e){var t,a,o=w()-j;o>u&&(m+=o-p),j+=o,n.time=(j-m)/1e3,t=n.time-d,(!i||t>0||!0===e)&&(n.frame++,d+=t+(t>=l?.004:l-t),a=!0),!0!==e&&(s=h(f)),a&&n.dispatchEvent("tick")};R.call(n),n.time=n.frame=0,n.tick=function(){f(!0)},n.lagSmoothing=function(e,t){u=e||1/a,p=Math.min(t,u,0)},n.sleep=function(){s!=null&&(r&&P?P(s):clearTimeout(s),h=Y,s=null,n===o&&(c=!1))},n.wake=function(e){null!==s?n.sleep():e?m+=-j+(j=w()):n.frame>10&&(j=w()-u+5),h=0===i?Y:r&&E?E:function(e){return setTimeout(e,1e3*(d-n.time)+1|0)},n===o&&(c=!0),f(2)},n.fps=function(e){return arguments.length?(l=1/((i=e)||60),d=this.time+l,void n.wake()):i},n.useRAF=function(e){return arguments.length?(n.sleep(),r=e,void n.fps(i)):r},n.fps(e),setTimeout(function(){"auto"===r&&n.frame<5&&"hidden"!==A.visibilityState&&n.useRAF(!1)},1500)}),(n=f.Ticker.prototype=new f.events.EventDispatcher).constructor=f.Ticker,r=h("core.Animation",function(e,t){if(this.vars=t=t||{},this._duration=this._totalDuration=e||0,this._delay=Number(t.delay)||0,this._timeScale=1,this._active=!0===t.immediateRender,this.data=t.data,this._reversed=!0===t.reversed,p){c||o.wake();var n=this.vars.useFrames?v:p;n.add(this,n._time),this.vars.paused&&this.paused(!0)}}),o=r.ticker=new f.Ticker,(n=r.prototype)._dirty=n._gc=n._initted=n._paused=!1,n._totalTime=n._time=0,n._rawPrevTime=-1,n._next=n._last=n._onUpdate=n._timeline=n.timeline=null,n._paused=!1,z=function(){c&&w()-j>2e3&&o.wake(),setTimeout(z,2e3)},z(),n.play=function(e,t){return e!=null&&this.seek(e,t),this.reversed(!1).paused(!1)},n.pause=function(e,t){return e!=null&&this.seek(e,t),this.paused(!0)},n.resume=function(e,t){return e!=null&&this.seek(e,t),this.paused(!1)},n.seek=function(e,t){return this.totalTime(Number(e),!1!==t)},n.restart=function(e,t){return this.reversed(!1).paused(!1).totalTime(e?-this._delay:0,!1!==t,!0)},n.reverse=function(e,t){return e!=null&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},n.render=function(){},n.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},n.isActive=function(){var t,e=this._timeline,n=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime(!0))>=n&&t<n+this.totalDuration()/this._timeScale},n._enabled=function(e,t){return c||o.wake(),this._gc=!e,this._active=this.isActive(),!0!==t&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,!0)),!1},n._kill=function(){return this._enabled(!1,!1)},n.kill=function(e,t){return this._kill(e,t),this},n._uncache=function(e){for(var t=e?this:this.timeline;t;)t._dirty=!0,t=t.timeline;return this},n._swapSelfInParams=function(e){for(var t=e.length,n=e.concat();--t>-1;)"{self}"===e[t]&&(n[t]=this);return n},n._callback=function(e){var n=this.vars,s=n[e],t=n[e+"Params"],o=n[e+"Scope"]||n.callbackScope||this;switch(t?t.length:0){case 0:s.call(o);break;case 1:s.call(o,t[0]);break;case 2:s.call(o,t[0],t[1]);break;default:s.apply(o,t)}},n.eventCallback=function(e,t,n,s){if("on"===(e||"").substr(0,2)){var o=this.vars;if(1===arguments.length)return o[e];t==null?delete o[e]:(o[e]=t,o[e+"Params"]=_(n)&&-1!==n.join("").indexOf("{self}")?this._swapSelfInParams(n):n,o[e+"Scope"]=s),"onUpdate"===e&&(this._onUpdate=t)}return this},n.delay=function(e){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay),this._delay=e,this):this._delay},n.duration=function(e){return arguments.length?(this._duration=this._totalDuration=e,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==e&&this.totalTime(this._totalTime*(e/this._duration),!0),this):(this._dirty=!1,this._duration)},n.totalDuration=function(e){return this._dirty=!1,arguments.length?this.duration(e):this._totalDuration},n.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(e>this._duration?this._duration:e,t)):this._time},n.totalTime=function(e,t,n){if(c||o.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>e&&!n&&(e+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var i=this._totalDuration,s=this._timeline;if(e>i&&!n&&(e=i),this._startTime=(this._paused?this._pauseTime:s._time)-(this._reversed?i-e:e)/this._timeScale,s._dirty||this._uncache(!1),s._timeline)for(;s._timeline;)s._timeline._time!==(s._startTime+s._totalTime)/s._timeScale&&s.totalTime(s._totalTime,!0),s=s._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==e||0===this._duration)&&(u.length&&y(),this.render(e,t,!1),u.length&&y())}return this},n.progress=n.totalProgress=function(e,t){var n=this.duration();return arguments.length?this.totalTime(n*e,t):n?this._time/n:this.ratio},n.startTime=function(e){return arguments.length?(e!==this._startTime&&(this._startTime=e,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)),this):this._startTime},n.endTime=function(e){return this._startTime+(0!=e?this.totalDuration():this.duration())/this._timeScale},n.timeScale=function(e){if(!arguments.length)return this._timeScale;if(e=e||a,this._timeline&&this._timeline.smoothChildTiming){var t=this._pauseTime,n=t||0===t?t:this._timeline.totalTime();this._startTime=n-(n-this._startTime)*this._timeScale/e}return this._timeScale=e,this._uncache(!1)},n.reversed=function(e){return arguments.length?(e!=this._reversed&&(this._reversed=e,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},n.paused=function(e){if(!arguments.length)return this._paused;var t,s,n=this._timeline;return e!=this._paused&&n&&(c||e||o.wake(),s=(t=n.rawTime())-this._pauseTime,!e&&n.smoothChildTiming&&(this._startTime+=s,this._uncache(!1)),this._pauseTime=e?t:null,this._paused=e,this._active=this.isActive(),!e&&0!==s&&this._initted&&this.duration()&&(t=n.smoothChildTiming?this._totalTime:(t-this._startTime)/this._timeScale,this.render(t,t===this._totalTime,!0))),this._gc&&!e&&this._enabled(!0,!1),this},S=h("core.SimpleTimeline",function(e){r.call(this,0,e),this.autoRemoveChildren=this.smoothChildTiming=!0}),(n=S.prototype=new r).constructor=S,n.kill()._gc=!1,n._first=n._last=n._recent=null,n._sortChildren=!1,n.add=n.insert=function(e,t){var o,i;if(e._startTime=Number(t||0)+e._delay,e._paused&&this!==e._timeline&&(e._pauseTime=e._startTime+(this.rawTime()-e._startTime)/e._timeScale),e.timeline&&e.timeline._remove(e,!0),e.timeline=e._timeline=this,e._gc&&e._enabled(!0,!0),o=this._last,this._sortChildren)for(i=e._startTime;o&&o._startTime>i;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=this._first,this._first=e),e._next?e._next._prev=e:this._last=e,e._prev=o,this._recent=e,this._timeline&&this._uncache(!0),this},n._remove=function(e,t){return e.timeline===this&&(t||e._enabled(!1,!0),e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next),e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev),e._next=e._prev=e.timeline=null,e===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},n.render=function(e,t,n){var o,s=this._first;for(this._totalTime=this._time=this._rawPrevTime=e;s;)o=s._next,(s._active||e>=s._startTime&&!s._paused)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(e-s._startTime)*s._timeScale,t,n):s.render((e-s._startTime)*s._timeScale,t,n)),s=o},n.rawTime=function(){return c||o.wake(),this._totalTime},s=h("TweenLite",function(t,n,o){if(r.call(this,n,o),this.render=s.prototype.render,t==null)throw"Cannot tween a null target.";this.target=t="string"!=typeof t?t:s.selector(t)||t;var i,c,l,u=t.jquery||t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType),d=this.vars.overwrite;if(this._overwrite=d=d==null?U[s.defaultOverwrite]:"number"==typeof d?d>>0:U[d],(u||t instanceof Array||t.push&&_(t))&&"number"!=typeof t[0])for(this._targets=l=V(t),this._propLookup=[],this._siblings=[],c=0;c<l.length;c++)(i=l[c])?"string"!=typeof i?i.length&&i!==e&&i[0]&&(i[0]===e||i[0].nodeType&&i[0].style&&!i.nodeType)?(l.splice(c--,1),this._targets=l=l.concat(V(i))):(this._siblings[c]=k(i,this,!1),1===d&&this._siblings[c].length>1&&N(i,this,null,1,this._siblings[c])):"string"==typeof(i=l[c--]=s.selector(i))&&l.splice(c+1,1):l.splice(c--,1);else this._propLookup={},this._siblings=k(t,this,!1),1===d&&this._siblings.length>1&&N(t,this,null,1,this._siblings);(this.vars.immediateRender||0===n&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-a,this.render(Math.min(0,-this._delay)))},!0),M=function(t){return t&&t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType)},(n=s.prototype=new r).constructor=s,n.kill()._gc=!1,n.ratio=0,n._firstPT=n._targets=n._overwrittenProps=n._startAt=null,n._notifyPluginsOfEnabled=n._lazy=!1,s.version="1.19.1",s.defaultEase=n._ease=new m(null,null,1,1),s.defaultOverwrite="auto",s.ticker=o,s.autoSleep=120,s.lagSmoothing=function(e,t){o.lagSmoothing(e,t)},s.selector=e.$||e.jQuery||function(t){var n=e.$||e.jQuery;return n?(s.selector=n,n(t)):void 0===A?t:A.querySelectorAll?A.querySelectorAll(t):A.getElementById("#"===t.charAt(0)?t.substr(1):t)};var s,r,l,S,M,z,R,u=[],T={},G=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[-+]?\d+)?)[0-9]/gi,q=function(e){for(var n,t=this._firstPT,s=1e-6;t;)n=t.blob?1===e?this.end:e?this.join(""):this.start:t.c*e+t.s,t.m?n=t.m(n,this._target||t.t):s>n&&n>-s&&!t.blob&&(n=0),t.f?t.fp?t.t[t.p](t.fp,n):t.t[t.p](n):t.t[t.p]=n,t=t._next},K=function(e,t,n,s){var i,a,d,u,h,m,f,o=[],c=0,r="",l=0;for(o.start=e,o.end=t,e=o[0]=e+"",t=o[1]=t+"",n&&(n(o),e=o[0],t=o[1]),o.length=0,d=e.match(G)||[],m=t.match(G)||[],s&&(s._next=null,s.blob=1,o._firstPT=o._applyPT=s),f=m.length,a=0;f>a;a++)i=m[a],r+=(h=t.substr(c,t.indexOf(i,c)-c))||!a?h:",",c+=h.length,l?l=(l+1)%5:"rgba("===h.substr(-5)&&(l=1),i===d[a]||d.length<=a?r+=i:(r&&(o.push(r),r=""),u=parseFloat(d[a]),o.push(u),o._firstPT={_next:o._firstPT,t:o,p:o.length-1,s:u,c:("="===i.charAt(1)?parseInt(i.charAt(0)+"1",10)*parseFloat(i.substr(2)):parseFloat(i)-u)||0,f:0,m:l&&4>l?Math.round:0}),c+=i.length;return(r+=t.substr(c))&&o.push(r),o.setRatio=q,o},W=function(e,t,n,o,i,a,r,c,l){"function"==typeof o&&(o=o(l||0,e));var f=typeof e[t],m="function"!==f?"":t.indexOf("set")||"function"!=typeof e["get"+t.substr(3)]?t:"get"+t.substr(3),u="get"!==n?n:m?r?e[m](r):e[m]():e[t],h="string"==typeof o&&"="===o.charAt(1),d={t:e,p:t,s:u,f:"function"===f,pg:0,n:i||t,m:a?"function"==typeof a?a:Math.round:0,pr:0,c:h?parseInt(o.charAt(0)+"1",10)*parseFloat(o.substr(2)):parseFloat(o)-u||0};return("number"!=typeof u||"number"!=typeof o&&!h)&&(r||isNaN(u)||!h&&isNaN(o)||"boolean"==typeof u||"boolean"==typeof o?(d.fp=r,d={t:K(u,h?d.s+d.c:o,c||s.defaultStringFilter,d),p:"setRatio",s:0,c:1,f:2,pg:0,n:i||t,pr:0,m:0}):(d.s=parseFloat(u),h||(d.c=parseFloat(o)-d.s||0))),d.c?((d._next=this._firstPT)&&(d._next._prev=d),this._firstPT=d,d):void 0},I=s._internals={isArray:_,isSelector:M,lazyTweens:u,blobDif:K},b=s._plugins={},g=I.tweenLookup={},ee=0,H=I.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1},U={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},v=r._rootFramesTimeline=new S,p=r._rootTimeline=new S,B=30,y=I.lazyRender=function(){var e,t=u.length;for(T={};--t>-1;)(e=u[t])&&!1!==e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0),e._lazy=!1);u.length=0};p._startTime=o.time,v._startTime=o.frame,p._active=v._active=!0,setTimeout(y,1),r._updateRoot=s.render=function(){if(u.length&&y(),p.render((o.time-p._startTime)*p._timeScale,!1,!1),v.render((o.frame-v._startTime)*v._timeScale,!1,!1),u.length&&y(),o.frame>=B){for(e in B=o.frame+(parseInt(s.autoSleep,10)||120),g){for(t=(n=g[e].tweens).length;--t>-1;)n[t]._gc&&n.splice(t,1);0===n.length&&delete g[e]}if((!(e=p._first)||e._paused)&&s.autoSleep&&!v._first&&1===o._listeners.tick.length){for(var e,t,n;e&&e._paused;)e=e._next;e||o.sleep()}}},o.addEventListener("tick",r._updateRoot);var k=function(e,t,n){var o,i,s=e._gsTweenID;if(g[s||(e._gsTweenID=s="t"+ee++)]||(g[s]={target:e,tweens:[]}),t&&((o=g[s].tweens)[i=o.length]=t,n))for(;--i>-1;)o[i]===t&&o.splice(i,1);return g[s].tweens},Q=function(e,t,n,o){var a,r,i=e.vars.onOverwrite;return i&&(a=i(e,t,n,o)),(i=s.onOverwrite)&&(r=i(e,t,n,o)),!1!==a&&!1!==r},N=function(e,t,n,s,o){if(1===s||s>=4){for(f=o.length,r=0;f>r;r++)if((i=o[r])!==t)i._gc||i._kill(null,e,t)&&(c=!0);else if(5===s)break;return c}var i,r,c,l,f,d=t._startTime+a,u=[],h=0,m=0===t._duration;for(r=o.length;--r>-1;)(i=o[r])===t||i._gc||i._paused||(i._timeline!==t._timeline?(l=l||J(t,0,m),0===J(i,l,m)&&(u[h++]=i)):i._startTime<=d&&i._startTime+i.totalDuration()/i._timeScale>d&&((m||!i._initted)&&d-i._startTime<=2e-10||(u[h++]=i)));for(r=h;--r>-1;)if(i=u[r],2===s&&i._kill(n,e,t)&&(c=!0),2!==s||!i._firstPT&&i._initted){if(2!==s&&!Q(i,t))continue;i._enabled(!1,!1)&&(c=!0)}return c},J=function(e,t,n){for(var s=e._timeline,i=s._timeScale,o=e._startTime;s._timeline;){if(o+=s._startTime,i*=s._timeScale,s._paused)return-100;s=s._timeline}return(o/=i)>t?o-t:n&&o===t||!e._initted&&2*a>o-t?a:(o+=e.totalDuration()/e._timeScale/i)>t+a?0:o-t-a};if(n._init=function(){var e,o,i,a,l,d,t=this.vars,c=this._overwrittenProps,u=this._duration,r=!!t.immediateRender,n=t.ease;if(t.startAt){{for(i in this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),a={},t.startAt)a[i]=t.startAt[i];if(a.overwrite=!1,a.immediateRender=!0,a.lazy=r&&!1!==t.lazy,a.startAt=a.delay=null,this._startAt=s.to(this.target,0,a),r)if(this._time>0)this._startAt=null;else if(0!==u)return}}else if(t.runBackwards&&0!==u)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{for(i in 0!==this._time&&(r=!1),e={},t)H[i]&&"autoCSS"!==i||(e[i]=t[i]);if(e.overwrite=0,e.data="isFromStart",e.lazy=r&&!1!==t.lazy,e.immediateRender=r,this._startAt=s.to(this.target,0,e),r){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=n=n?n instanceof m?n:"function"==typeof n?new m(n,t.easeParams):C[n]||s.defaultEase:s.defaultEase,t.easeParams instanceof Array&&n.config&&(this._ease=n.config.apply(n,t.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(d=this._targets.length,o=0;d>o;o++)this._initProps(this._targets[o],this._propLookup[o]={},this._siblings[o],c?c[o]:null,o)&&(l=!0);else l=this._initProps(this.target,this._propLookup,this._siblings,c,0);if(l&&s._onPluginEvent("_onInitAllProps",this),c&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),t.runBackwards)for(e=this._firstPT;e;)e.s+=e.c,e.c=-e.c,e=e._next;this._onUpdate=t.onUpdate,this._initted=!0},n._initProps=function(t,n,s,o,i){var a,r,c,l,d,u;if(t==null)return!1;for(a in T[t._gsTweenID]&&y(),this.vars.css||t.style&&t!==e&&t.nodeType&&b.css&&!1!==this.vars.autoCSS&&function(e,t){var n,s={};for(n in e)H[n]||n in t&&"transform"!==n&&"x"!==n&&"y"!==n&&"width"!==n&&"height"!==n&&"className"!==n&&"border"!==n||!(!b[n]||b[n]&&b[n]._autoCSS)||(s[n]=e[n],delete e[n]);e.css=s}(this.vars,t),this.vars)if(c=this.vars[a],H[a])c&&(c instanceof Array||c.push&&_(c))&&-1!==c.join("").indexOf("{self}")&&(this.vars[a]=c=this._swapSelfInParams(c,this));else if(b[a]&&(r=new b[a])._onInitTween(t,this.vars[a],this,i)){for(this._firstPT=l={_next:this._firstPT,t:r,p:"setRatio",s:0,c:1,f:1,n:a,pg:1,pr:r._priority,m:0},d=r._overwriteProps.length;--d>-1;)n[r._overwriteProps[d]]=this._firstPT;(r._priority||r._onInitAllProps)&&(u=!0),(r._onDisable||r._onEnable)&&(this._notifyPluginsOfEnabled=!0),l._next&&(l._next._prev=l)}else n[a]=W.call(this,t,a,"get",c,a,0,null,this.vars.stringFilter,i);return o&&this._kill(o,t)?this._initProps(t,n,s,o,i):this._overwrite>1&&this._firstPT&&s.length>1&&N(t,this,n,this._overwrite,s)?(this._kill(n,t),this._initProps(t,n,s,o,i)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(T[t._gsTweenID]=!0),u)},n.render=function(e,t,n){var o,c,l,f,d=this._time,i=this._duration,r=this._rawPrevTime;if(e>=i-1e-7&&e>=0)this._totalTime=this._time=i,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(l=!0,c="onComplete",n=n||this._timeline.autoRemoveChildren),0===i&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(e=0),(0>r||0>=e&&e>=-1e-7||r===a&&"isPause"!==this.data)&&r!==e&&(n=!0,r>a&&(c="onReverseComplete")),this._rawPrevTime=f=!t||e||r===e?e:a);else if(1e-7>e)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==d||0===i&&r>0)&&(c="onReverseComplete",l=this._reversed),0>e&&(this._active=!1,0===i&&(this._initted||!this.vars.lazy||n)&&(r>=0&&(r!==a||"isPause"!==this.data)&&(n=!0),this._rawPrevTime=f=!t||e||r===e?e:a)),this._initted||(n=!0);else if(this._totalTime=this._time=e,this._easeType){var s=e/i,h=this._easeType,m=this._easePower;(1===h||3===h&&s>=.5)&&(s=1-s),3===h&&(s*=2),1===m?s*=s:2===m?s*=s*s:3===m?s*=s*s*s:4===m&&(s*=s*s*s*s),this.ratio=1===h?1-s:2===h?s:.5>e/i?s/2:1-s/2}else this.ratio=this._ease.getRatio(e/i);if(this._time!==d||n){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!n&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=d,this._rawPrevTime=r,u.push(this),void(this._lazy=[e,t]);this._time&&!l?this.ratio=this._ease.getRatio(this._time/i):l&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==d&&e>=0&&(this._active=!0),0===d&&(this._startAt&&(e>=0?this._startAt.render(e,t,n):c||(c="_dummyGS")),this.vars.onStart&&(0!==this._time||0===i)&&(t||this._callback("onStart"))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(0>e&&this._startAt&&-1e-4!==e&&this._startAt.render(e,t,n),t||(this._time!==d||l||n)&&this._callback("onUpdate")),c&&(!this._gc||n)&&(0>e&&this._startAt&&!this._onUpdate&&-1e-4!==e&&this._startAt.render(e,t,n),l&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[c]&&this._callback(c),0===i&&this._rawPrevTime===a&&f!==a&&(this._rawPrevTime=0))}},n._kill=function(e,t,n){if("all"===e&&(e=null),e==null&&(t==null||t===this.target))return this._lazy=!1,this._enabled(!1,!1);t="string"!=typeof t?t||this._targets||this.target:s.selector(t)||t;var o,i,a,r,c,l,d,u,h,m=n&&this._time&&n._startTime===this._startTime&&this._timeline===n._timeline;if((_(t)||M(t))&&"number"!=typeof t[0])for(i=t.length;--i>-1;)this._kill(e,t[i],n)&&(d=!0);else{if(this._targets){for(i=this._targets.length;--i>-1;)if(t===this._targets[i]){a=this._propLookup[i]||{},this._overwrittenProps=this._overwrittenProps||[],c=this._overwrittenProps[i]=e?this._overwrittenProps[i]||{}:"all";break}}else{if(t!==this.target)return!1;a=this._propLookup,c=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(a){if(u=e||a,h=e!==c&&"all"!==c&&e!==a&&("object"!=typeof e||!e._tempKill),n&&(s.onOverwrite||this.vars.onOverwrite)){for(r in u)a[r]&&(l||(l=[]),l.push(r));if((l||!e)&&!Q(this,n,t,l))return!1}for(r in u)(o=a[r])&&(m&&(o.f?o.t[o.p](o.s):o.t[o.p]=o.s,d=!0),o.pg&&o.t._kill(u)&&(d=!0),o.pg&&0!==o.t._overwriteProps.length||(o._prev?o._prev._next=o._next:o===this._firstPT&&(this._firstPT=o._next),o._next&&(o._next._prev=o._prev),o._next=o._prev=null),delete a[r]),h&&(c[r]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return d},n.invalidate=function(){return this._notifyPluginsOfEnabled&&s._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],r.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-a,this.render(Math.min(0,-this._delay))),this},n._enabled=function(e,t){if(c||o.wake(),e&&this._gc){var n,i=this._targets;if(i)for(n=i.length;--n>-1;)this._siblings[n]=k(i[n],this,!0);else this._siblings=k(this.target,this,!0)}return r.prototype._enabled.call(this,e,t),!!this._notifyPluginsOfEnabled&&!!this._firstPT&&s._onPluginEvent(e?"_onEnable":"_onDisable",this)},s.to=function(e,t,n){return new s(e,t,n)},s.from=function(e,t,n){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,new s(e,t,n)},s.fromTo=function(e,t,n,o){return o.startAt=n,o.immediateRender=0!=o.immediateRender&&0!=n.immediateRender,new s(e,t,o)},s.delayedCall=function(e,t,n,o,i){return new s(t,0,{delay:e,onComplete:t,onCompleteParams:n,callbackScope:o,onReverseComplete:t,onReverseCompleteParams:n,immediateRender:!1,lazy:!1,useFrames:i,overwrite:0})},s.set=function(e,t){return new s(e,0,t)},s.getTweensOf=function(e,t){if(e==null)return[];var n,o,i,a;if(e="string"!=typeof e?e:s.selector(e)||e,(_(e)||M(e))&&"number"!=typeof e[0]){for(n=e.length,o=[];--n>-1;)o=o.concat(s.getTweensOf(e[n],t));for(n=o.length;--n>-1;)for(a=o[n],i=n;--i>-1;)a===o[i]&&o.splice(n,1)}else for(n=(o=k(e).concat()).length;--n>-1;)(o[n]._gc||t&&!o[n].isActive())&&o.splice(n,1);return o},s.killTweensOf=s.killDelayedCallsTo=function(e,t,n){"object"==typeof t&&(n=t,t=!1);for(var o=s.getTweensOf(e,t),i=o.length;--i>-1;)o[i]._kill(n,e)},l=h("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(","),this._propName=this._overwriteProps[0],this._priority=t||0,this._super=l.prototype},!0),n=l.prototype,l.version="1.19.0",l.API=2,n._firstPT=null,n._addTween=W,n.setRatio=q,n._kill=function(e){var n,s=this._overwriteProps,t=this._firstPT;if(null!=e[this._propName])this._overwriteProps=[];else for(n=s.length;--n>-1;)null!=e[s[n]]&&s.splice(n,1);for(;t;)null!=e[t.n]&&(t._next&&(t._next._prev=t._prev),t._prev?(t._prev._next=t._next,t._prev=null):this._firstPT===t&&(this._firstPT=t._next)),t=t._next;return!1},n._mod=n._roundProps=function(e){for(var n,t=this._firstPT;t;)(n=e[this._propName]||null!=t.n&&e[t.n.split(this._propName+"_").join("")])&&"function"==typeof n&&(2===t.f?t.t._applyPT.m=n:t.m=n),t=t._next},s._onPluginEvent=function(e,t){var s,o,i,a,r,n=t._firstPT;if("_onInitAllProps"===e){for(;n;){for(r=n._next,s=o;s&&s.pr>n.pr;)s=s._next;(n._prev=s?s._prev:a)?n._prev._next=n:o=n,(n._next=s)?s._prev=n:a=n,n=r}n=t._firstPT=o}for(;n;)n.pg&&"function"==typeof n.t[e]&&n.t[e]()&&(i=!0),n=n._next;return i},l.activate=function(e){for(var t=e.length;--t>-1;)e[t].API===l.API&&(b[(new e[t])._propName]=e[t]);return!0},D.plugin=function(e){if(!(e&&e.propName&&e.init&&e.API))throw"illegal plugin definition.";var n,s=e.propName,a=e.priority||0,r=e.overwriteProps,o={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},t=h("plugins."+s.charAt(0).toUpperCase()+s.substr(1)+"Plugin",function(){l.call(this,s,a),this._overwriteProps=r||[]},!0===e.global),i=t.prototype=new l(s);for(n in i.constructor=t,t.API=e.API,o)"function"==typeof e[n]&&(i[o[n]]=e[n]);return t.version=e.version,l.activate([t]),t},d=e._gsQueue){for(i=0;i<d.length;i++)d[i]();for(n in O)O[n].func||e.console.log("GSAP encountered missing dependency: "+n)}c=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax"),function(e){i=e.noise={};function s(e,t,n){this.x=e,this.y=t,this.z=n}s.prototype.dot2=function(e,t){return this.x*e+this.y*t},s.prototype.dot3=function(e,t,n){return this.x*e+this.y*t+this.z*n};var i,d=[new s(1,1,0),new s(-1,1,0),new s(1,-1,0),new s(-1,-1,0),new s(1,0,1),new s(-1,0,1),new s(1,0,-1),new s(-1,0,-1),new s(0,1,1),new s(0,-1,1),new s(0,1,-1),new s(0,-1,-1)],l=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],t=new Array(512),n=new Array(512);i.seed=function(e){e>0&&e<1&&(e*=65536),(e=Math.floor(e))<256&&(e|=e<<8);for(var o,s=0;s<256;s++)o=1&s?l[s]^255&e:l[s]^e>>8&255,t[s]=t[s+256]=o,n[s]=n[s+256]=d[o%12]},i.seed(0);var u=.5*(Math.sqrt(3)-1),r=(3-Math.sqrt(3))/6,a=1/6;function c(e){return e*e*e*(e*(6*e-15)+10)}function o(e,t,n){return(1-n)*e+n*t}i.simplex2=function(e,s){var d,f,y=(e+s)*u,a=Math.floor(e+y),c=Math.floor(s+y),j=(a+c)*r,o=e-a+j,i=s-c+j;o>i?(f=1,d=0):(f=0,d=1);var p=o-f+r,b=i-d+r,g=o-1+2*r,v=i-1+2*r,_=n[(a&=255)+t[c&=255]],w=n[a+f+t[c+d]],O=n[a+1+t[c+1]],l=.5-o*o-i*i,m=.5-p*p-b*b,h=.5-g*g-v*v;return 70*((l<0?0:(l*=l)*l*_.dot2(o,i))+(m<0?0:(m*=m)*m*w.dot2(p,b))+(h<0?0:(h*=h)*h*O.dot2(g,v)))},i.simplex3=function(e,s,o){var l,d,u,h,m,f,M=.3333333333333333*(e+s+o),p=Math.floor(e+M),g=Math.floor(s+M),v=Math.floor(o+M),F=(p+g+v)*a,r=e-p+F,c=s-g+F,i=o-v+F;r>=c?c>=i?(f=1,m=0,h=0,u=1,l=1,d=0):r>=i?(f=1,m=0,h=0,u=1,l=0,d=1):(f=0,m=0,h=1,u=1,l=0,d=1):c<i?(f=0,m=0,h=1,u=0,l=1,d=1):r<i?(f=0,m=1,h=0,u=0,l=1,d=1):(f=0,m=1,h=0,u=1,l=1,d=0);var w=r-f+a,T=c-m+a,O=i-h+a,S=r-u+2*a,x=c-l+2*a,C=i-d+2*a,E=r-1+.5,k=c-1+.5,A=i-1+.5,z=n[(p&=255)+t[(g&=255)+t[v&=255]]],L=n[p+f+t[g+m+t[v+h]]],N=n[p+u+t[g+l+t[v+d]]],D=n[p+1+t[g+1+t[v+1]]],b=.6-r*r-c*c-i*i,_=.6-w*w-T*T-O*O,y=.6-S*S-x*x-C*C,j=.6-E*E-k*k-A*A;return 32*((b<0?0:(b*=b)*b*z.dot3(r,c,i))+(_<0?0:(_*=_)*_*L.dot3(w,T,O))+(y<0?0:(y*=y)*y*N.dot3(S,x,C))+(j<0?0:(j*=j)*j*D.dot3(E,k,A)))},i.perlin2=function(e,s){i=Math.floor(e),a=Math.floor(s),e-=i,s-=a;var i,a,l=n[(i&=255)+t[a&=255]].dot2(e,s),d=n[i+t[a+1]].dot2(e,s-1),u=n[i+1+t[a]].dot2(e-1,s),h=n[i+1+t[a+1]].dot2(e-1,s-1),r=c(e);return o(o(l,u,r),o(d,h,r),c(s))},i.perlin3=function(e,s,i){var a=Math.floor(e),r=Math.floor(s),l=Math.floor(i);e-=a,s-=r,i-=l;var y=n[(a&=255)+t[(r&=255)+t[l&=255]]].dot3(e,s,i),b=n[a+t[r+t[l+1]]].dot3(e,s,i-1),m=n[a+t[r+1+t[l]]].dot3(e,s-1,i),h=n[a+t[r+1+t[l+1]]].dot3(e,s-1,i-1),f=n[a+1+t[r+t[l]]].dot3(e-1,s,i),p=n[a+1+t[r+t[l+1]]].dot3(e-1,s,i-1),g=n[a+1+t[r+1+t[l]]].dot3(e-1,s-1,i),v=n[a+1+t[r+1+t[l+1]]].dot3(e-1,s-1,i-1),d=c(e),j=c(s),u=c(i);return o(o(o(y,f,d),o(b,p,d),u),o(o(m,g,d),o(h,v,d),u),j)}}(this)