function createLandscape(e){var s,o,r,c,m=document.querySelector(".landscape"),a=window.innerWidth,i=window.innerHeight,t={x:0,y:0,xDamped:0,yDamped:0},f=void 0!==window.orientation;function n(){(n=new THREE.Sky).scale.setScalar(45e4),n.material.uniforms.turbidity.value=1,n.material.uniforms.rayleigh.value=.01,n.material.uniforms.luminance.value=1,n.material.uniforms.mieCoefficient.value=3e-4,n.material.uniforms.mieDirectionalG.value=.99995,o.add(n),sunSphere=new THREE.Mesh(new THREE.SphereBufferGeometry(2e4,16,8),new THREE.MeshBasicMaterial({color:16777215})),sunSphere.visible=!1,o.add(sunSphere);var t=-.03*Math.PI,e=2*Math.PI*-.25;sunSphere.position.x=4e5*Math.cos(e),sunSphere.position.y=4e5*Math.sin(e)*Math.sin(t),sunSphere.position.z=4e5*Math.sin(e)*Math.cos(t),n.material.uniforms.sunPosition.value.copy(sunSphere.position)}function l(){a=window.innerWidth,i=window.innerHeight,r.aspect=a/i,r.updateProjectionMatrix(),c.setSize(a,i)}function d(e){var n,s;e.preventDefault(),"mousemove"==e.type?(n=e.clientX,s=e.clientY):(n=e.changedTouches[0].clientX,s=e.changedTouches[0].clientY),t.x=n,t.y=s}function u(){requestAnimationFrame(u),t.xDamped=h(t.xDamped,t.x,.1),t.yDamped=h(t.yDamped,t.y,.1);var e,n,a,l=.001*performance.now();s.material.uniforms.time.value=l,s.material.uniforms.distortCenter.value=.1*Math.sin(l),s.material.uniforms.maxHeight.value=(e=t.yDamped,(a=20)+(e-(n=0))/(i-n)*(5-a)),c.render(o,r)}function h(e,t,n){return(1-n)*e+n*t}!function(){(function(){o=new THREE.Scene;var e=new THREE.Color(0);o.background=e,o.fog=new THREE.Fog(e,10,400),n(),(r=new THREE.PerspectiveCamera(60,a/i,.1,1e4)).position.y=8,r.position.z=4,ambientLight=new THREE.AmbientLight(16777215,1),o.add(ambientLight),(c=new THREE.WebGLRenderer({canvas:m,antialias:!0})).setPixelRatio=devicePixelRatio,c.setSize(a,i)})(),t=new THREE.PlaneBufferGeometry(100,400,400,400),h={time:{type:"f",value:0},distortCenter:{type:"f",value:.1},roadWidth:{type:"f",value:.5},pallete:{type:"t",value:null},speed:{type:"f",value:1},maxHeight:{type:"f",value:10},color:new THREE.Color(1,1,1)},p=new THREE.ShaderMaterial({uniforms:THREE.UniformsUtils.merge([THREE.ShaderLib.basic.uniforms,h]),vertexShader:document.getElementById("custom-vertex").textContent,fragmentShader:document.getElementById("custom-fragment").textContent,wireframe:!1,fog:!0}),(s=new THREE.Mesh(t,p)).position.z=-180,s.rotation.x=-Math.PI/2,void o.add(s),void(new THREE.TextureLoader).load(e.palleteImage,function(e){s.material.uniforms.pallete.value=e,s.material.needsUpdate=!0}),u(),f?window.addEventListener("touchmove",d,{passive:!1}):window.addEventListener("mousemove",d);var t,h,p;window.addEventListener("resize",l),l()}()}createLandscape({palleteImage:pallete})