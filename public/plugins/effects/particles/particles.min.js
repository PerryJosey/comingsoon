function Particle(e,t,n){this.init(e,t,n)}!function(e,t){"object"==typeof exports?module.exports=t(e,e.document):"function"==typeof define&&define.amd?define(function(){return t(e,e.document)}):e.Sketch=t(e,e.document)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function c(e){return"function"==typeof e}function j(e){return"string"==typeof e}function i(e,t,n){for(var s in t)!n&&s in e||(e[s]=t[s]);return e}function A(e,t){return function(){e.apply(t,arguments)}}function S(e){var t,n={};for(t in e)"webkitMovementX"!==t&&"webkitMovementY"!==t&&(n[t]=c(e[t])?A(e[t],e):e[t]);return n}function M(e){function o(t){c(t)&&t.apply(e,[].splice.call(arguments,1))}function K(e){for(t=0;t<u.length;t++)j(C=u[t])?s[(e?"add":"remove")+"EventListener"].call(s,C,H,!1):c(C)?H=C:s=C}function U(){s=V?e.style:e.canvas,N=V?"px":"",_=e.width,b=e.height,e.fullscreen&&(b=e.height=n.innerHeight,_=e.width=n.innerWidth),e.retina&&O&&a&&(s.style.height=b+"px",s.style.width=_+"px",_*=a,b*=a),s.height!==b&&(s.height=b+N),s.width!==_&&(s.width=_+N),z&&o(e.resize)}function $(t,s){return function(t,s){L=s.getBoundingClientRect(),t.x=t.pageX-L.left-(n.scrollX||n.pageXOffset),t.y=t.pageY-L.top-(n.scrollY||n.pageYOffset),e.retina&&O&&a&&(t.x*=a,t.y*=a)}(t,e.element),(s=s||{}).ox=s.x||t.x,s.oy=s.y||t.y,s.x=t.x,s.y=t.y,s.dx=s.x-s.ox,s.dy=s.y-s.oy,s}function v(n){for(n=function(e){if(e.preventDefault(),(g=S(e)).originalEvent=e,g.touches)for(d.length=g.touches.length,t=0;t<g.touches.length;t++)d[t]=$(g.touches[t],d[t]);else d.length=0,d[0]=$(g,T);return i(T,d[0],!0),g}(n),x=(D=u.indexOf(F=n.type))-1,e.dragging=!!/down|start/.test(F)||!/up|end/.test(F)&&e.dragging;x;)j(u[x])?o(e[u[x--]],n):j(u[D])?o(e[u[D++]],n):x=0}function E(){e.now=+new Date,e.running=!0}function k(){e.running=!1}var t,s,g,b,_,w,x,C,F,D,N,L,R,H,I,B,W,M=0,d=[],P=!1,z=!1,a=n.devicePixelRatio||1,V=e.type==p,O=e.type==m,T={x:0,y:0,ox:0,oy:0,dx:0,dy:0},u=[e.eventTarget||e.element,v,"mousedown","touchstart",v,"mousemove","touchmove",v,"mouseup","touchend",v,"click",v,"mouseout",v,"mouseover",l,function(t){w=t.keyCode,W="keyup"==t.type,A[w]=A[function(e){return y[e]||String.fromCharCode(e)}(w)]=!W,o(e[t.type],t)},"keydown","keyup",n,function(t){e.autopause&&("blur"==t.type?k:E)(),o(e[t.type],t)},"focus","blur",U,"resize"],A={};for(w in y)A[y[w]]=!1;return i(e,{touches:d,mouse:T,keys:A,dragging:!1,running:!1,millis:0,now:NaN,dt:NaN,destroy:function(){R=e.element.parentNode,t=f.indexOf(e),R&&R.removeChild(e.element),~t&&f.splice(t,1),K(!1),k()},toggle:function(){(e.running?k:E)()},clear:function(){O&&e.clearRect(0,0,e.width,e.height)},start:E,stop:k}),f.push(e),e.autostart&&E(),K(!0),U(),function t(){h(B),B=r(t),z||(o(e.setup),z=c(e.setup)),P||(o(e.resize),P=c(e.resize)),e.running&&!M&&(e.dt=(I=+new Date)-e.now,e.millis+=e.dt,e.now=I,o(e.update),O&&(e.retina&&(e.save(),e.scale(a,a)),e.autoclear&&e.clear()),o(e.draw),O&&e.retina&&e.restore()),M=++M%e.interval}(),e}for(var o,E,g="E LN10 LN2 LOG2E LOG10E PI SQRT1_2 SQRT2 abs acos asin atan ceil cos exp floor log round sin sqrt tan atan2 pow max min".split(" "),k="__hasSketch",s=Math,m="canvas",b="webgl",p="dom",l=t,n=e,f=[],C={fullscreen:!0,autostart:!0,autoclear:!0,autopause:!0,container:l.body,interval:1,globals:!0,retina:!1,type:m},y={8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",27:"ESCAPE",32:"SPACE",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN"},_={CANVAS:m,WEB_GL:b,WEBGL:b,DOM:p,instances:f,install:function(e){if(!e[k]){for(var t=0;t<g.length;t++)e[g[t]]=s[g[t]];i(e,{TWO_PI:2*s.PI,HALF_PI:s.PI/2,QUARTER_PI:s.PI/4,random:function(e,t){return function(e){return"[object Array]"==Object.prototype.toString.call(e)}(e)?e[~~(s.random()*e.length)]:(function(e){return"number"==typeof e}(t)||(t=e||1,e=0),e+s.random()*(t-e))},lerp:function(e,t,n){return e+n*(t-e)},map:function(e,t,n,s,o){return(e-t)/(n-t)*(o-s)+s}}),e[k]=!0}},create:function(e){return(e=i(e||{},C)).globals&&_.install(self),o=e.element=e.element||l.createElement(e.type===p?"div":"canvas"),E=e.context=e.context||function(){switch(e.type){case m:return o.getContext("2d",e);case b:return o.getContext("webgl",e)||o.getContext("experimental-webgl",e);case p:return o.canvas=o}}(),(e.container||l.body).appendChild(o),_.augment(E,e)},augment:function(e,t){return(t=i(t||{},C)).element=e.canvas||e,t.element.className+=" sketch",i(e,t,!0),M(e)}},v=["ms","moz","webkit","o"],a=self,w=0,d="AnimationFrame",O="request"+d,x="cancel"+d,r=a[O],h=a[x],u=0;u<v.length&&!r;u++)r=a[v[u]+"Request"+d],h=a[v[u]+"Cancel"+d];return a[O]=r=r||function(e){var t=+new Date,n=s.max(0,16-(t-w)),o=setTimeout(function(){e(t+n)},n);return w=t+n,o},a[x]=h=h||function(e){clearTimeout(e)},_}),Particle.prototype={init:function(e,t,n){this.alive=!0,this.radius=n||10,this.wander=.15,this.theta=random(TWO_PI),this.drag=.92,this.color="#fff",this.x=e||0,this.y=t||0,this.vx=0,this.vy=0},move:function(){this.x+=this.vx,this.y+=this.vy,this.vx*=this.drag,this.vy*=this.drag,this.theta+=random(-.5,.5)*this.wander,this.vx+=.1*sin(this.theta),this.vy+=.1*cos(this.theta),this.radius*=.96,this.alive=this.radius>.5},draw:function(e){e.beginPath(),e.arc(this.x,this.y,this.radius,0,TWO_PI),e.fillStyle=this.color,e.fill()}};var particles=[],pool=[],demo=Sketch.create({container:document.getElementById("particles")});demo.setup=function(){var e,t,n;for(e=0;e<20;e++)t=.5*demo.width+random(-100,100),n=.5*demo.height+random(-100,100),demo.spawn(t,n)},demo.spawn=function(e,t){particles.length>=MAX_PARTICLES&&pool.push(particles.shift()),particle=pool.length?pool.pop():new Particle,particle.init(e,t,random(5,40)),particle.wander=random(.5,2),particle.color=random(COLOURS),particle.drag=random(.9,.99),theta=random(TWO_PI),force=random(2,8),particle.vx=sin(theta)*force,particle.vy=cos(theta)*force,particles.push(particle)},demo.update=function(){var e,t;for(e=particles.length-1;e>=0;e--)(t=particles[e]).alive?t.move():pool.push(particles.splice(e,1)[0])},demo.draw=function(){demo.globalCompositeOperation="lighter";for(var e=particles.length-1;e>=0;e--)particles[e].draw(demo)},demo.mousemove=function(){var e,t,n,s,o;for(e=0,o=demo.touches.length;e<o;e++)for(t=demo.touches[e],s=random(1,4),n=0;n<s;n++)demo.spawn(t.x,t.y)}