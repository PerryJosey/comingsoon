var summaryInclude=180,fuseOptions={shouldSort:!0,includeMatches:!0,includeScore:!0,tokenize:!0,location:0,distance:100,minMatchCharLength:1,keys:[{name:"title",weight:.45},{name:"contents",weight:.4}]},inputBox=document.getElementById("search-query"),searchQuery;null!==inputBox&&(searchQuery=param("q"),"undefined"!=typeof textResults&&(searchQuery?(inputBox.value=searchQuery||"",executeSearch(searchQuery,!1)):document.getElementById("search-results").innerHTML="<p>"+textResults+"</p>"));function executeSearch(e){fetch("/index.json").then(function(t){200===t.status?t.json().then(function(t){var n=new Fuse(t,fuseOptions).search(e);n.length>0?populateResults(n):document.getElementById("search-results").innerHTML="<p>"+textNotFound+"</p>"}).catch(function(e){console.log("Fetch Error :-S",e)}):console.log("Looks like there was a problem. Status Code: "+t.status)})}function populateResults(e){var t=document.getElementById("search-query").value,n=document.getElementById("search-results"),s=document.getElementById("search-result-box").innerHTML;e.forEach(function(e,o){var i,a,c,l=e.item.contents,r=[];r.push(t),a=l.substring(0,2*summaryInclude)+"&hellip;",i="",e.item.tags&&e.item.tags.forEach(function(e){i=i+"<a href='/tags/"+e+"'>#"+e+"</a> "}),c=render(s,{key:o,title:e.item.title,link:e.item.permalink,snippet:a}),n.innerHTML+=c,r.forEach(function(e){new Mark(document.getElementById("search-item-"+o)).mark(e)})})}function render(e,t){var n,s,o,i,a;for(i=/\$\{\s*isset ([a-zA-Z]*) \s*\}(.*)\$\{\s*end\s*}/g,s=e;null!==(n=i.exec(e));)s=t[n[1]]?s.replace(n[0],n[2]):s.replace(n[0],"");for(o in e=s,t)a=new RegExp("\\$\\{\\s*"+o+"\\s*\\}","g"),e=e.replace(a,t[o]);return e}function param(e){return decodeURIComponent((location.search.split(e+"=")[1]||"").split("&")[0]).replace(/\+/g," ")}